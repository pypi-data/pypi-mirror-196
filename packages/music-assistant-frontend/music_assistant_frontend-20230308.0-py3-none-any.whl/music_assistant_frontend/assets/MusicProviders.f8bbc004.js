/* empty css                             */import{b as L,e as j,r as A,ab as F,c as O,q as r,a$ as q,J,E as G,o,l as d,a,w as i,j as l,b0 as x,h as _,p as c,v as u,i as g,k as v,F as T,n as B,m as b,b1 as H,b2 as K}from"./index.fb7dda49.js";import{b as D}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.e583d1e0.js";import{V as Q}from"./VAlert.ac001733.js";import{a as M,V as E,b as k}from"./VTooltip.f6c7a230.js";import{V as S,a as f}from"./VBtn.c1aaa6a4.js";import{i as W,V as y,b as z}from"./VCardText.1b5ea141.js";import"./VDivider.ca2b9c01.js";const X=c("br",null,null,-1),Y={class:"listitem-actions"},Z={key:0,class:"listitem-action",style:{"margin-right":"15px"}},ee={key:1,class:"listitem-action",style:{"margin-right":"15px"}},te={key:2,class:"listitem-action",style:{"margin-right":"15px"}},ie={key:3,class:"listitem-action",style:{"margin-right":"15px"}},ne={key:0},ae={key:1},oe={class:"listitem-action"},ve=L({__name:"MusicProviders",setup(se){const C=j(),p=A([]),s=F({}),I=O(()=>Object.values(s).filter(t=>!t.builtin&&(t.multi_instance||!p.value.find(m=>m.domain)))),N=r.subscribe(q.PROVIDERS_UPDATED,()=>{V()});J(N);const V=async function(){p.value=await r.getData("config/providers");const t=await r.getData("providers/available");for(const m of t)s[m.domain]=m},R=function(t){r.sendCommand("config/providers/remove",{instance_id:t}),p.value=p.value.filter(m=>m.instance_id!=t)},$=function(t){console.log("editProvider",t),C.push(`/settings/editprovider/${t}`)},U=function(t){console.log("addProvider",t),C.push(`/settings/addprovider/${t.domain}`)};return G(()=>r.providers,t=>{t&&V()},{immediate:!0}),(t,m)=>(o(),d("section",null,[a(W,null,{default:i(()=>[p.value.filter(e=>e.type==l(x).MUSIC&&e.domain in s&&e.domain!="url").length==0?(o(),_(Q,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:""},{default:i(()=>[c("b",null,u(t.$t("settings.no_providers")),1),X,g(" "+u(t.$t("settings.no_providers_detail")),1)]),_:1})):v("",!0),c("div",null,[(o(!0),d(T,null,B(p.value.filter(e=>e.type==l(x).MUSIC&&e.domain in s),e=>(o(),_(y,{key:e.instance_id,title:e.name||s[e.domain].name,subtitle:s[e.domain].description,onClick:h=>$(e.instance_id)},{prepend:i(()=>[a(z,{contain:"",width:"36px",class:"listitem-thumb",src:l(D)(e.domain)},null,8,["src"])]),append:i(()=>{var h,P;return[c("div",Y,[l(r).syncTasks.value.filter(n=>n.provider_instance==e.instance_id).length>0?(o(),d("div",Z,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,b(n,{color:"grey"}),{default:i(()=>[g(" mdi-sync ")]),_:2},1040)]),default:i(()=>[c("span",null,u(t.$t("settings.sync_running")),1)]),_:1})])):v("",!0),e.enabled?(h=l(r).providers[e.instance_id])!=null&&h.last_error?(o(),d("div",te,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,b(n,{color:"red"}),{default:i(()=>[g(" mdi-alert-circle ")]),_:2},1040)]),default:i(()=>{var n;return[c("span",null,u((n=l(r).providers[e.instance_id])==null?void 0:n.last_error),1)]}),_:2},1024)])):(P=l(r).providers[e.instance_id])!=null&&P.available?v("",!0):(o(),d("div",ie,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,H(K(n)),{default:i(()=>[g(" mdi-timer-sand ")]),_:2},1040)]),default:i(()=>{var n,w;return[(n=l(r).providers[e.instance_id])!=null&&n.last_error?(o(),d("span",ne,u((w=l(r).providers[e.instance_id])==null?void 0:w.last_error),1)):(o(),d("span",ae,u(t.$t("settings.not_loaded")),1))]}),_:2},1024)])):(o(),d("div",ee,[a(k,{location:"top end",origin:"end center"},{activator:i(({props:n})=>[a(f,b(n,{color:"grey"}),{default:i(()=>[g(" mdi-cancel ")]),_:2},1040)]),default:i(()=>[c("span",null,u(t.$t("settings.provider_disabled")),1)]),_:1})])),c("div",oe,[a(M,{location:"bottom end"},{activator:i(({props:n})=>[a(S,b({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},n,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:i(()=>[a(E,null,{default:i(()=>[a(y,{title:t.$t("settings.configure"),"prepend-icon":"mdi-cog",disabled:s[e.domain].config_entries.length==0,onClick:n=>$(e.instance_id)},null,8,["title","disabled","onClick"]),s[e.domain].documentation?(o(),_(y,{key:0,title:t.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:s[e.domain].documentation,target:"_blank"},null,8,["title","href"])):v("",!0),s[e.domain].documentation?(o(),_(y,{key:1,title:t.$t("settings.sync"),"prepend-icon":"mdi-sync",onClick:n=>l(r).startSync(void 0,[e.instance_id])},null,8,["title","onClick"])):v("",!0),!s[e.domain].builtin&&!s[e.domain].load_by_default?(o(),_(y,{key:2,title:t.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:n=>R(e.instance_id)},null,8,["title","onClick"])):v("",!0)]),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"]))),128))]),a(M,{location:"bottom end"},{activator:i(({props:e})=>[a(S,b({color:"primary",icon:"mdi-plus",size:"x-large",position:"fixed",location:"bottom right",elevation:"8",style:{"margin-bottom":"115px","margin-right":"15px","z-index":"9999"}},e),null,16)]),default:i(()=>[a(E,null,{default:i(()=>[(o(!0),d(T,null,B(l(I),e=>(o(),_(y,{key:e.domain,title:e.name,onClick:h=>U(e)},{prepend:i(()=>[a(z,{contain:"",width:"26px",style:{"margin-right":"20px"},src:l(D)(e.domain)},null,8,["src"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}});export{ve as default};
