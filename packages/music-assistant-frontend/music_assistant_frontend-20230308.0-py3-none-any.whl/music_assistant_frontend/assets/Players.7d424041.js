import{b as I,e as T,r as L,ab as A,q as s,a$ as F,J as R,E as x,o,l as c,a as i,w as a,h as _,p as n,v as u,i as v,k as y,F as z,n as M,j as d,m as g,b1 as U,b2 as j}from"./index.fb7dda49.js";import{b as q}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.e583d1e0.js";import{V as G}from"./VAlert.ac001733.js";import{i as J,V as b,b as O}from"./VCardText.1b5ea141.js";import{b as V,a as S,V as Y}from"./VTooltip.f6c7a230.js";import{a as C,V as H}from"./VBtn.c1aaa6a4.js";import"./VDivider.ca2b9c01.js";const K=n("br",null,null,-1),Q={class:"listitem-actions"},W={key:0,class:"listitem-action"},X={key:1,class:"listitem-action"},Z={key:2,class:"listitem-action"},ee={class:"listitem-action"},de=I({__name:"Players",setup(te){const B=T(),p=L([]),f=A({}),N=s.subscribe_multi([F.PLAYER_CONFIG_UPDATED],()=>{$()});R(N);const $=async function(){p.value=await s.getData("config/players");const e=await s.getData("providers/available");for(const l of e)f[l.domain]=l},D=function(e){s.sendCommand("config/players/remove",{player_id:e}),p.value=p.value.filter(l=>l.player_id!=e)},P=function(e){B.push(`/settings/editplayer/${e}`)},k=function(e){var l;return e.name||((l=s.players[e.player_id])==null?void 0:l.name)||e.player_id};return x(()=>s.players,e=>{e&&$()},{immediate:!0}),(e,l)=>(o(),c("section",null,[i(J,null,{default:a(()=>[p.value.length==0?(o(),_(G,{key:0,color:"primary",theme:"dark",icon:"mdi-radio-tower",prominent:""},{default:a(()=>[n("b",null,u(e.$t("settings.no_providers")),1),K,v(" "+u(e.$t("settings.no_providers_detail")),1)]),_:1})):y("",!0),n("div",null,[(o(!0),c(z,null,M(p.value.sort((t,m)=>k(t)>k(m)?1:-1),t=>{var m;return o(),_(b,{key:t.player_id,title:k(t),subtitle:((m=d(s).providers[t.provider])==null?void 0:m.name)||t.provider,onClick:h=>P(t.player_id)},{prepend:a(()=>[i(O,{scale:"",width:"36px",class:"listitem-thumb",src:d(q)(t.provider)},null,8,["src"])]),append:a(()=>{var h,w;return[n("div",Q,[t.enabled?(h=d(s).providers[t.provider])!=null&&h.last_error?(o(),c("div",X,[i(V,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,g(r,{color:"red"}),{default:a(()=>[v(" mdi-alert-circle ")]),_:2},1040)]),default:a(()=>{var r;return[n("span",null,u((r=d(s).providers[t.provider])==null?void 0:r.last_error),1)]}),_:2},1024)])):(w=d(s).players[t.player_id])!=null&&w.available?y("",!0):(o(),c("div",Z,[i(V,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,U(j(r)),{default:a(()=>[v(" mdi-timer-sand ")]),_:2},1040)]),default:a(()=>[n("span",null,u(e.$t("settings.player_not_available")),1)]),_:1})])):(o(),c("div",W,[i(V,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,g(r,{color:"grey"}),{default:a(()=>[v(" mdi-cancel ")]),_:2},1040)]),default:a(()=>[n("span",null,u(e.$t("settings.player_disabled")),1)]),_:1})])),n("div",ee,[i(S,{location:"bottom end"},{activator:a(({props:r})=>[i(H,g({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},r,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:a(()=>[i(Y,null,{default:a(()=>{var r;return[i(b,{title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:E=>P(t.player_id)},null,8,["title","onClick"]),f[t.provider].documentation?(o(),_(b,{key:0,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:f[t.provider].documentation,target:"_blank"},null,8,["title","href"])):y("",!0),(r=d(s).players[t.player_id])!=null&&r.available?y("",!0):(o(),_(b,{key:1,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:E=>D(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{de as default};
