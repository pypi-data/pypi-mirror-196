import{g as Ge,r as P,u as Be,c as C,t as K,a as l,m as Y,d as te,b as F,e as Ie,f as Qe,o as v,h as T,w as u,i as O,j as e,s as b,k as S,l as w,n as oe,F as J,p as V,q as A,v as k,x as re,y as Ze,T as Me,z as Xe,A as Ke,B as Z,P as Je,C as pe,D as ye,E as j,M as de,G as Ae,I as Ce,H as ie,J as Ee,K as et,L as ze,N as tt,O as at,Q as nt,R as lt,S as it,_ as ot,U as st}from"./index.7fcf94ab.js";import{u as G,V as M,a as L,b as Le,m as ue,c as Ne,d as De,e as We,f as me,g as Oe,h as qe,i as He,j as rt,k as ut,t as dt}from"./VBtn.db790421.js";import{V as ee,a as se,b as ct,c as mt}from"./VTooltip.d58398b9.js";import{V as U,a as vt,b as ce}from"./VCardText.6fcdb997.js";import{m as pt,f as yt,V as ft,a as xe}from"./VToolbar.28d72c87.js";import{m as fe,u as ge,a as gt,b as ht,c as _t}from"./layout.7cdc09d3.js";/* empty css              */import{g as he,t as bt,_ as kt,a as wt,f as Ve,b as Te}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.2732e3aa.js";import{V as ve,a as At,b as Ct,c as xt,d as Vt}from"./VExpansionPanel.c65356de.js";import{V as X}from"./VDivider.e1e6ea8d.js";import{V as Tt,a as St}from"./VCardTitle.ebfa4762.js";import{i as $t,a as Rt,g as Se,b as Pt}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.09bfb1b0.js";import{V as $e}from"./VCard.f33e2c8d.js";import{_ as Bt}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VLabel.3b782437.js";const It=Ge()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...pt(),...fe(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,d){let{slots:c}=d;const s=P(),n=Be(t,"modelValue"),a=C(()=>{var m,p;var o,r;const y=(m=(o=s.value)==null?void 0:o.contentHeight)!=null?m:0,g=(p=(r=s.value)==null?void 0:r.extensionHeight)!=null?p:0;return y+g}),{layoutItemStyles:i}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:K(t,"location"),layoutSize:a,elementSize:a,active:n,absolute:K(t,"absolute")});return G(()=>{const[o]=yt(t);return l(ft,Y({ref:s,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...i.value,height:void 0}},o),c)}),{}}}),Mt=te({name:"VAppBarTitle",props:{...xe.props},setup(t,d){let{slots:c}=d;return G(()=>l(xe,{class:"v-app-bar-title"},c)),{}}}),Et={key:0,style:{opacity:"0.5"}},zt={class:"listitem-actions"},Lt={key:0},Nt={key:1},Dt=F({__name:"AppBar",setup(t){const d=Ie();P(!1);const{t:c}=Qe(),s=[{label:"artists",icon:"mdi-account-music",path:"/artists"},{label:"albums",icon:"mdi-album",path:"/albums"},{label:"tracks",icon:"mdi-file-music",path:"/tracks"},{label:"radios",icon:"mdi-radio",path:"/radios"},{label:"playlists",icon:"mdi-playlist-music",path:"/playlists"},{label:"browse",icon:"mdi-folder",path:"/browse"},{label:"settings.settings",icon:"mdi-cog",path:"/settings"}],n=C(()=>{if(d.currentRoute.value.name=="home")return{mainTitle:c("mass"),subTitle:c("home")};if(d.currentRoute.value.path.includes("settings"))return{mainTitle:c("mass"),subTitle:c("settings.settings")};if(d.currentRoute.value.name!="home"&&!b.topBarTitle)return{mainTitle:c("mass"),mainLink:()=>{d.push({name:"home"})},subTitle:c(d.currentRoute.value.name.toString())};if(d.currentRoute.value.name!="home"&&b.topBarTitle){if(a.value&&d.currentRoute.value.path.includes(a.value.path))return{mainTitle:c(a.value.name.replace("home","mass")),mainLink:()=>{i()},subTitle:b.topBarTitle};const o=d.currentRoute.value.path.split("/")[1];return{mainTitle:c(o),mainLink:()=>{d.push(`/${o}`)},subTitle:b.topBarTitle}}return d.currentRoute.value?{mainTitle:c(d.currentRoute.value.name.toString())}:{mainTitle:c("mass")}}),a=C(()=>{if(b.prevRoutes.length>0)return b.prevRoutes[b.prevRoutes.length-1]}),i=function(){const o=b.prevRoutes.pop();o&&(o.params.backnav="true",d.replace(o).then(()=>{setTimeout(()=>{window.scrollTo(0,o.meta.scrollPos||0)},400)}))};return(o,r)=>(v(),T(It,{color:"grey-darken-3",density:"compact",style:{height:"56px"},elevation:2},{prepend:u(()=>[l(se,{location:"bottom end"},{activator:u(({props:y})=>[l(M,Y({style:{"margin-left":"-8px","margin-right":"-20px"}},y,{variant:"plain"}),{default:u(()=>[l(L,{size:"40"},{default:u(()=>[O(" mdi-playlist-play ")]),_:1})]),_:2},1040)]),default:u(()=>[l(ee,null,{default:u(()=>[e(b).prevRoutes.length>0?(v(),T(U,{key:0,title:o.$t("page_back"),"prepend-icon":"mdi-arrow-left",onClick:r[0]||(r[0]=y=>i())},null,8,["title"])):S("",!0),e(d).currentRoute.value.name!="home"?(v(),T(U,{key:1,title:o.$t("home"),"prepend-icon":"mdi-home",onClick:r[1]||(r[1]=y=>e(d).push({name:"home"}))},null,8,["title"])):S("",!0),(v(),w(J,null,oe(s,y=>l(U,{key:y.path,title:o.$t(y.label),"prepend-icon":y.icon,onClick:g=>e(d).push(y.path)},null,8,["title","prepend-icon","onClick"])),64))]),_:1})]),_:1})]),append:u(()=>[V("div",zt,[l(ct,{location:"top end",origin:"end center"},{activator:u(({props:y})=>[e(A).syncTasks.value.length>0||e(A).fetchesInProgress.value.length>0?(v(),T(Le,Y({key:0,indeterminate:""},y),null,16)):S("",!0)]),default:u(()=>[e(A).syncTasks.value.length>0?(v(),w("span",Lt,k(o.$t("sync_running")),1)):(v(),w("span",Nt,k(o.$t("loading")),1))]),_:1}),l(se,{location:"bottom end"},{activator:u(({props:y})=>[e(b).topBarContextMenuItems.length>0?(v(),T(M,Y({key:0,icon:"mdi-dots-vertical",style:{"margin-right":"-6px"}},y,{variant:"plain"}),null,16)):S("",!0)]),default:u(()=>[l(ee,null,{default:u(()=>[(v(!0),w(J,null,oe(e(b).topBarContextMenuItems,(y,g)=>(v(),T(U,{key:g,title:o.$t(y.label,y.labelArgs),onClick:m=>y.action?y.action():""},{prepend:u(()=>[l(vt,{icon:y.icon},null,8,["icon"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})])]),default:u(()=>[l(Mt,null,{default:u(()=>[V("span",{style:{cursor:"pointer"},onClick:r[2]||(r[2]=(...y)=>e(n).mainLink&&e(n).mainLink(...y))},k(e(n).mainTitle),1),e(n).subTitle?(v(),w("span",Et," | "+k(e(n).subTitle),1)):S("",!0)]),_:1})]),_:1}))}});const Wt=te({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...ue()},setup(t,d){let{slots:c}=d;return G(()=>l(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},c)),{}}});function Ue(){const t=P(!1);return re(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:C(()=>t.value?void 0:{transition:"none !important"}),isBooted:Ze(t)}}const Ot=te({name:"VMain",props:{scrollable:Boolean,...ue({tag:"main"})},setup(t,d){let{slots:c}=d;const{mainStyles:s}=gt(),{ssrBootStyles:n}=Ue();return G(()=>{var a,i;return l(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[s.value,n.value]},{default:()=>[t.scrollable?l("div",{class:"v-main__scroller"},[(a=c.default)==null?void 0:a.call(c)]):(i=c.default)==null?void 0:i.call(c)]})}),{}}}),qt=F({__name:"View",setup(t){return(d,c)=>{const s=Ke("router-view");return v(),T(Ot,{id:"cont"},{default:u(()=>[l(Wt,{fluid:"",style:{padding:"0"}},{default:u(()=>[l(s,{app:""},{default:u(({Component:n})=>[l(Me,{name:"fade",mode:"out-in"},{default:u(()=>[(v(),T(Xe(n)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),Ht="/assets/crossfade.ba51f69a.png",Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAnElEQVRYw+2UwQ6AMAhDwfjh+OXzZrgslqxjW8K7GWdtRqlIUYyh/qG1Zt8LVYuKzTDUnCGNy41zrfhpGRrhZgn5/HmiWdzuhsrQH7QMicjDENmuGKEbQjaotiwLaGSZeUIzZB2jhnwfAdqyzFAze+gXxPSZxcgaB6JDa+rUDLG2DNFJ3TLkzDlN3bveGWc83ZFlctTIKOVWFCt5AYSDaENMYFhMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTE1VDEzOjExOjE0KzAwOjAwADepDgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0xNVQxMzoxMToxNCswMDowMHFqEbIAAAAASUVORK5CYII=",Yt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},jt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ft={class:"text-body-2"},Gt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},Qt={key:0,class:"syncbtn"},Zt={key:1,class:"syncbtn"},Xt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ye=F({__name:"VolumeControl",props:{player:null},setup(t){const d=function(s){var a;const n=[];s.type!=Je.GROUP&&n.push(s);for(const i of s.group_childs){const o=(a=A)==null?void 0:a.players[i];o&&o.available&&n.push(o)}return n.sort((i,o)=>i.display_name.toUpperCase()>o.display_name.toUpperCase()?1:-1),n},c=function(s,n){for(const a of d(s))for(const i of d(s))A.sendCommand("players/cmd/power",{player_id:i.player_id,powered:n})};return(s,n)=>(v(),T(ee,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[t.player.group_childs.length>0?(v(),w("div",{key:0,class:"volumerow",style:Z(t.player.powered?"opacity: 0.75":"opacity: 0.5")},[l(M,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:n[0]||(n[0]=a=>c(t.player,!t.player.powered))},{default:u(()=>[l(L,{icon:"mdi-power"})]),_:1}),V("span",Yt,k(e(he)(t.player,30)),1),V("div",jt,k(t.player.group_volume),1),l(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!t.player.powered,"model-value":Math.round(t.player.group_volume),style:{"margin-left":"5px"},"onUpdate:modelValue":n[1]||(n[1]=a=>e(A).playerCommandGroupVolume(t.player.player_id,a))},null,8,["disabled","model-value"])],4)):S("",!0),t.player.group_childs.length>0?(v(),T(X,{key:1,style:{"margin-top":"10px","margin-bottom":"10px"}})):S("",!0),(v(!0),w(J,null,oe(d(t.player),a=>(v(),w("div",{key:a.player_id,class:"volumerow",style:Z(a.powered?"opacity: 0.75":"opacity: 0.5")},[V("span",Ft,[l(M,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:i=>e(A).playerCommandPowerToggle(a.player_id)},{default:u(()=>[l(L,{icon:"mdi-power"})]),_:2},1032,["onClick"]),V("span",Gt,k(e(bt)(a.display_name,27)),1),!a.synced_to&&!a.group_childs.length&&Object.values(e(A).players).filter(i=>!i.synced_to&&i.can_sync_with.includes(a.player_id)).length>0?(v(),w("div",Qt,[l(se,{location:"bottom end",style:{"z-index":"999999"}},{activator:u(({props:i})=>[l(M,Y({icon:""},i,{variant:"plain"}),{default:u(()=>[l(L,null,{default:u(()=>[O("mdi-link-variant")]),_:1})]),_:2},1040)]),default:u(()=>[l(ee,null,{default:u(()=>[l(Tt,null,{default:u(()=>[O(k(s.$t("sync_player_to")),1)]),_:1}),(v(!0),w(J,null,oe(Object.values(e(A).players).filter(i=>!i.synced_to&&i.can_sync_with.includes(a.player_id)),i=>(v(),T(U,{key:i.player_id,title:i.display_name,onClick:o=>e(A).playerCommandSync(a.player_id,i.player_id)},null,8,["title","onClick"]))),128)),l(X)]),_:2},1024)]),_:2},1024)])):S("",!0),a.synced_to?(v(),w("div",Zt,[l(M,{icon:"",variant:"plain",onClick:i=>e(A).playerCommandUnSync(a.player_id)},{default:u(()=>[l(L,null,{default:u(()=>[O("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):S("",!0)]),V("div",Xt,k(a.volume_level),1),l(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!a.powered,"model-value":Math.round(a.volume_level),style:{"margin-left":"5px"},"onUpdate:modelValue":i=>e(A).playerCommandVolumeSet(a.player_id,i)},null,8,["disabled","model-value","onUpdate:modelValue"])],4))),128))]),_:1}))}});const Kt=te({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ne(),...De(),...fe(),...We(),...ue({tag:"footer"}),...pe()},setup(t,d){let{slots:c}=d;const{themeClasses:s}=ye(t),{backgroundColorClasses:n,backgroundColorStyles:a}=me(K(t,"color")),{borderClasses:i}=Oe(t),{elevationClasses:o}=qe(t),{roundedClasses:r}=He(t),y=P(32),{resizeRef:g}=rt(_=>{!_.length||(y.value=_[0].target.clientHeight)}),m=C(()=>t.height==="auto"?y.value:parseInt(t.height,10)),{layoutItemStyles:p}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:m,elementSize:C(()=>t.height==="auto"?void 0:m.value),active:C(()=>t.app),absolute:K(t,"absolute")});return G(()=>l(t.tag,{ref:g,class:["v-footer",s.value,n.value,i.value,o.value,r.value],style:[a.value,t.app?p.value:void 0]},c)),{}}}),Jt={class:"listitem-thumb"},ea={key:0},ta={key:1},aa={key:1},na={key:2},la={key:3},ia={key:4},oa={class:"listitem-actions"},sa={class:"text-h5",style:{padding:"10px"}},ra={style:{height:"50px",display:"flex","align-items":"center"}},ua=["src"],da={style:{height:"50px",display:"flex","align-items":"center"}},ca=["src"],ma={key:0,style:{height:"50px",display:"flex","align-items":"center"}},va={key:1,style:{height:"50px",display:"flex","align-items":"center"}},pa={key:1,class:"mediadetails-time text-caption"},ya={key:0,style:{width:"100%",height:"5px","padding-bottom":"20px","margin-top":"-10px"}},fa={class:"mediacontrols"},ga={key:0,class:"mediacontrols-left"},ha={key:0},_a={key:1},ba={class:"text-subtitle-1"},ka=F({__name:"PlayerOSD",setup(t){const d=Ie(),c=P(),s=P(!1),n=C(()=>{if(b.selectedPlayer)return A.queues[b.selectedPlayer.active_queue]}),a=C(()=>{if(n.value)return n.value.current_item}),i=C(()=>a.value?Ve(y.value):"0:00"),o=C(()=>{if(!a.value)return"0:00";const m=a.value.duration;return Ve(m)}),r=C(()=>{var m,p;return(p=(m=n.value)==null?void 0:m.current_item)==null?void 0:p.streamdetails}),y=C(()=>n.value?n.value.elapsed_time:0),g=function(m){d.push({name:m.media_type,params:{itemId:m.item_id,provider:m.provider}})};return j(()=>{var m;return(m=a.value)==null?void 0:m.queue_item_id},async()=>{var m;(m=a.value)!=null&&m.media_item&&(c.value=await Te(a.value.media_item,Ce.FANART)||await Te(a.value.media_item,Ce.THUMB))}),j(()=>b.selectedPlayer,m=>{var p,_,R,$;if(m)localStorage.setItem("mass.LastPlayerId",m.player_id);else{const N=localStorage.getItem("mass.LastPlayerId");if(N&&N in A.players){b.selectedPlayer=A.players[N];return}if(((p=A)==null?void 0:p.players)&&!b.selectedPlayer){for(const E in(_=A)==null?void 0:_.players){const B=A.players[E];if(B.state==Ae.PLAYING){b.selectedPlayer=B;return}}for(const E in(R=A)==null?void 0:R.queues){const B=A.players[E];if(B.elapsed_time){b.selectedPlayer=B;return}}for(const E in($=A)==null?void 0:$.queues){b.selectedPlayer=A.players[E];return}}}},{immediate:!0}),(m,p)=>(v(),T(Kt,{bottom:"",fixed:"",class:"d-flex flex-column",style:{width:"100%","border-top-style":"ridge"},elevation:"5",app:""},{default:u(()=>{var _,R,$,N,E,B,D,H,x;return[l(X),l(ce,{class:"bg-image",width:"100%",cover:"",src:c.value,gradient:m.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.80), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65)",style:{position:"absolute","background-size":"100%",padding:"0","margin-top":"-10px"}},null,8,["src","gradient"]),l(U,{style:{height:"60px",width:"100%","margin-top":"-5px","padding-bottom":"30px","padding-top":"5px"},lines:"two"},{prepend:u(()=>[V("div",Jt,[e(a)?(v(),T(kt,{key:0,item:e(a).media_item||e(a),size:50,style:{cursor:"pointer"},onClick:p[0]||(p[0]=f=>{var h;return(h=e(a))!=null&&h.media_item?g(e(a).media_item):""})},null,8,["item"])):(v(),T(ce,{key:1,height:"50",src:e($t),style:{opacity:"50%"}},null,8,["src"]))])]),title:u(()=>[e(a)&&e(a).media_item?(v(),w("span",{key:0,style:{cursor:"pointer"},onClick:p[1]||(p[1]=f=>{var h;return(h=e(a))!=null&&h.media_item?g(e(a).media_item):""})},[O(k(e(a).media_item.name)+" ",1),"version"in e(a).media_item&&e(a).media_item.version?(v(),w("span",ea,"("+k(e(a).media_item.version)+")",1)):S("",!0)])):e(a)?(v(),w("span",ta,k(e(a).name),1)):S("",!0)]),subtitle:u(()=>{var f,h,I,W,z,ae,ne;return[e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)==e(de).TRACK&&"album"in e(a).media_item&&e(a).media_item.album?(v(),w("div",{key:0,style:{cursor:"pointer"},onClick:p[2]||(p[2]=_e=>{var le;return(le=e(a))!=null&&le.media_item?g(e(a).media_item):""})},k(e(wt)(e(a).media_item.artists))+" \u2022 "+k(e(a).media_item.album.name),1)):e(a)&&e(a).media_item&&"artists"in e(a).media_item&&e(a).media_item.artists.length>0?(v(),w("div",aa,k(e(a).media_item.artists[0].name),1)):(I=(h=e(a))==null?void 0:h.streamdetails)!=null&&I.stream_title?(v(),w("div",na,k((z=(W=e(a))==null?void 0:W.streamdetails)==null?void 0:z.stream_title),1)):e(a)&&((ae=e(a).media_item)==null?void 0:ae.metadata.description)?(v(),w("div",la,k(e(a).media_item.metadata.description),1)):e(a)?S("",!0):(v(),w("div",ia,k((ne=e(n))==null?void 0:ne.display_name),1))]}),append:u(()=>{var f;return[V("div",oa,[e(r)?(v(),T(se,{key:0,location:"bottom end"},{activator:u(({props:h})=>[l(ce,Y({contain:"",src:e(r).bit_depth>16?e(Rt):e(Se)(e(r).content_type),height:"25",style:m.$vuetify.theme.current.dark?"":"filter: invert(100%)",class:"v-list-item-subtitle mediadetails-streamdetails"},h),null,16,["src","style"])]),default:u(()=>[l($e,{class:"mx-auto",width:"300"},{default:u(()=>[l(ee,{style:{overflow:"hidden"}},{default:u(()=>[V("span",sa,k(m.$t("stream_details")),1),l(X),V("div",ra,[V("img",{height:"30",width:"50",center:"",src:e(Pt)(e(r).provider),style:{"object-fit":"contain"}},null,8,ua),O(" "+k(m.$t("providers."+e(r).provider)),1)]),V("div",da,[V("img",{height:"30",width:"50",src:e(Se)(e(r).content_type),style:Z(m.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,ca),O(" "+k(e(r).sample_rate/1e3)+" kHz / "+k(e(r).bit_depth)+" bits ",1)]),e(n)&&e(n).crossfade_enabled?(v(),w("div",ma,[V("img",{height:"30",width:"50",contain:"",src:Ht,style:Z(m.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),O(" "+k(m.$t("crossfade_enabled")),1)])):S("",!0),e(r).gain_correct?(v(),w("div",va,[V("img",{height:"30",width:"50",contain:"",src:Ut,style:Z(m.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),O(" "+k(e(r).gain_correct)+" dB ",1)])):S("",!0)]),_:1})]),_:1})]),_:1})):S("",!0),!m.$vuetify.display.mobile&&e(r)&&e(a)&&((f=e(a).media_item)==null?void 0:f.media_type)!==e(de).RADIO?(v(),w("div",pa,k(e(i))+" / "+k(e(o)),1)):S("",!0)])]}),_:1}),e(a)?(v(),w("div",ya,[l(ve,{"model-value":e(y),height:"3",color:"primary",min:0,max:e(a).duration,"thumb-size":4,style:{"margin-left":"0","margin-right":"0"},disabled:!e(a)||((_=e(a).media_item)==null?void 0:_.media_type)!=e(de).TRACK,"onUpdate:modelValue":p[3]||(p[3]=f=>{var h;return e(A).queueCommandSeek(((h=e(n))==null?void 0:h.queue_id)||"",Math.round(f))})},null,8,["model-value","max","disabled"])])):S("",!0),V("div",fa,[e(n)&&e(n).available?(v(),w("div",ga,[l(M,{small:"",icon:"",variant:"plain",disabled:!e(n)||!((R=e(n))!=null&&R.active)||(($=e(n))==null?void 0:$.items)==0,onClick:p[4]||(p[4]=f=>e(A).queueCommandPrevious(e(n).queue_id))},{default:u(()=>[l(L,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),e(n)&&((N=e(n))==null?void 0:N.active)?(v(),T(M,{key:0,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((E=e(n))==null?void 0:E.items)==0,onClick:p[5]||(p[5]=f=>e(A).queueCommandPlayPause(e(n).queue_id))},{default:u(()=>[l(L,{size:"50"},{default:u(()=>{var f;return[O(k(((f=e(n))==null?void 0:f.state)=="playing"?"mdi-pause":"mdi-play"),1)]}),_:1})]),_:1},8,["disabled"])):((B=e(b).selectedPlayer)==null?void 0:B.state)==e(Ae).PLAYING?(v(),T(M,{key:1,icon:"","x-large":"",variant:"plain",onClick:p[6]||(p[6]=f=>e(A).queueCommandStop(e(n).queue_id))},{default:u(()=>[l(L,{size:"50"},{default:u(()=>[O(" mdi-stop ")]),_:1})]),_:1})):(v(),T(M,{key:2,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((D=e(n))==null?void 0:D.items)==0,onClick:p[7]||(p[7]=f=>e(A).queueCommandPlay(e(n).queue_id))},{default:u(()=>[l(L,{size:"50"},{default:u(()=>[O(" mdi-play ")]),_:1})]),_:1},8,["disabled"])),l(M,{icon:"",small:"",variant:"plain",disabled:!e(n)||!((H=e(n))!=null&&H.active)||((x=e(n))==null?void 0:x.items)==0,onClick:p[8]||(p[8]=f=>e(A).queueCommandNext(e(n).queue_id))},{default:u(()=>[l(L,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])):S("",!0),l(M,{icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"80",onClick:p[9]||(p[9]=f=>e(b).showPlayersMenu=!0)},{default:u(()=>[l(L,{icon:"mdi-speaker"}),e(n)?(v(),w("div",ha,k(e(he)(e(A).players[e(n).queue_id])),1)):S("",!0)]),_:1}),!m.$vuetify.display.mobile&&e(n)?(v(),w("div",_a,[l(se,{modelValue:s.value,"onUpdate:modelValue":p[11]||(p[11]=f=>s.value=f),location:"bottom end","close-on-content-click":!1},{activator:u(({props:f})=>[l(M,Y({icon:"",variant:"plain"},f,{class:"mediacontrols-right",height:"50",width:"70"}),{default:u(()=>{var h;return[l(L,{icon:"mdi-volume-high"}),V("div",null,k(Math.round(((h=e(b).selectedPlayer)==null?void 0:h.group_volume)||0)),1)]}),_:2},1040)]),default:u(()=>[l($e,{"min-width":"300"},{default:u(()=>[l(ee,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[l(U,{density:"compact"},{prepend:u(()=>[l(L,{size:"50",icon:e(b).selectedPlayer.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>{var f;return[V("div",ba,[V("b",null,k((f=e(b).selectedPlayer)==null?void 0:f.display_name.substring(0,25)),1)])]}),subtitle:u(()=>{var f,h;return[(v(),w("div",{key:(f=e(b).selectedPlayer)==null?void 0:f.state,class:"text-body-2",style:{"line-height":"1em"}},k(m.$t("state."+((h=e(b).selectedPlayer)==null?void 0:h.state))),1))]}),default:u(()=>[l(M,{variant:"plain",style:{position:"absolute",right:"0px",top:"0px"},icon:"mdi-close",dark:"",onClick:p[10]||(p[10]=f=>s.value=!s.value)})]),_:1}),l(X),e(b).selectedPlayer?(v(),T(Ye,{key:0,player:e(b).selectedPlayer},null,8,["player"])):S("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):S("",!0),e(n)?(v(),T(M,{key:2,text:"",icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"70",onClick:p[12]||(p[12]=f=>m.$router.push("/playerqueue/"))},{default:u(()=>[l(L,{icon:"mdi-playlist-music"}),V("div",null,k(m.$t("queue")),1)]),_:1})):S("",!0)])]}),_:1}))}});const wa=Bt(ka,[["__scopeId","data-v-bb840423"]]);function Aa(t){let{rootEl:d,isSticky:c,layoutItemStyles:s}=t;const n=P(!1),a=P(0),i=C(()=>{const y=typeof n.value=="boolean"?"top":n.value;return[c.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[y]:ie(a.value)}:{top:s.value.top}]});re(()=>{j(c,y=>{y?window.addEventListener("scroll",r,{passive:!0}):window.removeEventListener("scroll",r)},{immediate:!0})}),Ee(()=>{document.removeEventListener("scroll",r)});let o=0;function r(){var R;const y=o>window.scrollY?"up":"down",g=d.value.getBoundingClientRect(),m=parseFloat((R=s.value.top)!=null?R:0),p=window.scrollY-Math.max(0,a.value-m),_=g.height+Math.max(a.value,m)-window.scrollY-window.innerHeight;g.height<window.innerHeight-m?(n.value="top",a.value=m):y==="up"&&n.value==="bottom"||y==="down"&&n.value==="top"?(a.value=window.scrollY+g.top,n.value=!0):y==="down"&&_<=0?(a.value=0,n.value="bottom"):y==="up"&&p<=0&&(a.value=g.top+p,n.value="top"),o=window.scrollY}return{isStuck:n,stickyStyles:i}}const Ca=100,xa=20;function Re(t){const d=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*d}function Pe(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let d=0;for(let c=t.length-1;c>0;c--){if(t[c].t===t[c-1].t)continue;const s=Re(d),n=(t[c].d-t[c-1].d)/(t[c].t-t[c-1].t);d+=(n-s)*Math.abs(n),c===t.length-1&&(d*=.5)}return Re(d)*1e3}function Va(){const t={};function d(n){Array.from(n.changedTouches).forEach(a=>{var o;((o=t[a.identifier])!=null?o:t[a.identifier]=new et(xa)).push([n.timeStamp,a])})}function c(n){Array.from(n.changedTouches).forEach(a=>{delete t[a.identifier]})}function s(n){var a;const i=(a=t[n])==null?void 0:a.values().reverse();if(!i)throw new Error(`No samples for touch id ${n}`);const o=i[0],r=[],y=[];for(const g of i){if(o[0]-g[0]>Ca)break;r.push({t:g[0],d:g[1].clientX}),y.push({t:g[0],d:g[1].clientY})}return{x:Pe(r),y:Pe(y),get direction(){const{x:g,y:m}=this,[p,_]=[Math.abs(g),Math.abs(m)];return p>_&&g>=0?"right":p>_&&g<=0?"left":_>p&&m>=0?"down":_>p&&m<=0?"up":Ta()}}}return{addMovement:d,endTouch:c,getVelocity:s}}function Ta(){throw new Error}function Sa(t){let{isActive:d,isTemporary:c,width:s,touchless:n,position:a}=t;re(()=>{window.addEventListener("touchstart",E,{passive:!0}),window.addEventListener("touchmove",B,{passive:!1}),window.addEventListener("touchend",D,{passive:!0})}),Ee(()=>{window.removeEventListener("touchstart",E),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",D)});const i=C(()=>a.value!=="bottom"),{addMovement:o,endTouch:r,getVelocity:y}=Va();let g=!1;const m=P(!1),p=P(0),_=P(0);let R;function $(x,f){return(a.value==="left"?x:a.value==="right"?document.documentElement.clientWidth-x:a.value==="bottom"?document.documentElement.clientHeight-x:Q())-(f?s.value:0)}function N(x){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const h=a.value==="left"?(x-_.value)/s.value:a.value==="right"?(document.documentElement.clientWidth-x-_.value)/s.value:a.value==="bottom"?(document.documentElement.clientHeight-x-_.value)/s.value:Q();return f?Math.max(0,Math.min(1,h)):h}function E(x){if(n.value)return;const f=x.changedTouches[0].clientX,h=x.changedTouches[0].clientY,I=25,W=a.value==="left"?f<I:a.value==="right"?f>document.documentElement.clientWidth-I:a.value==="bottom"?h>document.documentElement.clientHeight-I:Q(),z=d.value&&(a.value==="left"?f<s.value:a.value==="right"?f>document.documentElement.clientWidth-s.value:a.value==="bottom"?h>document.documentElement.clientHeight-s.value:Q());(W||z||d.value&&c.value)&&(g=!0,R=[f,h],_.value=$(i.value?f:h,d.value),p.value=N(i.value?f:h),r(x),o(x))}function B(x){const f=x.changedTouches[0].clientX,h=x.changedTouches[0].clientY;if(g){if(!x.cancelable){g=!1;return}const W=Math.abs(f-R[0]),z=Math.abs(h-R[1]);(i.value?W>z&&W>3:z>W&&z>3)?(m.value=!0,g=!1):(i.value?z:W)>3&&(g=!1)}if(!m.value)return;x.preventDefault(),o(x);const I=N(i.value?f:h,!1);p.value=Math.max(0,Math.min(1,I)),I>1?_.value=$(i.value?f:h,!0):I<0&&(_.value=$(i.value?f:h,!1))}function D(x){if(g=!1,!m.value)return;o(x),m.value=!1;const f=y(x.changedTouches[0].identifier),h=Math.abs(f.x),I=Math.abs(f.y);(i.value?h>I&&h>400:I>h&&I>3)?d.value=f.direction===({left:"right",right:"left",bottom:"up"}[a.value]||Q()):d.value=p.value>.5}const H=C(()=>m.value?{transform:a.value==="left"?`translateX(calc(-100% + ${p.value*s.value}px))`:a.value==="right"?`translateX(calc(100% - ${p.value*s.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${p.value*s.value}px))`:Q(),transition:"none"}:void 0);return{isDragging:m,dragProgress:p,dragStyles:H}}function Q(){throw new Error}const $a=["start","end","left","right","bottom"],Ra=te({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:Boolean,railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>$a.includes(t)},sticky:Boolean,...Ne(),...De(),...fe(),...We(),...ue({tag:"nav"}),...pe()},emits:{"update:modelValue":t=>!0},setup(t,d){let{attrs:c,slots:s}=d;const{isRtl:n}=ze(),{themeClasses:a}=ye(t),{borderClasses:i}=Oe(t),{backgroundColorClasses:o,backgroundColorStyles:r}=me(K(t,"color")),{elevationClasses:y}=qe(t),{mobile:g}=tt(),{roundedClasses:m}=He(t),p=ut(),_=Be(t,"modelValue",null,q=>!!q),{ssrBootStyles:R}=Ue(),$=P(),N=P(!1),E=C(()=>t.rail&&t.expandOnHover&&N.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),B=C(()=>dt(t.location,n.value)),D=C(()=>!t.permanent&&(g.value||t.temporary)),H=C(()=>t.sticky&&!D.value&&B.value!=="bottom");t.disableResizeWatcher||j(D,q=>!t.permanent&&at(()=>_.value=!q)),!t.disableRouteWatcher&&p&&j(p.currentRoute,()=>D.value&&(_.value=!1)),j(()=>t.permanent,q=>{q&&(_.value=!0)}),nt(()=>{t.modelValue!=null||D.value||(_.value=t.permanent||!g.value)});const{isDragging:x,dragProgress:f,dragStyles:h}=Sa({isActive:_,isTemporary:D,width:E,touchless:K(t,"touchless"),position:B}),I=C(()=>{const q=D.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):E.value;return x.value?q*f.value:q}),{layoutItemStyles:W,layoutRect:z,layoutItemScrimStyles:ae}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:B,layoutSize:I,elementSize:E,active:C(()=>_.value||x.value),disableTransitions:C(()=>x.value),absolute:C(()=>t.absolute||H.value&&typeof ne.value!="string")}),{isStuck:ne,stickyStyles:_e}=Aa({rootEl:$,isSticky:H,layoutItemStyles:W}),le=me(C(()=>typeof t.scrim=="string"?t.scrim:null)),je=C(()=>({...x.value?{opacity:f.value*.2,transition:"none"}:void 0,...z.value?{left:ie(z.value.left),right:ie(z.value.right),top:ie(z.value.top),bottom:ie(z.value.bottom)}:void 0,...ae.value}));return lt({VList:{bgColor:"transparent"}}),G(()=>{var q,be,ke,we;const Fe=s.image||t.image;return l(J,null,[l(t.tag,Y({ref:$,onMouseenter:()=>N.value=!0,onMouseleave:()=>N.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":N.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":D.value,"v-navigation-drawer--active":_.value,"v-navigation-drawer--sticky":H.value},a.value,o.value,i.value,y.value,m.value],style:[r.value,W.value,h.value,R.value,_e.value]},c),{default:()=>[Fe&&l("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?(q=s.image)==null?void 0:q.call(s,{image:t.image}):l("img",{src:t.image,alt:""},null)]),s.prepend&&l("div",{class:"v-navigation-drawer__prepend"},[(be=s.prepend)==null?void 0:be.call(s)]),l("div",{class:"v-navigation-drawer__content"},[(ke=s.default)==null?void 0:ke.call(s)]),s.append&&l("div",{class:"v-navigation-drawer__append"},[(we=s.append)==null?void 0:we.call(s)])]}),l(Me,{name:"fade-transition"},{default:()=>[D.value&&(x.value||_.value)&&!!t.scrim&&l("div",{class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[je.value,le.backgroundColorStyles.value],onClick:()=>_.value=!1},null)]})])}),{isStuck:ne}}}),Pa={class:"text-subtitle-1"},Ba=F({__name:"PlayerSelect",setup(t){const d=P(void 0),c=C(()=>{var o,r;const i=[];for(const y in(o=A)==null?void 0:o.players){const g=(r=A)==null?void 0:r.players[y];g.synced_to||i.push(g)}return i.slice().sort((y,g)=>{var m;return y.display_name.toUpperCase()>((m=g.display_name)==null?void 0:m.toUpperCase())?1:-1})});j(()=>b.showPlayersMenu,i=>{i||(d.value=void 0)});const s=P(),n=P();re(()=>{var i,o,r;s.value=(r=(o=(i=it())==null?void 0:i.vnode)==null?void 0:o.el)==null?void 0:r.getRootNode()});const a=function(i){n.value!=i&&(n.value=i,setTimeout(()=>{var r;const o=(r=s.value)==null?void 0:r.getElementById(i);o==null||o.scrollIntoView({behavior:"smooth"})},0))};return(i,o)=>(v(),T(Ra,{modelValue:e(b).showPlayersMenu,"onUpdate:modelValue":o[2]||(o[2]=r=>e(b).showPlayersMenu=r),location:"right",app:"",clipped:"",temporary:"",width:"300",style:{"z-index":"9999"}},{default:u(()=>[l(St,{class:"headline"},{default:u(()=>[V("b",null,k(i.$t("players")),1)]),_:1}),l(M,{variant:"plain",style:{position:"absolute",right:"-10px",top:"0px"},icon:"mdi-close",dark:"",text:"",onClick:o[0]||(o[0]=r=>e(b).showPlayersMenu=!e(b).showPlayersMenu)}),l(X),l(At,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),focusable:"",accordion:"",flat:""},{default:u(()=>[(v(!0),w(J,null,oe(e(c),r=>(v(),T(Ct,{id:r.player_id,key:r.player_id,disabled:!r.available,flat:""},{default:u(()=>{var y;return[l(xt,{class:"playerrow",style:Z(((y=e(b).selectedPlayer)==null?void 0:y.player_id)==r.player_id?"padding:0;background-color:rgba(50, 115, 220, 0.2);":"padding:0"),"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:g=>{e(b).selectedPlayer=r,a(r.player_id)}},{default:u(()=>[l(U,{density:"compact"},{prepend:u(()=>[l(L,{size:"50",icon:r.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>[V("div",Pa,[V("b",null,k(e(he)(r)),1)])]),subtitle:u(()=>[(v(),w("div",{key:r.state,class:"text-body-2",style:{"line-height":"1em"}},k(i.$t("state."+r.state)),1))]),_:2},1024)]),_:2},1032,["style","onClick"]),l(Vt,{variant:"contain"},{default:u(()=>[l(Ye,{player:r},null,8,["player"])]),_:2},1024)]}),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});function Ia(t={}){const{immediate:d=!1,onNeedRefresh:c,onOfflineReady:s,onRegistered:n,onRegisteredSW:a,onRegisterError:i}=t;let o,r,y,g;const m=async(_=!0)=>{await y,_&&(o==null||o.addEventListener("controlling",R=>{R.isUpdate&&window.location.reload()})),await(g==null?void 0:g())};async function p(){if("serviceWorker"in navigator){const{Workbox:_,messageSW:R}=await ot(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);g=async()=>{r&&r.waiting&&await R(r.waiting,{type:"SKIP_WAITING"})},o=new _("/sw.js",{scope:"/",type:"classic"}),o.addEventListener("activated",$=>{$.isUpdate||s==null||s()});{const $=()=>{c==null||c()};o.addEventListener("waiting",$),o.addEventListener("externalwaiting",$)}o.register({immediate:d}).then($=>{r=$,a?a("/sw.js",$):n==null||n($)}).catch($=>{i==null||i($)})}}return y=p(),m}function Ma(t={}){const{immediate:d=!0,onNeedRefresh:c,onOfflineReady:s,onRegistered:n,onRegisteredSW:a,onRegisterError:i}=t,o=P(!1),r=P(!1);return{updateServiceWorker:Ia({immediate:d,onNeedRefresh(){o.value=!0,c==null||c()},onOfflineReady(){r.value=!0,s==null||s()},onRegistered:n,onRegisteredSW:a,onRegisterError:i}),offlineReady:r,needRefresh:o}}const Ea={key:0,class:"pwa-toast",role:"alert"},za={class:"message"},La={key:0},Na={key:1},Da=F({__name:"ReloadPrompt",setup(t){const{offlineReady:d,needRefresh:c,updateServiceWorker:s}=Ma(),n=async()=>{d.value=!1,c.value=!1};return(a,i)=>e(d)||e(c)?(v(),w("div",Ea,[V("div",za,[e(d)?(v(),w("span",La," App ready to work offline ")):(v(),w("span",Na," New content available, click on reload button to update. "))]),e(c)?(v(),w("button",{key:0,onClick:i[0]||(i[0]=o=>e(s)())}," Reload ")):S("",!0),V("button",{onClick:n}," Close ")])):S("",!0)}});const Wa=te({name:"VApp",props:{...ht({fullHeight:!0}),...pe()},setup(t,d){let{slots:c}=d;const s=ye(t),{layoutClasses:n,layoutStyles:a,getLayoutItem:i,items:o,layoutRef:r}=_t(t),{rtlClasses:y}=ze();return G(()=>{var g;return l("div",{ref:r,class:["v-application",s.themeClasses.value,n.value,y.value],style:a.value},[l("div",{class:"v-application__wrap"},[(g=c.default)==null?void 0:g.call(c)])])}),{getLayoutItem:i,items:o,theme:s}}}),an=F({__name:"Default",setup(t){return(d,c)=>(v(),T(Wa,null,{default:u(()=>[l(Ba),l(Dt),e(A).state.value==e(st).CONNECTED?(v(),T(qt,{key:0})):(v(),T(mt,{key:1},{default:u(()=>[l(Le,{indeterminate:"",size:"64"})]),_:1})),l(wa),e(b).isInStandaloneMode?(v(),T(Da,{key:2})):S("",!0)]),_:1}))}});export{an as default};
