import{b as I,e as T,r as x,ab as L,q as s,a$ as F,J as R,E as z,o as l,l as p,a as i,w as a,p as n,F as A,n as M,h as b,j as d,m as f,i as k,v as h,b1 as U,b2 as j,k as V}from"./index.7fcf94ab.js";import{b as q}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.09bfb1b0.js";import{i as G,V as m,b as J}from"./VCardText.6fcdb997.js";import{b as g,a as O,V as S}from"./VTooltip.d58398b9.js";import{a as C,V as Y}from"./VBtn.db790421.js";import"./VDivider.e1e6ea8d.js";const H={class:"listitem-actions"},K={key:0,class:"listitem-action"},Q={key:1,class:"listitem-action"},W={key:2,class:"listitem-action"},X={class:"listitem-action"},oe=I({__name:"Players",setup(Z){const B=T(),c=x([]),v=L({}),N=s.subscribe_multi([F.PLAYER_CONFIG_UPDATED],()=>{P()});R(N);const P=async function(){c.value=await s.getData("config/players");const e=await s.getData("providers/available");for(const o of e)v[o.domain]=o},D=function(e){s.sendCommand("config/players/remove",{player_id:e}),c.value=c.value.filter(o=>o.player_id!=e)},$=function(e){B.push(`/settings/editplayer/${e}`)},_=function(e){var o;return e.name||((o=s.players[e.player_id])==null?void 0:o.name)||e.player_id};return z(()=>s.players,e=>{e&&P()},{immediate:!0}),(e,o)=>(l(),p("section",null,[i(G,null,{default:a(()=>[n("div",null,[(l(!0),p(A,null,M([...c.value].sort((t,u)=>_(t)>_(u)?1:-1),t=>{var u;return l(),b(m,{key:t.player_id,title:_(t),subtitle:((u=d(s).providers[t.provider])==null?void 0:u.name)||t.provider,onClick:y=>$(t.player_id)},{prepend:a(()=>[i(J,{scale:"",width:"36px",class:"listitem-thumb",src:d(q)(t.provider)},null,8,["src"])]),append:a(()=>{var y,w;return[n("div",H,[t.enabled?(y=d(s).providers[t.provider])!=null&&y.last_error?(l(),p("div",Q,[i(g,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,f(r,{color:"red"}),{default:a(()=>[k(" mdi-alert-circle ")]),_:2},1040)]),default:a(()=>{var r;return[n("span",null,h((r=d(s).providers[t.provider])==null?void 0:r.last_error),1)]}),_:2},1024)])):(w=d(s).players[t.player_id])!=null&&w.available?V("",!0):(l(),p("div",W,[i(g,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,U(j(r)),{default:a(()=>[k(" mdi-timer-sand ")]),_:2},1040)]),default:a(()=>[n("span",null,h(e.$t("settings.player_not_available")),1)]),_:1})])):(l(),p("div",K,[i(g,{location:"top end",origin:"end center"},{activator:a(({props:r})=>[i(C,f(r,{color:"grey"}),{default:a(()=>[k(" mdi-cancel ")]),_:2},1040)]),default:a(()=>[n("span",null,h(e.$t("settings.player_disabled")),1)]),_:1})])),n("div",X,[i(O,{location:"bottom end"},{activator:a(({props:r})=>[i(Y,f({color:"grey-darken-1",icon:"mdi-dots-vertical",variant:"text"},r,{size:"x-large",style:{"margin-right":"-70px"}}),null,16)]),default:a(()=>[i(S,null,{default:a(()=>{var r;return[i(m,{title:e.$t("settings.configure"),"prepend-icon":"mdi-cog",onClick:E=>$(t.player_id)},null,8,["title","onClick"]),v[t.provider].documentation?(l(),b(m,{key:0,title:e.$t("settings.documentation"),"prepend-icon":"mdi-bookshelf",href:v[t.provider].documentation,target:"_blank"},null,8,["title","href"])):V("",!0),(r=d(s).players[t.player_id])!=null&&r.available?V("",!0):(l(),b(m,{key:1,title:e.$t("settings.delete"),"prepend-icon":"mdi-delete",onClick:E=>D(t.player_id)},null,8,["title","onClick"]))]}),_:2},1024)]),_:2},1024)])])]}),_:2},1032,["title","subtitle","onClick"])}),128))])]),_:1})]))}});export{oe as default};
