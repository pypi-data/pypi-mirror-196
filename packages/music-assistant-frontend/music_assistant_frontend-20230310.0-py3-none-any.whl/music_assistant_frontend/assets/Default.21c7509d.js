import{g as Ge,r as P,u as Pe,c as C,t as K,a as l,m as Y,d as te,b as F,e as Be,f as Qe,o as y,h as T,w as u,i as N,j as e,s as b,k as S,l as A,n as oe,F as J,p as V,q as w,v as k,x as re,y as Ze,T as Ie,z as Xe,A as Ke,B as Z,P as Je,C as pe,D as fe,E as j,M as de,G as Me,I as Ae,H as ie,J as Ee,K as et,L as ze,N as tt,O as at,Q as nt,R as lt,S as it,_ as ot,U as st}from"./index.f21ba3ab.js";import{u as G,V as I,a as E,b as Le,m as ue,c as Ne,d as De,e as qe,f as me,g as We,h as Oe,i as Ue,j as rt,k as ut,t as dt}from"./VBtn.3c1b48fd.js";import{V as ee,a as se,b as ct,c as mt}from"./VTooltip.bb20df57.js";import{V as H,a as vt,b as ce}from"./VCardText.65d82b97.js";import{m as pt,f as ft,V as yt,a as Ce}from"./VToolbar.60101ce1.js";import{m as ye,u as ge,a as gt,b as ht,c as _t}from"./layout.0bf377aa.js";/* empty css              */import{g as he,t as bt,_ as kt,a as wt,f as xe,b as Ve}from"./MediaItemThumb.vue_vue_type_style_index_0_lang.5a2d1152.js";import{V as ve,a as At,b as Ct,c as xt,d as Vt}from"./VExpansionPanel.1ed4163d.js";import{V as X}from"./VDivider.39cc27aa.js";import{V as Tt,a as St}from"./VCardTitle.fdc8f943.js";import{i as $t,a as Rt,g as Te,b as Pt}from"./ProviderIcons.vue_vue_type_style_index_0_scoped_c020fdb7_lang.90104f21.js";import{V as Se}from"./VCard.79d84d89.js";import{_ as Bt}from"./_plugin-vue_export-helper.cdc0426e.js";import"./VLabel.375ab42b.js";const It=Ge()({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...pt(),...ye(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,d){let{slots:v}=d;const r=P(),n=Pe(t,"modelValue"),a=C(()=>{var c,p;var f,o;const s=(c=(f=r.value)==null?void 0:f.contentHeight)!=null?c:0,i=(p=(o=r.value)==null?void 0:o.extensionHeight)!=null?p:0;return s+i}),{layoutItemStyles:m}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:K(t,"location"),layoutSize:a,elementSize:a,active:n,absolute:K(t,"absolute")});return G(()=>{const[f]=ft(t);return l(yt,Y({ref:r,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"}],style:{...m.value,height:void 0}},f),v)}),{}}}),Mt=te({name:"VAppBarTitle",props:{...Ce.props},setup(t,d){let{slots:v}=d;return G(()=>l(Ce,{class:"v-app-bar-title"},v)),{}}}),Et={key:0,style:{opacity:"0.5"}},zt={class:"listitem-actions"},Lt={key:0},Nt={key:1},Dt=F({__name:"AppBar",setup(t){const d=Be();P(!1);const{t:v}=Qe(),r=[{label:"artists",icon:"mdi-account-music",path:"/artists"},{label:"albums",icon:"mdi-album",path:"/albums"},{label:"tracks",icon:"mdi-file-music",path:"/tracks"},{label:"radios",icon:"mdi-radio",path:"/radios"},{label:"playlists",icon:"mdi-playlist-music",path:"/playlists"},{label:"browse",icon:"mdi-folder",path:"/browse"},{label:"settings.settings",icon:"mdi-cog",path:"/settings"}],n=C(()=>{if(d.currentRoute.value.name=="home")return{mainTitle:v("mass"),subTitle:v("home")};if(d.currentRoute.value.path.includes("settings"))return{mainTitle:v("mass"),subTitle:v("settings.settings")};if(d.currentRoute.value.name!="home"&&!b.topBarTitle)return{mainTitle:v("mass"),mainLink:()=>{d.push({name:"home"})},subTitle:v(d.currentRoute.value.name.toString())};if(d.currentRoute.value.name!="home"&&b.topBarTitle){if(a.value&&d.currentRoute.value.path.includes(a.value.path))return{mainTitle:v(a.value.name.replace("home","mass")),mainLink:()=>{m()},subTitle:b.topBarTitle};const f=d.currentRoute.value.path.split("/")[1];return{mainTitle:v(f),mainLink:()=>{d.push(`/${f}`)},subTitle:b.topBarTitle}}return d.currentRoute.value?{mainTitle:v(d.currentRoute.value.name.toString())}:{mainTitle:v("mass")}}),a=C(()=>{if(b.prevRoutes.length>0)return b.prevRoutes[b.prevRoutes.length-1]}),m=function(){const f=b.prevRoutes.pop();f&&(f.params.backnav="true",d.replace(f).then(()=>{setTimeout(()=>{window.scrollTo(0,f.meta.scrollPos||0)},400)}))};return(f,o)=>(y(),T(It,{color:"grey-darken-3",density:"compact",style:{height:"56px"},elevation:2},{prepend:u(()=>[l(se,{location:"bottom end"},{activator:u(({props:s})=>[l(I,Y({style:{"margin-left":"-8px","margin-right":"-20px"}},s,{variant:"plain"}),{default:u(()=>[l(E,{size:"40"},{default:u(()=>[N(" mdi-playlist-play ")]),_:1})]),_:2},1040)]),default:u(()=>[l(ee,null,{default:u(()=>[e(b).prevRoutes.length>0?(y(),T(H,{key:0,title:f.$t("page_back"),"prepend-icon":"mdi-arrow-left",onClick:o[0]||(o[0]=s=>m())},null,8,["title"])):S("",!0),e(d).currentRoute.value.name!="home"?(y(),T(H,{key:1,title:f.$t("home"),"prepend-icon":"mdi-home",onClick:o[1]||(o[1]=s=>e(d).push({name:"home"}))},null,8,["title"])):S("",!0),(y(),A(J,null,oe(r,s=>l(H,{key:s.path,title:f.$t(s.label),"prepend-icon":s.icon,onClick:i=>e(d).push(s.path)},null,8,["title","prepend-icon","onClick"])),64))]),_:1})]),_:1})]),append:u(()=>[V("div",zt,[l(ct,{location:"top end",origin:"end center"},{activator:u(({props:s})=>[e(w).syncTasks.value.length>0||e(w).fetchesInProgress.value.length>0?(y(),T(Le,Y({key:0,indeterminate:""},s),null,16)):S("",!0)]),default:u(()=>[e(w).syncTasks.value.length>0?(y(),A("span",Lt,k(f.$t("sync_running")),1)):(y(),A("span",Nt,k(f.$t("loading")),1))]),_:1}),l(se,{location:"bottom end"},{activator:u(({props:s})=>[e(b).topBarContextMenuItems.length>0?(y(),T(I,Y({key:0,icon:"mdi-dots-vertical",style:{"margin-right":"-6px"}},s,{variant:"plain"}),null,16)):S("",!0)]),default:u(()=>[l(ee,null,{default:u(()=>[(y(!0),A(J,null,oe(e(b).topBarContextMenuItems,(s,i)=>(y(),T(H,{key:i,title:f.$t(s.label,s.labelArgs),onClick:c=>s.action?s.action():""},{prepend:u(()=>[l(vt,{icon:s.icon},null,8,["icon"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})])]),default:u(()=>[l(Mt,null,{default:u(()=>[V("span",{style:{cursor:"pointer"},onClick:o[2]||(o[2]=(...s)=>e(n).mainLink&&e(n).mainLink(...s))},k(e(n).mainTitle),1),e(n).subTitle?(y(),A("span",Et," | "+k(e(n).subTitle),1)):S("",!0)]),_:1})]),_:1}))}});const qt=te({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...ue()},setup(t,d){let{slots:v}=d;return G(()=>l(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},v)),{}}});function He(){const t=P(!1);return re(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:C(()=>t.value?void 0:{transition:"none !important"}),isBooted:Ze(t)}}const Wt=te({name:"VMain",props:{scrollable:Boolean,...ue({tag:"main"})},setup(t,d){let{slots:v}=d;const{mainStyles:r}=gt(),{ssrBootStyles:n}=He();return G(()=>{var a,m;return l(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[r.value,n.value]},{default:()=>[t.scrollable?l("div",{class:"v-main__scroller"},[(a=v.default)==null?void 0:a.call(v)]):(m=v.default)==null?void 0:m.call(v)]})}),{}}}),Ot=F({__name:"View",setup(t){return(d,v)=>{const r=Ke("router-view");return y(),T(Wt,{id:"cont"},{default:u(()=>[l(qt,{fluid:"",style:{padding:"0"}},{default:u(()=>[l(r,{app:""},{default:u(({Component:n})=>[l(Ie,{name:"fade",mode:"out-in"},{default:u(()=>[(y(),T(Xe(n)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),Ut=""+new URL("crossfade.ba51f69a.png",import.meta.url).href,Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAnElEQVRYw+2UwQ6AMAhDwfjh+OXzZrgslqxjW8K7GWdtRqlIUYyh/qG1Zt8LVYuKzTDUnCGNy41zrfhpGRrhZgn5/HmiWdzuhsrQH7QMicjDENmuGKEbQjaotiwLaGSZeUIzZB2jhnwfAdqyzFAze+gXxPSZxcgaB6JDa+rUDLG2DNFJ3TLkzDlN3bveGWc83ZFlctTIKOVWFCt5AYSDaENMYFhMAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTE1VDEzOjExOjE0KzAwOjAwADepDgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0xNVQxMzoxMToxNCswMDowMHFqEbIAAAAASUVORK5CYII=",Yt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},jt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ft={class:"text-body-2"},Gt={class:"text-body-2",style:{position:"absolute","margin-top":"3px"}},Qt={key:0,class:"syncbtn"},Zt={key:1,class:"syncbtn"},Xt={class:"text-caption",style:{position:"absolute",width:"60px","text-align":"center","margin-left":"0px"}},Ye=F({__name:"VolumeControl",props:{player:null},setup(t){const d=function(r){var a;const n=[];r.type!=Je.GROUP&&n.push(r);for(const m of r.group_childs){const f=(a=w)==null?void 0:a.players[m];f&&f.available&&n.push(f)}return n.sort((m,f)=>m.display_name.toUpperCase()>f.display_name.toUpperCase()?1:-1),n},v=function(r,n){for(const a of d(r))for(const m of d(r))w.sendCommand("players/cmd/power",{player_id:m.player_id,powered:n})};return(r,n)=>(y(),T(ee,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[t.player.group_childs.length>0?(y(),A("div",{key:0,class:"volumerow",style:Z(t.player.powered?"opacity: 0.75":"opacity: 0.5")},[l(I,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:n[0]||(n[0]=a=>v(t.player,!t.player.powered))},{default:u(()=>[l(E,{icon:"mdi-power"})]),_:1}),V("span",Yt,k(e(he)(t.player,30)),1),V("div",jt,k(t.player.group_volume),1),l(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!t.player.powered,"model-value":Math.round(t.player.group_volume),style:{"margin-left":"5px"},"onUpdate:modelValue":n[1]||(n[1]=a=>e(w).playerCommandGroupVolume(t.player.player_id,a))},null,8,["disabled","model-value"])],4)):S("",!0),t.player.group_childs.length>0?(y(),T(X,{key:1,style:{"margin-top":"10px","margin-bottom":"10px"}})):S("",!0),(y(!0),A(J,null,oe(d(t.player),a=>(y(),A("div",{key:a.player_id,class:"volumerow",style:Z(a.powered?"opacity: 0.75":"opacity: 0.5")},[V("span",Ft,[l(I,{icon:"",variant:"plain",width:"60",height:"30",size:"x-large",onClick:m=>e(w).playerCommandPowerToggle(a.player_id)},{default:u(()=>[l(E,{icon:"mdi-power"})]),_:2},1032,["onClick"]),V("span",Gt,k(e(bt)(a.display_name,27)),1),!a.synced_to&&!a.group_childs.length&&Object.values(e(w).players).filter(m=>!m.synced_to&&m.can_sync_with.includes(a.player_id)).length>0?(y(),A("div",Qt,[l(se,{location:"bottom end",style:{"z-index":"999999"}},{activator:u(({props:m})=>[l(I,Y({icon:""},m,{variant:"plain"}),{default:u(()=>[l(E,null,{default:u(()=>[N("mdi-link-variant")]),_:1})]),_:2},1040)]),default:u(()=>[l(ee,null,{default:u(()=>[l(Tt,null,{default:u(()=>[N(k(r.$t("sync_player_to")),1)]),_:1}),(y(!0),A(J,null,oe(Object.values(e(w).players).filter(m=>!m.synced_to&&m.can_sync_with.includes(a.player_id)),m=>(y(),T(H,{key:m.player_id,title:m.display_name,onClick:f=>e(w).playerCommandSync(a.player_id,m.player_id)},null,8,["title","onClick"]))),128)),l(X)]),_:2},1024)]),_:2},1024)])):S("",!0),a.synced_to?(y(),A("div",Zt,[l(I,{icon:"",variant:"plain",onClick:m=>e(w).playerCommandUnSync(a.player_id)},{default:u(()=>[l(E,null,{default:u(()=>[N("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):S("",!0)]),V("div",Xt,k(a.volume_level),1),l(ve,{lazy:"",density:"compact",step:"2","track-size":"2","thumb-size":"10","thumb-label":"",disabled:!a.powered,"model-value":Math.round(a.volume_level),style:{"margin-left":"5px"},"onUpdate:modelValue":m=>e(w).playerCommandVolumeSet(a.player_id,m)},null,8,["disabled","model-value","onUpdate:modelValue"])],4))),128))]),_:1}))}});const Kt=te({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ne(),...De(),...ye(),...qe(),...ue({tag:"footer"}),...pe()},setup(t,d){let{slots:v}=d;const{themeClasses:r}=fe(t),{backgroundColorClasses:n,backgroundColorStyles:a}=me(K(t,"color")),{borderClasses:m}=We(t),{elevationClasses:f}=Oe(t),{roundedClasses:o}=Ue(t),s=P(32),{resizeRef:i}=rt(h=>{!h.length||(s.value=h[0].target.clientHeight)}),c=C(()=>t.height==="auto"?s.value:parseInt(t.height,10)),{layoutItemStyles:p}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:C(()=>"bottom"),layoutSize:c,elementSize:C(()=>t.height==="auto"?void 0:c.value),active:C(()=>t.app),absolute:K(t,"absolute")});return G(()=>l(t.tag,{ref:i,class:["v-footer",r.value,n.value,m.value,f.value,o.value],style:[a.value,t.app?p.value:void 0]},v)),{}}}),Jt={class:"listitem-thumb"},ea={key:0},ta={key:1},aa={key:1},na={key:2},la={key:3},ia={key:4},oa={class:"listitem-actions"},sa={class:"text-h5",style:{padding:"10px"}},ra={style:{height:"50px",display:"flex","align-items":"center"}},ua=["src"],da={style:{height:"50px",display:"flex","align-items":"center"}},ca=["src"],ma={key:0,style:{height:"50px",display:"flex","align-items":"center"}},va={key:1,style:{height:"50px",display:"flex","align-items":"center"}},pa={key:1,class:"mediadetails-time text-caption"},fa={key:0,style:{width:"100%",height:"5px","padding-bottom":"20px","margin-top":"-10px"}},ya={class:"mediacontrols"},ga={key:0,class:"mediacontrols-left"},ha={key:0},_a={key:1},ba={class:"text-subtitle-1"},ka=F({__name:"PlayerOSD",setup(t){const d=Be(),v=P(),r=P(!1),n=C(()=>{if(b.selectedPlayer)return w.queues[b.selectedPlayer.active_queue]}),a=C(()=>{if(n.value)return n.value.current_item}),m=C(()=>a.value?xe(s.value):"0:00"),f=C(()=>{if(!a.value)return"0:00";const c=a.value.duration;return xe(c)}),o=C(()=>{var c,p;return(p=(c=n.value)==null?void 0:c.current_item)==null?void 0:p.streamdetails}),s=C(()=>n.value?n.value.elapsed_time:0),i=function(c){d.push({name:c.media_type,params:{itemId:c.item_id,provider:c.provider}})};return j(()=>{var c;return(c=a.value)==null?void 0:c.queue_item_id},async()=>{var c;(c=a.value)!=null&&c.media_item&&(v.value=await Ve(a.value.media_item,Ae.FANART)||await Ve(a.value.media_item,Ae.THUMB))}),(c,p)=>(y(),T(Kt,{bottom:"",fixed:"",class:"d-flex flex-column",style:{width:"100%","border-top-style":"ridge"},elevation:"5",app:""},{default:u(()=>{var h,R,$,q,O,W,z,U,x;return[l(X),l(ce,{class:"bg-image",width:"100%",cover:"",src:v.value,gradient:c.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.80), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65)",style:{position:"absolute","background-size":"100%",padding:"0","margin-top":"-10px"}},null,8,["src","gradient"]),l(H,{style:{height:"60px",width:"100%","margin-top":"-5px","padding-bottom":"30px","padding-top":"5px"},lines:"two"},{prepend:u(()=>[V("div",Jt,[e(a)?(y(),T(kt,{key:0,item:e(a).media_item||e(a),size:50,style:{cursor:"pointer"},onClick:p[0]||(p[0]=g=>{var _;return(_=e(a))!=null&&_.media_item?i(e(a).media_item):""})},null,8,["item"])):(y(),T(ce,{key:1,height:"50",src:e($t),style:{opacity:"50%"}},null,8,["src"]))])]),title:u(()=>[e(a)&&e(a).media_item?(y(),A("span",{key:0,style:{cursor:"pointer"},onClick:p[1]||(p[1]=g=>{var _;return(_=e(a))!=null&&_.media_item?i(e(a).media_item):""})},[N(k(e(a).media_item.name)+" ",1),"version"in e(a).media_item&&e(a).media_item.version?(y(),A("span",ea,"("+k(e(a).media_item.version)+")",1)):S("",!0)])):e(a)?(y(),A("span",ta,k(e(a).name),1)):S("",!0)]),subtitle:u(()=>{var g,_,B,L,M,ae,ne;return[e(a)&&((g=e(a).media_item)==null?void 0:g.media_type)==e(de).TRACK&&"album"in e(a).media_item&&e(a).media_item.album?(y(),A("div",{key:0,style:{cursor:"pointer"},onClick:p[2]||(p[2]=_e=>{var le;return(le=e(a))!=null&&le.media_item?i(e(a).media_item):""})},k(e(wt)(e(a).media_item.artists))+" \u2022 "+k(e(a).media_item.album.name),1)):e(a)&&e(a).media_item&&"artists"in e(a).media_item&&e(a).media_item.artists.length>0?(y(),A("div",aa,k(e(a).media_item.artists[0].name),1)):(B=(_=e(a))==null?void 0:_.streamdetails)!=null&&B.stream_title?(y(),A("div",na,k((M=(L=e(a))==null?void 0:L.streamdetails)==null?void 0:M.stream_title),1)):e(a)&&((ae=e(a).media_item)==null?void 0:ae.metadata.description)?(y(),A("div",la,k(e(a).media_item.metadata.description),1)):e(a)?S("",!0):(y(),A("div",ia,k((ne=e(n))==null?void 0:ne.display_name),1))]}),append:u(()=>{var g;return[V("div",oa,[e(o)?(y(),T(se,{key:0,location:"bottom end"},{activator:u(({props:_})=>[l(ce,Y({contain:"",src:e(o).bit_depth>16?e(Rt):e(Te)(e(o).content_type),height:"25",style:c.$vuetify.theme.current.dark?"":"filter: invert(100%)",class:"v-list-item-subtitle mediadetails-streamdetails"},_),null,16,["src","style"])]),default:u(()=>[l(Se,{class:"mx-auto",width:"300"},{default:u(()=>[l(ee,{style:{overflow:"hidden"}},{default:u(()=>[V("span",sa,k(c.$t("stream_details")),1),l(X),V("div",ra,[V("img",{height:"30",width:"50",center:"",src:e(Pt)(e(o).provider),style:{"object-fit":"contain"}},null,8,ua),N(" "+k(c.$t("providers."+e(o).provider)),1)]),V("div",da,[V("img",{height:"30",width:"50",src:e(Te)(e(o).content_type),style:Z(c.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,12,ca),N(" "+k(e(o).sample_rate/1e3)+" kHz / "+k(e(o).bit_depth)+" bits ",1)]),e(n)&&e(n).crossfade_enabled?(y(),A("div",ma,[V("img",{height:"30",width:"50",contain:"",src:Ut,style:Z(c.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),N(" "+k(c.$t("crossfade_enabled")),1)])):S("",!0),e(o).gain_correct?(y(),A("div",va,[V("img",{height:"30",width:"50",contain:"",src:Ht,style:Z(c.$vuetify.theme.current.dark?"object-fit: contain;":"object-fit: contain;filter: invert(100%);")},null,4),N(" "+k(e(o).gain_correct)+" dB ",1)])):S("",!0)]),_:1})]),_:1})]),_:1})):S("",!0),!c.$vuetify.display.mobile&&e(o)&&e(a)&&((g=e(a).media_item)==null?void 0:g.media_type)!==e(de).RADIO?(y(),A("div",pa,k(e(m))+" / "+k(e(f)),1)):S("",!0)])]}),_:1}),e(a)?(y(),A("div",fa,[l(ve,{"model-value":e(s),height:"3",color:"primary",min:0,max:e(a).duration,"thumb-size":4,style:{"margin-left":"0","margin-right":"0"},disabled:!e(a)||((h=e(a).media_item)==null?void 0:h.media_type)!=e(de).TRACK,"onUpdate:modelValue":p[3]||(p[3]=g=>{var _;return e(w).queueCommandSeek(((_=e(n))==null?void 0:_.queue_id)||"",Math.round(g))})},null,8,["model-value","max","disabled"])])):S("",!0),V("div",ya,[e(n)&&e(n).available?(y(),A("div",ga,[l(I,{small:"",icon:"",variant:"plain",disabled:!e(n)||!((R=e(n))!=null&&R.active)||(($=e(n))==null?void 0:$.items)==0,onClick:p[4]||(p[4]=g=>e(w).queueCommandPrevious(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),e(n)&&((q=e(n))==null?void 0:q.active)?(y(),T(I,{key:0,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((O=e(n))==null?void 0:O.items)==0,onClick:p[5]||(p[5]=g=>e(w).queueCommandPlayPause(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>{var g;return[N(k(((g=e(n))==null?void 0:g.state)=="playing"?"mdi-pause":"mdi-play"),1)]}),_:1})]),_:1},8,["disabled"])):((W=e(b).selectedPlayer)==null?void 0:W.state)==e(Me).PLAYING?(y(),T(I,{key:1,icon:"","x-large":"",variant:"plain",onClick:p[6]||(p[6]=g=>e(w).queueCommandStop(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[N(" mdi-stop ")]),_:1})]),_:1})):(y(),T(I,{key:2,icon:"","x-large":"",variant:"plain",disabled:e(n)&&((z=e(n))==null?void 0:z.items)==0,onClick:p[7]||(p[7]=g=>e(w).queueCommandPlay(e(n).queue_id))},{default:u(()=>[l(E,{size:"50"},{default:u(()=>[N(" mdi-play ")]),_:1})]),_:1},8,["disabled"])),l(I,{icon:"",small:"",variant:"plain",disabled:!e(n)||!((U=e(n))!=null&&U.active)||((x=e(n))==null?void 0:x.items)==0,onClick:p[8]||(p[8]=g=>e(w).queueCommandNext(e(n).queue_id))},{default:u(()=>[l(E,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])):S("",!0),l(I,{icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"80",onClick:p[9]||(p[9]=g=>e(b).showPlayersMenu=!0)},{default:u(()=>[l(E,{icon:"mdi-speaker"}),e(n)?(y(),A("div",ha,k(e(he)(e(w).players[e(n).queue_id])),1)):S("",!0)]),_:1}),!c.$vuetify.display.mobile&&e(n)?(y(),A("div",_a,[l(se,{modelValue:r.value,"onUpdate:modelValue":p[11]||(p[11]=g=>r.value=g),location:"bottom end","close-on-content-click":!1},{activator:u(({props:g})=>[l(I,Y({icon:"",variant:"plain"},g,{class:"mediacontrols-right",height:"50",width:"70"}),{default:u(()=>{var _;return[l(E,{icon:"mdi-volume-high"}),V("div",null,k(Math.round(((_=e(b).selectedPlayer)==null?void 0:_.group_volume)||0)),1)]}),_:2},1040)]),default:u(()=>[l(Se,{"min-width":"300"},{default:u(()=>[l(ee,{style:{overflow:"hidden"},lines:"two"},{default:u(()=>[l(H,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:e(b).selectedPlayer.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>{var g;return[V("div",ba,[V("b",null,k((g=e(b).selectedPlayer)==null?void 0:g.display_name.substring(0,25)),1)])]}),subtitle:u(()=>{var g,_;return[(y(),A("div",{key:(g=e(b).selectedPlayer)==null?void 0:g.state,class:"text-body-2",style:{"line-height":"1em"}},k(c.$t("state."+((_=e(b).selectedPlayer)==null?void 0:_.state))),1))]}),default:u(()=>[l(I,{variant:"plain",style:{position:"absolute",right:"0px",top:"0px"},icon:"mdi-close",dark:"",onClick:p[10]||(p[10]=g=>r.value=!r.value)})]),_:1}),l(X),e(b).selectedPlayer?(y(),T(Ye,{key:0,player:e(b).selectedPlayer},null,8,["player"])):S("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):S("",!0),e(n)?(y(),T(I,{key:2,text:"",icon:"",variant:"plain",class:"mediacontrols-right",height:"50",width:"70",onClick:p[12]||(p[12]=g=>c.$router.push("/playerqueue/"))},{default:u(()=>[l(E,{icon:"mdi-playlist-music"}),V("div",null,k(c.$t("queue")),1)]),_:1})):S("",!0)])]}),_:1}))}});const wa=Bt(ka,[["__scopeId","data-v-a88e22ad"]]);function Aa(t){let{rootEl:d,isSticky:v,layoutItemStyles:r}=t;const n=P(!1),a=P(0),m=C(()=>{const s=typeof n.value=="boolean"?"top":n.value;return[v.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[s]:ie(a.value)}:{top:r.value.top}]});re(()=>{j(v,s=>{s?window.addEventListener("scroll",o,{passive:!0}):window.removeEventListener("scroll",o)},{immediate:!0})}),Ee(()=>{document.removeEventListener("scroll",o)});let f=0;function o(){var R;const s=f>window.scrollY?"up":"down",i=d.value.getBoundingClientRect(),c=parseFloat((R=r.value.top)!=null?R:0),p=window.scrollY-Math.max(0,a.value-c),h=i.height+Math.max(a.value,c)-window.scrollY-window.innerHeight;i.height<window.innerHeight-c?(n.value="top",a.value=c):s==="up"&&n.value==="bottom"||s==="down"&&n.value==="top"?(a.value=window.scrollY+i.top,n.value=!0):s==="down"&&h<=0?(a.value=0,n.value="bottom"):s==="up"&&p<=0&&(a.value=i.top+p,n.value="top"),f=window.scrollY}return{isStuck:n,stickyStyles:m}}const Ca=100,xa=20;function $e(t){const d=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*d}function Re(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let d=0;for(let v=t.length-1;v>0;v--){if(t[v].t===t[v-1].t)continue;const r=$e(d),n=(t[v].d-t[v-1].d)/(t[v].t-t[v-1].t);d+=(n-r)*Math.abs(n),v===t.length-1&&(d*=.5)}return $e(d)*1e3}function Va(){const t={};function d(n){Array.from(n.changedTouches).forEach(a=>{var f;((f=t[a.identifier])!=null?f:t[a.identifier]=new et(xa)).push([n.timeStamp,a])})}function v(n){Array.from(n.changedTouches).forEach(a=>{delete t[a.identifier]})}function r(n){var a;const m=(a=t[n])==null?void 0:a.values().reverse();if(!m)throw new Error(`No samples for touch id ${n}`);const f=m[0],o=[],s=[];for(const i of m){if(f[0]-i[0]>Ca)break;o.push({t:i[0],d:i[1].clientX}),s.push({t:i[0],d:i[1].clientY})}return{x:Re(o),y:Re(s),get direction(){const{x:i,y:c}=this,[p,h]=[Math.abs(i),Math.abs(c)];return p>h&&i>=0?"right":p>h&&i<=0?"left":h>p&&c>=0?"down":h>p&&c<=0?"up":Ta()}}}return{addMovement:d,endTouch:v,getVelocity:r}}function Ta(){throw new Error}function Sa(t){let{isActive:d,isTemporary:v,width:r,touchless:n,position:a}=t;re(()=>{window.addEventListener("touchstart",O,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),Ee(()=>{window.removeEventListener("touchstart",O),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",z)});const m=C(()=>a.value!=="bottom"),{addMovement:f,endTouch:o,getVelocity:s}=Va();let i=!1;const c=P(!1),p=P(0),h=P(0);let R;function $(x,g){return(a.value==="left"?x:a.value==="right"?document.documentElement.clientWidth-x:a.value==="bottom"?document.documentElement.clientHeight-x:Q())-(g?r.value:0)}function q(x){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=a.value==="left"?(x-h.value)/r.value:a.value==="right"?(document.documentElement.clientWidth-x-h.value)/r.value:a.value==="bottom"?(document.documentElement.clientHeight-x-h.value)/r.value:Q();return g?Math.max(0,Math.min(1,_)):_}function O(x){if(n.value)return;const g=x.changedTouches[0].clientX,_=x.changedTouches[0].clientY,B=25,L=a.value==="left"?g<B:a.value==="right"?g>document.documentElement.clientWidth-B:a.value==="bottom"?_>document.documentElement.clientHeight-B:Q(),M=d.value&&(a.value==="left"?g<r.value:a.value==="right"?g>document.documentElement.clientWidth-r.value:a.value==="bottom"?_>document.documentElement.clientHeight-r.value:Q());(L||M||d.value&&v.value)&&(i=!0,R=[g,_],h.value=$(m.value?g:_,d.value),p.value=q(m.value?g:_),o(x),f(x))}function W(x){const g=x.changedTouches[0].clientX,_=x.changedTouches[0].clientY;if(i){if(!x.cancelable){i=!1;return}const L=Math.abs(g-R[0]),M=Math.abs(_-R[1]);(m.value?L>M&&L>3:M>L&&M>3)?(c.value=!0,i=!1):(m.value?M:L)>3&&(i=!1)}if(!c.value)return;x.preventDefault(),f(x);const B=q(m.value?g:_,!1);p.value=Math.max(0,Math.min(1,B)),B>1?h.value=$(m.value?g:_,!0):B<0&&(h.value=$(m.value?g:_,!1))}function z(x){if(i=!1,!c.value)return;f(x),c.value=!1;const g=s(x.changedTouches[0].identifier),_=Math.abs(g.x),B=Math.abs(g.y);(m.value?_>B&&_>400:B>_&&B>3)?d.value=g.direction===({left:"right",right:"left",bottom:"up"}[a.value]||Q()):d.value=p.value>.5}const U=C(()=>c.value?{transform:a.value==="left"?`translateX(calc(-100% + ${p.value*r.value}px))`:a.value==="right"?`translateX(calc(100% - ${p.value*r.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${p.value*r.value}px))`:Q(),transition:"none"}:void 0);return{isDragging:c,dragProgress:p,dragStyles:U}}function Q(){throw new Error}const $a=["start","end","left","right","bottom"],Ra=te({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:Boolean,railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>$a.includes(t)},sticky:Boolean,...Ne(),...De(),...ye(),...qe(),...ue({tag:"nav"}),...pe()},emits:{"update:modelValue":t=>!0},setup(t,d){let{attrs:v,slots:r}=d;const{isRtl:n}=ze(),{themeClasses:a}=fe(t),{borderClasses:m}=We(t),{backgroundColorClasses:f,backgroundColorStyles:o}=me(K(t,"color")),{elevationClasses:s}=Oe(t),{mobile:i}=tt(),{roundedClasses:c}=Ue(t),p=ut(),h=Pe(t,"modelValue",null,D=>!!D),{ssrBootStyles:R}=He(),$=P(),q=P(!1),O=C(()=>t.rail&&t.expandOnHover&&q.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),W=C(()=>dt(t.location,n.value)),z=C(()=>!t.permanent&&(i.value||t.temporary)),U=C(()=>t.sticky&&!z.value&&W.value!=="bottom");t.disableResizeWatcher||j(z,D=>!t.permanent&&at(()=>h.value=!D)),!t.disableRouteWatcher&&p&&j(p.currentRoute,()=>z.value&&(h.value=!1)),j(()=>t.permanent,D=>{D&&(h.value=!0)}),nt(()=>{t.modelValue!=null||z.value||(h.value=t.permanent||!i.value)});const{isDragging:x,dragProgress:g,dragStyles:_}=Sa({isActive:h,isTemporary:z,width:O,touchless:K(t,"touchless"),position:W}),B=C(()=>{const D=z.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):O.value;return x.value?D*g.value:D}),{layoutItemStyles:L,layoutRect:M,layoutItemScrimStyles:ae}=ge({id:t.name,order:C(()=>parseInt(t.order,10)),position:W,layoutSize:B,elementSize:O,active:C(()=>h.value||x.value),disableTransitions:C(()=>x.value),absolute:C(()=>t.absolute||U.value&&typeof ne.value!="string")}),{isStuck:ne,stickyStyles:_e}=Aa({rootEl:$,isSticky:U,layoutItemStyles:L}),le=me(C(()=>typeof t.scrim=="string"?t.scrim:null)),je=C(()=>({...x.value?{opacity:g.value*.2,transition:"none"}:void 0,...M.value?{left:ie(M.value.left),right:ie(M.value.right),top:ie(M.value.top),bottom:ie(M.value.bottom)}:void 0,...ae.value}));return lt({VList:{bgColor:"transparent"}}),G(()=>{var D,be,ke,we;const Fe=r.image||t.image;return l(J,null,[l(t.tag,Y({ref:$,onMouseenter:()=>q.value=!0,onMouseleave:()=>q.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${W.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":q.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":z.value,"v-navigation-drawer--active":h.value,"v-navigation-drawer--sticky":U.value},a.value,f.value,m.value,s.value,c.value],style:[o.value,L.value,_.value,R.value,_e.value]},v),{default:()=>[Fe&&l("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?(D=r.image)==null?void 0:D.call(r,{image:t.image}):l("img",{src:t.image,alt:""},null)]),r.prepend&&l("div",{class:"v-navigation-drawer__prepend"},[(be=r.prepend)==null?void 0:be.call(r)]),l("div",{class:"v-navigation-drawer__content"},[(ke=r.default)==null?void 0:ke.call(r)]),r.append&&l("div",{class:"v-navigation-drawer__append"},[(we=r.append)==null?void 0:we.call(r)])]}),l(Ie,{name:"fade-transition"},{default:()=>[z.value&&(x.value||h.value)&&!!t.scrim&&l("div",{class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[je.value,le.backgroundColorStyles.value],onClick:()=>h.value=!1},null)]})])}),{isStuck:ne}}}),Pa={class:"text-subtitle-1"},Ba=F({__name:"PlayerSelect",setup(t){const d=P(void 0),v=C(()=>{var s,i;const o=[];for(const c in(s=w)==null?void 0:s.players){const p=(i=w)==null?void 0:i.players[c];!m(p,!0)||o.push(p)}return o.slice().sort((c,p)=>{var h;return c.display_name.toUpperCase()>((h=p.display_name)==null?void 0:h.toUpperCase())?1:-1})});j(()=>b.showPlayersMenu,o=>{o||(d.value=void 0)}),j(()=>b.selectedPlayer,o=>{o&&localStorage.setItem("mass.LastPlayerId",o.player_id)});const r=P(),n=P();re(()=>{var o,s,i;r.value=(i=(s=(o=it())==null?void 0:o.vnode)==null?void 0:s.el)==null?void 0:i.getRootNode(),f()});const a=function(o){n.value!=o&&(n.value=o,setTimeout(()=>{var i;const s=(i=r.value)==null?void 0:i.getElementById(o);s==null||s.scrollIntoView({behavior:"smooth"})},0))},m=function(o,s=!0,i=!1,c=!1){return!(!o.enabled||!o.available&&!s||o.synced_to&&!i||o.hidden_by.length&&!c)},f=function(){var s,i,c,p;if(b.selectedPlayer&&m(b.selectedPlayer))return;const o=localStorage.getItem("mass.LastPlayerId");if(o&&o in w.players&&m(w.players[o])){b.selectedPlayer=w.players[o];return}if((s=w)!=null&&s.players){for(const h in(i=w)==null?void 0:i.players){const R=w.players[h];if(R.state==Me.PLAYING){b.selectedPlayer=R;return}}for(const h in(c=w)==null?void 0:c.queues)if(w.queues[h].items){b.selectedPlayer=w.players[h];return}for(const h in(p=w)==null?void 0:p.queues){b.selectedPlayer=w.players[h];return}}};return(o,s)=>(y(),T(Ra,{modelValue:e(b).showPlayersMenu,"onUpdate:modelValue":s[2]||(s[2]=i=>e(b).showPlayersMenu=i),location:"right",app:"",clipped:"",temporary:"",width:"300",style:{"z-index":"9999"}},{default:u(()=>[l(St,{class:"headline"},{default:u(()=>[V("b",null,k(o.$t("players")),1)]),_:1}),l(I,{variant:"plain",style:{position:"absolute",right:"-10px",top:"0px"},icon:"mdi-close",dark:"",text:"",onClick:s[0]||(s[0]=i=>e(b).showPlayersMenu=!e(b).showPlayersMenu)}),l(X),l(At,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=i=>d.value=i),focusable:"",accordion:"",flat:""},{default:u(()=>[(y(!0),A(J,null,oe(e(v),i=>(y(),T(Ct,{id:i.player_id,key:i.player_id,disabled:!i.available,flat:""},{default:u(()=>{var c;return[l(xt,{class:"playerrow",style:Z(((c=e(b).selectedPlayer)==null?void 0:c.player_id)==i.player_id?"padding:0;background-color:rgba(50, 115, 220, 0.2);":"padding:0"),"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:p=>{e(b).selectedPlayer=i,a(i.player_id)}},{default:u(()=>[l(H,{density:"compact"},{prepend:u(()=>[l(E,{size:"50",icon:i.group_childs.length>0?"mdi-speaker-multiple":"mdi-speaker",color:"accent",style:{"padding-left":"0px","padding-right":"0px","margin-left":"-10px","margin-right":"10px",width:"42px",height:"50px"}},null,8,["icon"])]),title:u(()=>[V("div",Pa,[V("b",null,k(e(he)(i)),1)])]),subtitle:u(()=>[(y(),A("div",{key:i.state,class:"text-body-2",style:{"line-height":"1em"}},k(o.$t("state."+i.state)),1))]),_:2},1024)]),_:2},1032,["style","onClick"]),l(Vt,{variant:"contain"},{default:u(()=>[l(Ye,{player:i},null,8,["player"])]),_:2},1024)]}),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});function Ia(t={}){const{immediate:d=!1,onNeedRefresh:v,onOfflineReady:r,onRegistered:n,onRegisteredSW:a,onRegisterError:m}=t;let f,o,s,i;const c=async(h=!0)=>{await s,h&&(f==null||f.addEventListener("controlling",R=>{R.isUpdate&&window.location.reload()})),await(i==null?void 0:i())};async function p(){if("serviceWorker"in navigator){const{Workbox:h,messageSW:R}=await ot(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[],import.meta.url);i=async()=>{o&&o.waiting&&await R(o.waiting,{type:"SKIP_WAITING"})},f=new h("./sw.js",{scope:"./",type:"classic"}),f.addEventListener("activated",$=>{$.isUpdate||r==null||r()});{const $=()=>{v==null||v()};f.addEventListener("waiting",$),f.addEventListener("externalwaiting",$)}f.register({immediate:d}).then($=>{o=$,a?a("./sw.js",$):n==null||n($)}).catch($=>{m==null||m($)})}}return s=p(),c}function Ma(t={}){const{immediate:d=!0,onNeedRefresh:v,onOfflineReady:r,onRegistered:n,onRegisteredSW:a,onRegisterError:m}=t,f=P(!1),o=P(!1);return{updateServiceWorker:Ia({immediate:d,onNeedRefresh(){f.value=!0,v==null||v()},onOfflineReady(){o.value=!0,r==null||r()},onRegistered:n,onRegisteredSW:a,onRegisterError:m}),offlineReady:o,needRefresh:f}}const Ea={key:0,class:"pwa-toast",role:"alert"},za={class:"message"},La={key:0},Na={key:1},Da=F({__name:"ReloadPrompt",setup(t){const{offlineReady:d,needRefresh:v,updateServiceWorker:r}=Ma(),n=async()=>{d.value=!1,v.value=!1};return(a,m)=>e(d)||e(v)?(y(),A("div",Ea,[V("div",za,[e(d)?(y(),A("span",La," App ready to work offline ")):(y(),A("span",Na," New content available, click on reload button to update. "))]),e(v)?(y(),A("button",{key:0,onClick:m[0]||(m[0]=f=>e(r)())}," Reload ")):S("",!0),V("button",{onClick:n}," Close ")])):S("",!0)}});const qa=te({name:"VApp",props:{...ht({fullHeight:!0}),...pe()},setup(t,d){let{slots:v}=d;const r=fe(t),{layoutClasses:n,layoutStyles:a,getLayoutItem:m,items:f,layoutRef:o}=_t(t),{rtlClasses:s}=ze();return G(()=>{var i;return l("div",{ref:o,class:["v-application",r.themeClasses.value,n.value,s.value],style:a.value},[l("div",{class:"v-application__wrap"},[(i=v.default)==null?void 0:i.call(v)])])}),{getLayoutItem:m,items:f,theme:r}}}),an=F({__name:"Default",setup(t){return(d,v)=>(y(),T(qa,null,{default:u(()=>[l(Ba),l(Dt),e(w).state.value==e(st).CONNECTED?(y(),T(Ot,{key:0})):(y(),T(mt,{key:1},{default:u(()=>[l(Le,{indeterminate:"",size:"64"})]),_:1})),l(wa),e(b).isInStandaloneMode?(y(),T(Da,{key:2})):S("",!0)]),_:1}))}});export{an as default};
