"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[196],{34439:(e,t,r)=>{var a,n;r(82772),r(69826),r(41539);var i,o=r(73819),s=(i=r(96486))&&i.__esModule?i:{default:i};a=[r(91669),r(55112),r(61329),r(67507)],void 0===(n=function(e,t,r){var a=t.Browser=t.Browser||{};return a.Collection||(a.Collection=function(){},s.default.extend(a.Collection,s.default.clone(a.Node),{Init:function(){this.node_initialized||(this.node_initialized=!0,t.Browser.add_menus([{name:"refresh",node:this.type,module:this,applies:["object","context"],callback:"refresh",priority:2,label:e("Refresh")}]),t.unsupported_nodes&&-1==s.default.indexOf(t.unsupported_nodes,this.type)&&("database"==this.type&&this.allowConn||"database"!=this.type)&&(t.Browser.add_menus([{name:"show_query_tool",node:this.type,module:this,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool")}]),t.Browser.add_menus([{name:"search_objects",node:this.type,module:this,applies:["context"],callback:"show_search_objects",priority:997,label:e("Search Objects...")}]),t.enable_psql&&t.Browser.add_menus([{name:"show_psql_tool",node:this.type,module:this,applies:["context"],callback:"show_psql_tool",priority:998,label:e("PSQL Tool")}])))},hasId:!1,is_collection:!0,collection_node:!0,hasCollectiveStatistics:!0,canDrop:!0,canDropCascade:!0,selectParentNodeOnDelete:!1,showProperties:function(e,t,r){var n=r.$container.find(".obj_properties").first();(0,o.getPanelView)(a.tree,n[0],a,r._type)},generate_url:function(e,n){var i={properties:"obj",children:"nodes",drop:"obj"},o=this,s=a.tree.getTreeNodeHierarchy(e),l=n in i?i[n]:n;return r.generate_url(t.Browser.URL,s,l,o.node,(function(e,t){return t!=o.type}))},show_query_tool:function(){t.Tools.SQLEditor&&t.Tools.SQLEditor.showQueryTool("",t.Browser.tree.selected())},show_search_objects:function(){t.Tools.SearchObjects&&t.Tools.SearchObjects.show_search_objects("",t.Browser.tree.selected())},show_psql_tool:function(e){var t=e||{},r=a.tree,n=t.item||r.selected(),i=n?r.itemData(n):void 0;a.psql.psql_tool(i,n,!0)}})),a.Collection}.apply(t,a))||(e.exports=n)},89021:(e,t,r)=>{var a,n,i=s(r(55958)),o=s(r(96486));function s(e){return e&&e.__esModule?e:{default:e}}a=[r(91669),r(55112)],void 0===(n=function(e,t){return t.Browser=t.Browser||{},o.default.extend(t.Browser,{report_error:function(t,r,a,n){t=o.default.escape(t),r=o.default.escape(r),a=o.default.escape(a);var s='<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">'+e("Error message")+'</a></h4></div><div id="collapseOne" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingOne"><div class="panel-body" style="overflow: auto;">'+r+"</div></div></div>";null!=a&&""!=a&&(s+='<div class="panel panel-default"><div class="panel-heading" role="tab" id="headingTwo"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">'+e("Additional info")+'</a></h4></div><div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"><div class="panel-body" style="overflow: auto;">'+a+"</div></div></div></div>"),s+="</div>",i.default.alert(o.default.unescape(t),s,(function(){n&&n()}))}}),t.Browser.report_error}.apply(t,a))||(e.exports=n)},25260:(e,t,r)=>{r(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(r(18237)),n=i(r(55112));function i(e){return e&&e.__esModule?e:{default:e}}var o=n.default.Browser=n.default.Browser||{};o.Events=new a.default;var s=o;t.default=s},14497:(e,t,r)=>{var a,n;r(68309),r(32564),r(24812);var i,o=(i=r(96486))&&i.__esModule?i:{default:i};a=[r(55112),r(19755),r(35816)],void 0===(n=function(e,t){var r=e.Browser=e.Browser||{},a=window.wcDocker,n=window.wcIFrame;return e.Browser.Frame=function(e){o.default.extend(this,o.default.pick(e,["name","title","width","height","showTitle","isCloseable","isPrivate","url","icon","onCreate","isLayoutMember","isRenamable"]))},o.default.extend(e.Browser.Frame.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isClosable:!0,isRenamable:!1,isPrivate:!1,isLayoutMember:!1,url:"",icon:"",panel:null,frame:null,onCreate:null,load:function(e){var i=this;i.panel||e.registerPanelType(this.name,{title:i.title,isPrivate:i.isPrivate,isLayoutMember:i.isLayoutMember,onCreate:function(e){var s;t(e).data("pgAdminName",i.name),e.initSize(i.width,i.height),null===(s=e.showTitle)||void 0===s||s||e.title(!1),e.icon(i.icon),e.closeable(!!i.isCloseable),e.renamable(i.isRenamable);var l=t('<div style="position:absolute;top:0 !important;width:100%;height:100%;display:table;z-index:0;">');e.layout().addItem(l),i.panel=e;var d=new n(l,e);t(e).data("frameInitialized",!1),t(e).data("embeddedFrame",d),""!=i.url&&"about:blank"!=i.url?setTimeout((function(){d.openURL(i.url),t(e).data("frameInitialized",!0),r.Events.trigger("pgadmin-browser:frame:urlloaded:"+i.name,d,i.url,self)}),50):(d.openURL("about:blank"),t(e).data("frameInitialized",!0),r.Events.trigger("pgadmin-browser:frame:urlloaded:"+i.name,d,i.url,self)),i.events&&o.default.isObject(i.events)&&o.default.each(i.events,(function(t,r){t&&o.default.isFunction(t)&&e.on(r,t)})),o.default.each([a.EVENT.UPDATED,a.EVENT.VISIBILITY_CHANGED,a.EVENT.BEGIN_DOCK,a.EVENT.END_DOCK,a.EVENT.GAIN_FOCUS,a.EVENT.LOST_FOCUS,a.EVENT.CLOSED,a.EVENT.BUTTON,a.EVENT.ATTACHED,a.EVENT.DETACHED,a.EVENT.MOVE_STARTED,a.EVENT.MOVE_ENDED,a.EVENT.MOVED,a.EVENT.RESIZE_STARTED,a.EVENT.RESIZE_ENDED,a.EVENT.RESIZED,a.EVENT.SCROLLED],(function(t){e.on(t,i.eventFunc.bind(e,t))})),i.onCreate&&o.default.isFunction(i.onCreate)&&i.onCreate.apply(i,[e,d])}})},eventFunc:function(e){var a=t(this).data("pgAdminName");try{r.Events.trigger("pgadmin-browser:frame",e,this,arguments),r.Events.trigger("pgadmin-browser:frame:"+e,this,arguments),a&&(r.Events.trigger("pgadmin-browser:frame-"+a,e,this,arguments),r.Events.trigger("pgadmin-browser:frame-"+a+":"+e,this,arguments))}catch(e){console.warn(e.stack||e)}}}),e.Browser.Frame}.apply(t,a))||(e.exports=n)},67507:(e,t,r)=>{var a,n;r(47042),r(68309),r(91038),r(78783),r(74916),r(82526),r(41817),r(32165),r(79753),r(69070),r(47941),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(24812),r(66992),r(41539),r(33948),r(82772),r(32564),r(26699),r(32023),r(69826),r(3843),r(83710);var i=r(92705),o=l(r(55958)),s=l(r(96486));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}a=[r(91669),r(19755),r(55112),r(61329),r(44092),r(7027),r(25260)],void 0===(n=function(e,t,r,a,n){var l=window.wcDocker,u=r.Browser=r.Browser||{};return u.Node?u.Node:(u.Nodes=u.Nodes||{},u.Node=function(){},u.Node.extend=function(e,t){var r,a=this;if(r=function(){return a.apply(this,arguments)},s.default.extend(r,a,s.default.omit(e,"callbacks")),r.callbacks=s.default.extend({},a.callbacks,e.callbacks),null!=t&&!t)return r;var n,i,o=p(s.default.keys(r.callbacks));try{for(o.s();!(n=o.n()).done;){var l=n.value;"function"==typeof r.callbacks[i=l]&&(r.callbacks[i]=r.callbacks[i].bind(r))}}catch(e){o.e(e)}finally{o.f()}return r.Init.apply(r),this.Init.apply(r),r},s.default.extend(r.Browser.Node,{type:void 0,label:"",sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:"",epasHelp:!1,title:function(e,t){return e.label+(t?" - "+t.label:"")},hasId:!0,Init:function(){var t=this;if(!t.node_initialized){if(t.node_initialized=!0,r.Browser.add_menus([{name:"refresh",node:t.type,module:t,applies:["object","context"],callback:"refresh",priority:2,label:e("Refresh..."),enable:!0}]),t.canEdit&&r.Browser.add_menus([{name:"show_obj_properties",node:t.type,module:t,applies:["object","context"],callback:"show_obj_properties",priority:999,label:e("Properties..."),data:{action:"edit"},enable:s.default.isFunction(t.canEdit)?function(){return!!t.canEdit.apply(t,arguments)}:!!t.canEdit}]),t.canDrop&&(r.Browser.add_menus([{name:"delete_object",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:t.dropPriority,label:t.dropAsRemove?e("Remove %s",t.label):e("Delete/Drop"),data:{url:"drop",data_disabled:e("The selected tree node does not support this option.")},enable:s.default.isFunction(t.canDrop)?function(){return!!t.canDrop.apply(t,arguments)}:!!t.canDrop}]),t.canDropCascade&&r.Browser.add_menus([{name:"delete_object_cascade",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:3,label:e("Drop Cascade"),data:{url:"delete"},enable:s.default.isFunction(t.canDropCascade)?function(){return t.canDropCascade.apply(t,arguments)}:!!t.canDropCascade}])),-1==s.default.indexOf(r.unsupported_nodes,t.type)){var a=function(e){return!("database"!=(null==e?void 0:e._type)||null==e||!e.allowConn)||"database"!=(null==e?void 0:e._type)};r.Browser.add_menus([{name:"show_query_tool",node:t.type,module:t,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool"),enable:a}]),r.Browser.add_menus([{name:"search_objects",node:t.type,module:r.Tools.SearchObjects,applies:["context"],callback:"show_search_objects",priority:997,label:e("Search Objects..."),icon:"fa fa-search",enable:a}]),r.enable_psql&&r.Browser.add_menus([{name:"show_psql_tool",node:this.type,module:this,applies:["context"],callback:"show_psql_tool",priority:998,label:e("PSQL Tool")}])}t.hasScriptTypes&&s.default.isArray(t.hasScriptTypes)&&t.hasScriptTypes.length>0&&s.default.each(t.hasScriptTypes,(function(a){var n=e("%s Script",a.toUpperCase());a=a.toLowerCase(),r.Browser.add_menus([{name:"show_script_"+a,node:t.type,module:t,applies:["object","context"],callback:"show_script",priority:4,label:n,category:e("Scripts"),data:{script:a,data_disabled:e("The selected tree node does not support this option.")},enable:t.check_user_permission}])}))}},check_user_permission:function(e,t,r){if("server_group"==e._type||"server"==e._type)return!1;if("database"==e._type&&!e.allowConn)return!1;var a=u.tree.getTreeNodeHierarchy(t);return-1==s.default.indexOf(["create","insert","update","delete"],r.script)||(!("role"!=e.type||!a.server.user.can_create_role)||!!(a.server&&(a.server.user.is_superuser||a.server.user.can_create_db)||a.schema&&a.schema.can_create))},addUtilityPanel:function(e,t,r){var a=window.document.body,n=document.createElement("div"),i=r||u.docker;a.insertBefore(n,a.firstChild);var o=screen.width<700?.95*screen.width:.5*screen.width,l=screen.height<500?.95*screen.height:.4*screen.height;s.default.isUndefined(e)||s.default.isNull(e)||(o=e),s.default.isUndefined(t)||s.default.isNull(t)||(l=t);var d=(a.offsetWidth-o)/2,c=(a.offsetHeight-l)/4,p=i.addPanel("utility_props",window.wcDocker.DOCK.FLOAT,void 0,{w:o,h:l,x:d,y:c});return setTimeout((function(){p.moveable(!1)}),0),a.removeChild(n),p},registerDockerPanel:function(e,t,r){var a=e||u.docker,n=a.findPanels(t);n&&1==n.length||(n=new u.Panel(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({name:t,showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,content:'<div class="obj_properties container-fluid h-100"></div>'},r)),n.load(a))},registerUtilityPanel:function(t){var r=t||u.docker,a=r.findPanels("utility_props");if(!a||1!=a.length){(a=new u.Panel({name:"utility_props",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,elContainer:!0,content:'<div class="obj_properties container-fluid h-100"><div role="status" class="pg-panel-message">'+e("Please wait while we fetch information ...")+"</div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow")},events:{}})).load(r)}},register_node_panel:function(){var t=u.docker.findPanels("node_props");if(!t||1!=t.length){(t=new u.Panel({name:"node_props",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,elContainer:!0,content:'<div class="obj_properties container-fluid h-100"><div role="status" class="pg-panel-message">'+e("Please wait while we fetch information about the node from the server...")+"</div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow")},events:{}})).load(u.docker)}},hasScriptTypes:["create"],canEdit:!0,canDrop:!1,canDropCascade:!1,dropAsRemove:!1,dropPriority:2,selectParentNodeOnDelete:!1,callbacks:{show_obj_properties:function(t,a){var i,d=u.tree,c=t&&t.item||a||d.selected(),p=c?d.itemData(c):void 0,f=this,h=f.title.apply(this,[p]);if(u.Node.register_node_panel(),p){var b=this,y=s.default.isArray(this.parent_type)?function(e){return-1!=s.default.indexOf(b.parent_type,e._type)}:function(e){return b.parent_type==e._type},v=function(){var e,t,a,n,i=window.document.body,o=document.createElement("div");i.insertBefore(o,i.firstChild),e=screen.width<800?r.toPx(o,"95%","width",!0):(e=r.toPx(o,b.width||u.stdW.default+"px","width",!0))<=u.stdW.sm?u.stdW.sm:e<=u.stdW.md?u.stdW.md:u.stdW.lg,t=screen.height<600?r.toPx(o,"95%","height",!0):(t=r.toPx(o,b.height||u.stdH.default+"px","height",!0))<=u.stdH.sm?u.stdH.sm:t<=u.stdH.md?u.stdH.md:u.stdH.lg,a=(i.offsetWidth-e)/2,n=(i.offsetHeight-t)/4,e>window.innerWidth&&(a=0,e=window.innerWidth),t>window.innerHeight&&(n=0,t=window.innerHeight);var s=u.docker.addPanel("node_props",l.DOCK.FLOAT,void 0,{w:e+"px",h:t+"px",x:a+"px",y:n+"px"});return i.removeChild(o),s};if("create"==t.action){if(b.parent_type&&!y(p))for(;c&&d.hasParent(c);){c=d.parent(c);var _=d.itemData(c);if(y(_)){p=_;break}}if(!p||null!=this.parent_type&&!y(p))return;h=e("Create - %s",this.label),"server"==this.type&&(h=e("Register - %s",this.label)),i=v(),setTimeout((function(){f.showProperties(c,p,i,t.action)}),10)}else{if(u.Node.panels&&u.Node.panels[p.id]&&u.Node.panels[p.id].$container)if((i=u.Node.panels[p.id]).$container.attr("action-mode")){var m=e('Are you sure want to stop editing the properties of %s "%s"?');"edit"==t.action&&(m=e('Are you sure want to reset the current changes and re-open the panel for %s "%s"?')),o.default.confirm(e("Edit in progress?"),n.sprintf(m,f.label.toLowerCase(),p.label),(function(){setTimeout((function(){f.showProperties(c,p,i,t.action)}),10)}),null).show()}else setTimeout((function(){f.showProperties(c,p,i,t.action)}),10);else u.Node.panels=u.Node.panels||{},i=u.Node.panels[p.id]=v(),setTimeout((function(){f.showProperties(c,p,i,t.action)}),10)}i.title(h),i.icon("icon-"+this.type),i.focus()}},delete_obj:function(r,a){var n=r||{url:"drop"},i=this,l=u.tree,d=n.item||a||l.selected(),c=d?l.itemData(d):void 0;if(c){i=u.Nodes[c._type];var p,f,h=s.default.unescape(c.label);if("delete"==n.url){if(p=e('Are you sure you want to drop %s "%s" and all the objects that depend on it?',i.label.toLowerCase(),c.label),f=e("DROP CASCADE %s?",i.label),!(s.default.isFunction(i.canDropCascade)?i.canDropCascade.apply(i,[c,d]):i.canDropCascade))return void o.default.error(e('The %s "%s" cannot be dropped.',i.label,c.label),1e4)}else if(i.dropAsRemove?(p=e('Are you sure you want to remove %s "%s"?',i.label.toLowerCase(),c.label),f=e("Remove %s?",i.label)):(p=e('Are you sure you want to drop %s "%s"?',i.label.toLowerCase(),c.label),f=e("Drop %s?",i.label)),!(s.default.isFunction(i.canDrop)?i.canDrop.apply(i,[c,d]):i.canDrop))return void o.default.error(e('The %s "%s" cannot be dropped/removed.',i.label,c.label),1e4);o.default.confirm(f,p,(function(){t.ajax({url:i.generate_url(d,n.url,c,!0),type:"DELETE"}).done((function(e){if(2!=e.success){if(0==e.success)u.report_error(e.errormsg,e.info);else{var t=!0;if(i.selectParentNodeOnDelete){var r=l.parent(d);setTimeout((function(){l.select(r)}),10),t=!1}u.removeTreeNode(d,t)}return!0}o.default.error(e.info,null)})).fail((function(t){var r=t.responseText;if(417==t.status||410==t.status||500==t.status)try{var a=JSON.parse(t.responseText);r=a.info||a.errormsg}catch(e){console.warn(e.stack||e)}u.report_error(e('Error dropping/removing %s: "%s"',i.label,h),r)}))}))}},show_script:function(e,t){var a,n,i=e.script,o=u.tree,s=t||o.selected(),l=s?o.itemData(s):void 0;l&&(a=u.Nodes[l._type],n="insert"==i?"insert_sql":"update"==i?"update_sql":"delete"==i?"delete_sql":"select"==i?"select_sql":"exec"==i?"exec_sql":"sql",r.Tools.SQLEditor.showQueryTool(a.generate_url(s,n,l,!0),s,i))},show_query_tool:function(t,a){var n=u.get_preference("sqleditor","copy_sql_to_query_tool"),i=u.tree,o=a||i.selected(),s=o?i.itemData(o):void 0;if(s)if(n.value&&!s._type.includes("coll-")){var l={script:s._type.toLowerCase(),data_disabled:e("The selected tree node does not support this option.")};u.Node.callbacks.show_script(l)}else r.Tools.SQLEditor.showQueryTool("",o)},show_psql_tool:function(e){var t=e||{},r=u.tree,a=t.item||r.selected(),n=a?r.itemData(a):void 0;u.psql.psql_tool(n,a,!0)},change_server_background:function(e,r){if(e&&r){var a=u.tree.getTreeNodeHierarchy(e).server;if(a)if(-1!==e.path.indexOf(a.id)){var n=a.icon.split(" ")[1]||null,i=a.icon.split(" ")[2]||"";if(n){var o,s="pga_server_"+a._id+"_bgcolor";o="<style id="+s+" type='text/css'> \n",o+="."+s+" .file-label {",o+=" border-radius: 3px; margin-bottom: 2px;",o+=" background: "+n+" !important;} \n",i&&(o+="."+s+" span.file-name {",o+=" color: "+i+" !important;} \n"),o+="</style>",t("#"+s).remove(),t(o).appendTo("head"),u.tree.addCssClass(e,s)}}}},added:function(e,t){-1!==u.tree.getData(e)._type.indexOf("coll-")&&setTimeout((function(){var t=r.Browser.Nodes[u.tree.getData(e).nodes[0]];t.clear_cache.apply(t)}),0),u.Events.trigger("pgadmin:browser:tree:expand-from-previous-tree-state",e),u.Node.callbacks.change_server_background(e,t)},selected:function(e,t,a){var n=a||u,i=n.tree,o=t||i.itemData(e);return r.Browser.enable_disable_menus.apply(n,[e]),o&&n&&"properties"in n.panels&&n.panels.properties&&n.panels.properties.panel&&n.panels.properties.panel.isVisible()&&this.showProperties(e,o,n.panels.properties.panel),u.Events.trigger("pgadmin:browser:tree:update-tree-state",e),!0},removed:function(e){var t=this;setTimeout((function(){t.clear_cache.apply(t,e)}),0)},refresh:function(e,r){var a=this,n=u.tree,i=r&&n.itemData(r);t(u.panels.properties.panel).removeData("node-prop"),u.Events.trigger("pgadmin:browser:tree:refresh",r||u.tree.selected(),{success:function(){a.callbacks.selected.apply(a,[r,i,u])}})},opened:function(e){var t=u.tree,r=u.get_preference("browser","auto_expand_sole_children");if(r&&r.value&&1==t.children(e).length){var a=t.first(e);if(a._loaded)t.open(a),t.select(a);else var n=setInterval((function(){a._loaded&&(t.open(a),t.select(a),i())}),200),i=function(){clearInterval(n)}}else if(1==t.children(e).length){var o=t.first(e);t.select(o)}u.Events.trigger("pgadmin:browser:tree:update-tree-state",e)},closed:function(e){u.Events.trigger("pgadmin:browser:tree:remove-from-tree-state",e)}},showProperties:function(t,r,a,n){var l=this,d=a.$container.find(".obj_properties").first(),c=function(){var e=u.tree.getTreeNodeHierarchy(t);(0,i.getNodeView)(l.type,e,"properties",r,"tab",d[0],this,b)}.bind(a),p=function(){n&&"properties"==n&&(n="edit"),this.$container.attr("action-mode",n),this.icon(s.default.isFunction(l.node_image)?l.node_image.apply(l,[r]):l.node_image||"icon-"+l.type),(0,i.removeNodeView)(d[0]);var a=u.tree.getTreeNodeHierarchy(t);(0,i.getNodeView)(l.type,a,n,r,"dialog",d[0],this,b,(function(t){t.node&&(h(t.node,a),0===t.success&&o.default.alert(e("Error"),e(t.errormsg)))}))}.bind(a),f=function(e,r,a){setTimeout((function(){e.clear_cache.apply(e,t)}),0);try{u.Events.trigger("pgadmin:browser:tree:add",s.default.clone(r),s.default.clone(a))}catch(e){console.warn(e.stack||e)}this.close()}.bind(a,l),h=function(e,a,n){var i=r,o=a,s=n;setTimeout((function(){e.clear_cache.apply(e,t)}),0),u.Events.trigger("pgadmin:browser:tree:update",i,o,s,{success:function(e,t,r){u.Events.trigger("pgadmin:browser:node:updated",e,t,r),u.Events.trigger("pgadmin:browser:node:"+t._type+":updated",e,t,r)}}),this.close()}.bind(a,l),b=p.bind(a);n?("create"==n&&(h=f),"properties"!=n?p():c()):(b=function(){setTimeout((function(){l.callbacks.show_obj_properties.apply(l,[{action:"edit",item:t}])}),0)}.bind(a),c())},_find_parent_node:function(e,t,r){if(this.parent_type)if(r=r||e.itemData(t),s.default.isString(this.parent_type)){if(this.parent_type==r._type)return t;for(;e.hasParent(t);)if(t=e.parent(t),r=e.itemData(t),this.parent_type==r._type)return t}else{if(s.default.indexOf(this.parent_type,r._type)>=0)return t;for(;e.hasParent(t);)if(t=e.parent(t),r=e.itemData(t),s.default.indexOf(this.parent_type,r._type)>=0)return t}return null},generate_url:function(e,t,r,n,i,o){var l={create:"obj",drop:"obj",edit:"obj",properties:"obj",statistics:"stats"},d=this,c=-1/0,p=s.default.isUndefined(e)||s.default.isNull(e)?i||{}:u.tree.getTreeNodeHierarchy(e),f=t in l?l[t]:t,h=n&&r._type==d.type?encodeURIComponent(r._id):"";if(d.parent_type)if(s.default.isString(d.parent_type)){var b=p[d.parent_type];b&&(c=b.priority)}else s.default.each(d.parent_type,(function(e){var t=p[e];t&&c<t.priority&&(c=t.priority)}));var y=c;o&&p[o]&&(y=p[o].priority);return a.generate_url(u.URL,p,f,d.type,(function(e){return e.priority<=y||e.priority==c}),h)},cache:function(e,t,r,a){var i=this.cached=this.cached||{},o=e,l=t&&t[r]&&t[r].priority||0;if(t&&s.default.each(s.default.sortBy(s.default.values(s.default.pickBy(t,(function(e){return e.priority<=l}))),(function(e){return e.priority})),(function(e){o=n.sprintf("%s_%s",o,encodeURI(e._id))})),s.default.isUndefined(a)){var d=i[o];return!s.default.isUndefined(d)&&d.at-Date.now()>3e5&&(d=void 0),d}return i[o]={data:a,at:Date.now(),level:r}},clear_cache:function(e){this.cached={};u.Events.trigger("pgadmin:browser:node:"+this.type+":cache_cleared",e,this)},cache_level:function(e,t){if(e){if(t&&this.type in e)return this.type;if(s.default.isArray(this.parent_type)){for(var r in this.parent_type)if(r in e)return r;return this.type}return this.parent_type}}}),r.Browser.Node)}.apply(t,a))||(e.exports=n)},70242:(e,t,r)=>{var a,n;r(68309),r(24812),r(89554),r(41539),r(32564),r(69826),r(26699);var i,o=r(73819),s=(i=r(96486))&&i.__esModule?i:{default:i};a=[r(55112),r(19755),r(35816)],void 0===(n=function(e,t){var r=e.Browser=e.Browser||{},a=window.wcDocker;return e.Browser.Panel=function(e){s.default.extend(this,s.default.pick(e,["name","title","width","height","showTitle","isCloseable","isPrivate","isLayoutMember","content","icon","events","onCreate","elContainer","canHide","limit","extraClasses","canMaximise"]))},s.default.extend(e.Browser.Panel.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isCloseable:!0,isPrivate:!1,isLayoutMember:!0,content:"",icon:"",panel:null,onCreate:null,elContainer:!1,canMaximise:!1,limit:null,extraClasses:null,load:function(e,n){var i=this;i.panel||e.registerPanelType(i.name,{title:i.title,isPrivate:i.isPrivate,limit:i.limit,isLayoutMember:i.isLayoutMember,onCreate:function(e){if(t(e).data("pgAdminName",i.name),e.initSize(i.width,i.height),i.showTitle){var l='<a href="#" tabindex="-1" class="panel-link-heading">'+(n||i.title)+"</a>";e.title(l),""!=i.icon&&e.icon(i.icon)}else e.title(!1);var d=t("<div>",{class:"pg-panel-content"}).append(t(i.content));s.default.isNull("extraClasses")||d.addClass(i.extraClasses),e.maximisable(!!i.canMaximise),e.closeable(!!i.isCloseable),e.layout().addItem(d),i.panel=e,i.events&&s.default.isObject(i.events)&&s.default.each(i.events,(function(t,r){t&&s.default.isFunction(t)&&e.on(r,t)})),s.default.each([a.EVENT.UPDATED,a.EVENT.VISIBILITY_CHANGED,a.EVENT.BEGIN_DOCK,a.EVENT.END_DOCK,a.EVENT.GAIN_FOCUS,a.EVENT.LOST_FOCUS,a.EVENT.CLOSED,a.EVENT.BUTTON,a.EVENT.ATTACHED,a.EVENT.DETACHED,a.EVENT.MOVE_STARTED,a.EVENT.MOVE_ENDED,a.EVENT.MOVED,a.EVENT.RESIZE_STARTED,a.EVENT.RESIZE_ENDED,a.EVENT.RESIZED,a.EVENT.SCROLLED],(function(t){e.on(t,i.eventFunc.bind(e,t))})),i.onCreate&&s.default.isFunction(i.onCreate)&&i.onCreate.apply(i,[e,d]),["dragover","drop"].forEach((function(e){d[0].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault()}))})),i.elContainer&&(e.pgElContainer=d,d.addClass("pg-el-container"),s.default.each([a.EVENT.RESIZED,a.EVENT.ATTACHED,a.EVENT.DETACHED,a.EVENT.VISIBILITY_CHANGED],(function(t){e.on(t,i.resizedContainer.bind(e))})),i.resizedContainer.apply(e)),"dashboard"!=e._type&&"processes"!=e._type||(0,o.getPanelView)(r.tree,d[0],r,e._type),r.onPreferencesChange("dashboards",(function(){(0,o.getPanelView)(r.tree,d[0],r,e._type)})),r.onPreferencesChange("graphs",(function(){(0,o.getPanelView)(r.tree,d[0],r,e._type)})),s.default.each([a.EVENT.CLOSED,a.EVENT.VISIBILITY_CHANGED],(function(t){e.on(t,i.handleVisibility.bind(e,t))})),r.Events.on("pgadmin-browser:tree:selected",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(r.tree,d[0],r,e._type)})),r.Events.on("pgadmin:database:connected",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(r.tree,d[0],r,e._type)})),r.Events.on("pgadmin-browser:tree:refreshing",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(r.tree,d[0],r,e._type)}))}})},eventFunc:function(e){var a=t(this).data("pgAdminName");try{r.Events.trigger("pgadmin-browser:panel",e,this,arguments),r.Events.trigger("pgadmin-browser:panel:"+e,this,arguments),a&&(r.Events.trigger("pgadmin-browser:panel-"+a,e,this,arguments),r.Events.trigger("pgadmin-browser:panel-"+a+":"+e,this,arguments))}catch(e){console.warn(e.stack||e)}},resizedContainer:function(){var e=this;if(e.pgElContainer&&!e.pgResizeTimeout){if(!e.isVisible())return clearTimeout(e.pgResizeTimeout),void(e.pgResizeTimeout=null);e.pgResizeTimeout=setTimeout((function(){var t=e.width(),r="xs";e.pgResizeTimeout=null,t>=480&&(r="sm"),t>=768&&(r="md"),t>=992&&(r="lg"),t>=1200&&(r="xl"),e.pgElContainer.attr("el",r)}),100)}},handleVisibility:function(e){if(!s.default.isNull(r.tree)){var t=r.docker.findPanels(this._type)[0],a=t.isVisible(),n=t.layout().scene().find(".pg-panel-content");a&&["dashboard","statistics","dependencies","dependents","sql","processes"].includes(t._type)&&"panelVisibilityChanged"==e&&(0,o.getPanelView)(r.tree,n[0],r,this._type),"panelClosed"==e&&"dashboard"==t._type&&(0,o.getPanelView)(r.tree,n[0],r,this._type,!1)}}}),e.Browser.Panel}.apply(t,a))||(e.exports=n)}}]);