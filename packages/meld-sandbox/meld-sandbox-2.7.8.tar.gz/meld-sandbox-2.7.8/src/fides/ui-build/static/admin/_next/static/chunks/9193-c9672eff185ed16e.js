"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9193],{58144:function(e,t,n){var r=n(59499),i=n(26537),o=n(23256),s=n(43894),l=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm,a=e.title,u=e.message,d=e.cancelButtonText,p=e.cancelButtonThemingProps,f=e.continueButtonText,m=e.continueButtonThemingProps,x=e.isLoading,h=e.returnFocusOnClose,v=e.isCentered;return(0,l.jsxs)(i.u_,{isOpen:t,onClose:n,size:"lg",returnFocusOnClose:null===h||void 0===h||h,isCentered:v,children:[(0,l.jsx)(i.ZA,{}),(0,l.jsxs)(i.hz,{textAlign:"center",p:2,"data-testid":"confirmation-modal",children:[a?(0,l.jsx)(i.xB,{fontWeight:"medium",children:a}):null,u?(0,l.jsx)(i.fe,{children:u}):null,(0,l.jsx)(i.mz,{children:(0,l.jsxs)(o.MI,{columns:2,width:"100%",children:[(0,l.jsx)(s.zx,c(c({variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",isDisabled:x},p),{},{children:d||"Cancel"})),(0,l.jsx)(s.zx,c(c({colorScheme:"primary",onClick:r,"data-testid":"continue-btn",isLoading:x},m),{},{children:f||"Continue"}))]})})]})]})}},52313:function(e,t,n){var r=n(59499),i=n(4730),o=n(81144),s=n(85893),l=["data","border"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.data,n=e.border,r=void 0===n?"partial":n,a=(0,i.Z)(e,l);return(0,s.jsxs)(o.mQ,c(c({colorScheme:"complimentary"},a),{},{children:[(0,s.jsx)(o.td,{width:"partial"===r?"max-content":void 0,children:t.map((function(e,t){return(0,s.jsx)(o.OK,{"data-testid":"tab-".concat(e.label),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:a.fontSize,fontWeight:"500",color:"gray.500",isDisabled:e.isDisabled||!1,children:e.label},t)}))}),(0,s.jsx)(o.nP,{children:t.map((function(e,t){return(0,s.jsx)(o.x4,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},t)}))})]}))}},64656:function(e,t,n){n.d(t,{H:function(){return r}});var r=[{label:"Yes",value:"true"},{label:"No",value:"false"}]},78733:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(56661),i=function(e){return(0,r.Ln)({id:"string"},e)},o=function(e){return(null!==e&&void 0!==e?e:[]).filter(i)}},24524:function(e,t,n){n.d(t,{m:function(){return h}});var r=n(50029),i=n(27812),o=n(59499),s=n(16835),l=n(87794),a=n.n(l),c=n(67294),u=n(53700),d=n(70783),p=n(41438),f=n(78733);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.resourceFidesKey,n=e.resourceType,o=(0,d.VY)(),l=o.errorAlert,m=o.successAlert,h=(0,u.hz)(),v=h.flags,b=h.plus,j=v.customFields&&b,g=(0,c.useMemo)((function(){return null!==t&&void 0!==t?t:""}),[]),y=(0,p.YU)(!0,{skip:!j}),O=(0,p.VN)(n,{skip:!j}),C=(0,p.PV)(null!==t&&void 0!==t?t:"",{skip:""!==g&&!(j&&g)}),w=(0,p.kg)({fixedCacheKey:t}),S=(0,s.Z)(w,2),P=S[0],_=S[1],D=(0,p.v1)({fixedCacheKey:t}),T=(0,s.Z)(D,2),k=T[0],A=T[1],E=y.isLoading||O.isLoading||C.isLoading||_.isLoading||A.isLoading,I=(0,c.useMemo)((function(){return new Map((0,f.k)(y.data).map((function(e){var t;return[e.id,x(x({},e),{},{options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map((function(e){return{value:e,label:e}}))})]})))}),[y.data]),z=(0,c.useMemo)((function(){return new Map((0,f.k)(O.data).map((function(e){return[e.id,e]})))}),[O]),F=(0,c.useMemo)((function(){return new Map((0,f.k)(C.data).map((function(e){return[e.custom_field_definition_id,e]})))}),[C]),Z=(0,c.useMemo)((function(){var e=(0,i.Z)(z.keys());return e.sort(),e}),[z]),R=(0,c.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.fides_key||t){e.next=3;break}return e.abrupt("return");case 3:if(o=r.definitionIdToCustomFieldValue){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,Promise.allSettled(Z.map((function(e){var t=F.get(e),n=o[e];if(void 0===n||""===n||Array.isArray(n)&&0===n.length){if(null===t||void 0===t||!t.id)return;return k(t)}var r={custom_field_definition_id:e,resource_id:i,id:null===t||void 0===t?void 0:t.id,value:n};return P(r)})));case 9:m("Custom field(s) successfully saved and added to this ".concat(n," form.")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),l("One or more custom fields have failed to save, please try again."),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[F,k,l,t,n,Z,m,P]);return{definitionIdToCustomField:F,idToAllowListWithOptions:I,idToCustomFieldDefinition:z,isEnabled:j,isLoading:E,sortedCustomFieldDefinitionIds:Z,upsertCustomFields:R}}},1883:function(e,t,n){n.d(t,{uc:function(){return oe},mZ:function(){return ie.m}});var r,i=n(67294),o=n(85893),s=n(10061),l=n(68045);!function(e){e[e.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",e[e.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS"}(r||(r={}));var a=[{label:"Single select",value:l.AL.STRING},{label:"Multiple select",value:l.AL.STRING_}],c=[{label:(0,s.kC)(l.P6.DATA_CATEGORY),value:l.P6.DATA_CATEGORY},{label:(0,s.kC)(l.P6.DATA_SUBJECT),value:l.P6.DATA_SUBJECT},{label:(0,s.kC)(l.P6.DATA_USE),value:l.P6.DATA_USE},{label:(0,s.kC)(l.P6.SYSTEM),value:l.P6.SYSTEM}],u=n(59499),d=n(50029),p=n(16835),f=n(87794),m=n.n(f),x=n(37178),h=n(23256),v=n(82350),b=n(82175),j=n(56661),g=n(74231),y=n(96016),O=n(65698),C=n(70783),w=n(41438),S=n(4730),P=n(27634),_=n(26894),D=n(30268),T=n(86211),k=n(48591),A=["disabled","displayHelpIcon","helpIconVisibility","isRequired","label","type"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={color:"gray.600",fontSize:"14px",fontWeight:"semibold",minWidth:"150px"},F=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.displayHelpIcon,i=void 0===r||r,s=e.helpIconVisibility,l=void 0!==s&&s,a=e.isRequired,c=void 0!==a&&a,u=e.label,d=e.type,f=void 0===d?"text":d,m=(0,S.Z)(e,A),x=(0,b.U$)(m),v=(0,p.Z)(x,2),j=v[0],g=v[1],y="custom-input-".concat(j.name);return(0,o.jsxs)(P.NI,{display:"flex",isRequired:c,isInvalid:!(!g.error||!g.touched),children:[u&&(0,o.jsx)(P.lX,I(I({htmlFor:m.id||m.name},z),{},{children:u})),(0,o.jsxs)(h.gC,{align:"flex-start",w:"inherit",children:["number"===f&&(0,o.jsxs)(_.Y2,{allowMouseWheel:!0,color:"gray.700",defaultValue:0,min:0,size:"sm",children:[(0,o.jsx)(_.zu,I(I({},j),{},{autoComplete:"off",autoFocus:m.autoFocus,"data-testid":y})),(0,o.jsxs)(_.Fi,{children:[(0,o.jsx)(_.WQ,{}),(0,o.jsx)(_.Y_,{})]})]}),"text"===f&&(0,o.jsx)(D.II,I(I({},j),{},{autoComplete:"off",autoFocus:m.autoFocus,color:"gray.700",isDisabled:n,placeholder:m.placeholder,size:"sm","data-testid":y})),"textarea"===f&&(0,o.jsx)(T.g,I(I({},j),{},{autoComplete:"off",autoFocus:m.autoFocus,color:"gray.700",placeholder:m.placeholder,resize:"none",size:"sm",value:j.value||"","data-testid":y})),(0,o.jsx)(P.J1,{children:g.error})]}),i&&(0,o.jsx)(h.kC,{alignContent:"center",h:"32px",visibility:l?"visible":"hidden",children:(0,o.jsx)(k.IT,{marginLeft:"8px",_hover:{cursor:"pointer"}})})]})},Z=function(e){var t=e.children;return(0,o.jsx)(h.gC,{alignItems:"stretch",flexShrink:0,gap:"18px",h:"434px",overflow:"auto",children:t})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={active:!0,allow_list_id:void 0,description:void 0,field_type:l.AL.STRING,name:"",resource_type:l.P6.DATA_CATEGORY},M=g.Ry().shape({allow_list_id:g.Z_().required("Select custom list is required"),name:g.Z_().required("Name is required").trim()}),H=(0,x.Gp)((function(e,t){var n,r=e.onSubmitComplete,s=e.resourceType,l=(0,C.VY)(),u=l.errorAlert,f=l.successAlert,x=(0,i.useRef)(null),g=(0,w.YU)(!1).data,S=(0,w.Ld)(),P=(0,p.Z)(S,1)[0],_=function(){var e=(0,d.Z)(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:"error"in(i=e.sent)?u((0,O.e$)(i.error),"Custom field has failed to save due to the following:"):(n.resetForm(),f("Custom field successfully saved")),r();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=(0,i.useMemo)((function(){return(null!==g&&void 0!==g?g:[]).filter((0,j.uX)({name:"string",id:"string"})).map((function(e){return{label:e.name,value:e.id}}))}),[g]);(0,i.useImperativeHandle)(t,(function(){return{getDirty:function(){var e=!1;return x.current&&(e=x.current.dirty),e},submitForm:function(){x.current&&x.current.submitForm()}}}),[]);var T=V(V({},L),{},{resource_type:s,allow_list_id:null===(n=D[0])||void 0===n?void 0:n.value});return(0,o.jsx)(Z,{children:(0,o.jsx)(b.J9,{enableReinitialize:!0,initialValues:T,innerRef:x,onSubmit:_,validationOnBlur:!1,validationOnChange:!1,validationSchema:M,children:function(e){return(0,o.jsxs)(b.l0,{"data-testid":"create-custom-fields-form",noValidate:!0,children:[(0,o.jsxs)(h.kC,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:[(0,o.jsx)(F,{displayHelpIcon:!1,isRequired:!0,label:"Name",name:"name",placeholder:""}),(0,o.jsx)(F,{displayHelpIcon:!1,height:"100px",label:"Description",name:"description",placeholder:"",type:"textarea"}),(0,o.jsx)(y.AP,{label:"Field type",labelProps:z,name:"field_type",options:a}),(0,o.jsx)(y.AP,{isRequired:!0,label:"Select custom list",labelProps:z,menuPosition:"fixed",name:"allow_list_id",options:D}),(0,o.jsx)(y.AP,{isDisabled:!0,label:"Resource type",labelProps:z,name:"resource_type",options:c})]}),(0,o.jsxs)(h.kC,{background:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"6px",flexDirection:"column",gap:"4px",padding:"16px",children:[(0,o.jsxs)(h.kC,{children:[(0,o.jsx)(h.xv,{color:"gray.600",fontWeight:"semibold",lineHeight:"20px",size:"sm",children:"Show in forms and reports"}),(0,o.jsx)(h.LZ,{}),(0,o.jsx)(b.gN,{name:"active",children:function(t){var n=t.field;return(0,o.jsx)(v.r,V(V({},n),{},{colorScheme:"secondary",isChecked:e.values.active,onChange:function(e){n.onChange(e)},size:"sm"}))}})]}),(0,o.jsx)(h.xv,{color:"gray.600",fontWeight:"light",lineHeight:"20px",size:"sm",children:"Turn this off to hide this field from this form and data map reports. You can turn hidden fields back on at any time from the library tab."})]})]})}})})})),B=n(43894),U=n(83703),W=(0,U.IU)({displayName:"AddIcon",viewBox:"0 0 10 10",path:(0,o.jsx)("path",{d:"M4.33331 4.33398V0.333984H5.66665V4.33398H9.66665V5.66732H5.66665V9.66732H4.33331V5.66732H0.333313V4.33398H4.33331Z",fill:"currentColor"})}),N=(0,U.IU)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,o.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})}),Y={allowed_values:[""],description:void 0,id:void 0,name:""},q=g.Ry().shape({name:g.Z_().required("Name is required").trim(),allowed_values:g.IX(g.Z_().required("List item is required")).min(1,"Must add at least one list value").label("allowed_values")}),G=(0,x.Gp)((function(e,t){var n=e.onSubmitComplete,r=(0,C.VY)(),s=r.errorAlert,l=r.successAlert,a=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useState)(!1),f=u[0],x=u[1],v=(0,w.Nt)(),j=(0,p.Z)(v,1)[0],g=function(){var e=(0,d.Z)(m().mark((function e(t,r){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(new Set(t.allowed_values.map((function(e){return e.toLowerCase().trim()})).map((function(e){return e}))).size<t.allowed_values.length)){e.next=4;break}return s("List item value must be unique"),e.abrupt("return");case 4:return e.next=6,j(t);case 6:"error"in(i=e.sent)?s((0,O.e$)(i.error),"Custom list has failed to save due to the following:"):(r.resetForm(),l("Custom list successfully saved")),n();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){f&&c.current&&(c.current.scrollIntoView({behavior:"smooth"}),x(!1))}),[f]),(0,i.useImperativeHandle)(t,(function(){return{getDirty:function(){var e=!1;return a.current&&(e=a.current.dirty),e},submitForm:function(){a.current&&a.current.submitForm()}}}),[]),(0,o.jsx)(Z,{children:(0,o.jsx)(b.J9,{enableReinitialize:!0,initialValues:Y,innerRef:a,onSubmit:g,validationOnBlur:!1,validationOnChange:!1,validationSchema:q,children:function(e){return(0,o.jsx)(b.l0,{"data-testid":"create-custom-lists-form",noValidate:!0,children:(0,o.jsxs)(h.kC,{flexDirection:"column",gap:"12px",paddingTop:"6px",paddingBottom:"24px",children:[(0,o.jsx)(F,{displayHelpIcon:!1,isRequired:!0,label:"Name",name:"name",placeholder:""}),(0,o.jsx)(F,{displayHelpIcon:!1,height:"100px",label:"Description",name:"description",placeholder:"",type:"textarea"}),(0,o.jsx)(b.F2,{name:"allowed_values",render:function(t){var n=e.values.allowed_values;return(0,o.jsxs)(h.kC,{flexDirection:"column",gap:"24px",pl:"24px",children:[(0,o.jsx)(h.kC,{flexDirection:"column",children:n.map((function(e,r){return(0,o.jsxs)(h.kC,{alignItems:"baseline",flexGrow:1,gap:"12px",mt:r>0?"12px":void 0,ref:c,children:[(0,o.jsxs)(h.xv,{color:"gray.600",fontSize:"sm",fontWeight:"500",lineHeight:"20px",minW:"126px",pr:"8px",children:["List item ",r+1]}),(0,o.jsx)(F,{displayHelpIcon:!1,name:"allowed_values[".concat(r,"]")}),(0,o.jsx)(B.hU,{"aria-label":"Remove this list value","data-testid":"remove-list-value-btn-".concat(r),icon:(0,o.jsx)(N,{}),isDisabled:n.length<=1,onClick:function(){return t.remove(r)},size:"sm",variant:"ghost"})]},r)}))}),(0,o.jsxs)(h.kC,{alignItems:"center",children:[(0,o.jsx)(h.xv,{color:"gray.600",fontSize:"xs",fontWeight:"500",lineHeight:"16px",pr:"8px",children:"Add a list value"}),(0,o.jsx)(B.hU,{"aria-label":"Add a list value","data-testid":"add-list-value-btn",icon:(0,o.jsx)(W,{h:"7px",w:"7px"}),onClick:function(){t.push(""),x(!0)},size:"xs",variant:"outline"}),0===n.length&&(0,o.jsx)(h.xv,{color:"red.500",pl:"18px",size:"sm",children:e.errors.allowed_values})]})]})}})]})})}})})})),K=n(13230),J=function(e){var t=e.btnRef,n=e.hasTooltip,r=void 0!==n&&n,i=e.onClick;return(0,o.jsxs)(h.kC,{alignItems:"center",gap:"8px",children:[(0,o.jsx)(B.hU,{"aria-label":"Add a custom field","data-testid":"add-custom-field-btn",icon:(0,o.jsx)(W,{h:"10px",w:"10px"}),onClick:i,ref:t,size:"sm",variant:"outline",_hover:{cursor:"pointer"}}),(0,o.jsx)(h.xv,{fontWeight:"500",fontSize:"sm",color:"gray.700",children:"Add a custom field"}),r&&(0,o.jsx)(K.Z,{label:""})]})},X=n(44359),$=function(e){var t,n=e.allowList,r=e.customField,s=e.customFieldDefinition,a="definitionIdToCustomFieldValue.".concat(s.id),c=s.name,u=s.description,d=n.options,f=(0,b.U$)({name:a}),m=(0,p.Z)(f,3),x=m[1],h=m[2];return(0,i.useEffect)((function(){null!==r&&void 0!==r&&r.value&&(x.touched||h.setValue(s.field_type!==l.AL.STRING?r.value:r.value.toString(),!1))}),[]),(0,o.jsx)(y.AP,{isClearable:!0,isMulti:s.field_type!==l.AL.STRING,label:c,name:a,options:d,tooltip:u,defaultValue:null!==(t=null===r||void 0===r?void 0:r.value)&&void 0!==t?t:""})},Q=n(97375),ee=n(26537),te=n(58144),ne=n(52313),re=function(e){var t=e.resourceType,n=(0,Q.qY)(),s=n.isOpen,l=n.onOpen,a=n.onClose,c=(0,i.useRef)(null),u=(0,i.useRef)(null),d=(0,i.useRef)(null),p=(0,i.useRef)(null),f=r.CREATE_CUSTOM_FIELDS,m=(0,i.useState)(f),x=m[0],v=m[1],b=(0,i.useState)(!1),j=b[0],g=b[1],y=(0,i.useState)(!1),O=y[0],C=y[1],w=function(){var e;switch(x){case r.CREATE_CUSTOM_FIELDS:e=u.current;break;case r.CREATE_CUSTOM_LISTS:e=d.current}return e},S=function(e){var t=w();e||null===t||void 0===t||!t.getDirty()?(v(f),g(!1),a()):C(!0)},P=function(){g(!1)},_=[{label:"Create custom fields",content:(0,o.jsx)(H,{onSubmitComplete:P,ref:u,resourceType:t}),submitButtonText:"Save"},{label:"Create custom lists",content:(0,o.jsx)(G,{onSubmitComplete:P,ref:d}),submitButtonText:"Save to library"}];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.kC,{mb:"20px",children:(0,o.jsx)(J,{btnRef:c,onClick:l})}),(0,o.jsxs)(ee.u_,{finalFocusRef:c,initialFocusRef:p,isCentered:!0,isOpen:s,motionPreset:"slideInBottom",onClose:S,children:[(0,o.jsx)(ee.ZA,{}),(0,o.jsxs)(ee.hz,{maxW:"680px",children:[(0,o.jsxs)(ee.xB,{children:[(0,o.jsx)(h.xv,{color:"black",fontSize:"lg",fontWeight:"medium",lineHeight:"36px",children:"Add custom field"}),(0,o.jsx)(h.iz,{color:"gray.200",mt:"8px"}),(0,o.jsx)(h.xu,{mt:"16px",children:(0,o.jsx)(h.xv,{color:"gray.600",fontSize:"sm",fontWeight:"light",lineHeight:"20px",children:"Fill in the information below to add a new custom field to this form or view the library to select from existing custom fields."})})]}),(0,o.jsx)(ee.ol,{size:"sm"}),(0,o.jsx)(ee.fe,{children:(0,o.jsx)(ne.Z,{data:_,defaultIndex:f,fontSize:"sm",flexGrow:1,onChange:function(e){return v(e)}})}),(0,o.jsx)(ee.mz,{justifyContent:"flex-start",padding:"0px 24px 24px 24px",children:(0,o.jsxs)(B.hE,{size:"sm",spacing:"8px",variant:"outline",children:[(0,o.jsx)(B.zx,{onClick:function(){S()},variant:"outline",children:"Cancel"}),(0,o.jsx)(B.zx,{_active:{bg:"primary.500"},_disabled:{opacity:"inherit"},_hover:{bg:"primary.400"},bg:"primary.800",color:"white","data-testid":"custom-fields-modal-submit-btn",isDisabled:j,isLoading:j,loadingText:"Submitting",onClick:function(){var e=w();e&&(e.submitForm(),g(e.isSubmitting))},size:"sm",type:"button",variant:"solid",children:_[x].submitButtonText})]})})]}),(0,o.jsx)(te.Z,{cancelButtonText:"Continue editing",continueButtonText:"Discard",isCentered:!0,isOpen:O,onClose:function(){C(!1)},onConfirm:function(){C(!1),S(!0)},title:"Unsaved changes",message:(0,o.jsx)(h.xv,{color:"gray.500",children:"You have unsaved changes, are you sure you want to discard?"})})]})]})},ie=n(24524),oe=function(e){var t=e.resourceFidesKey,n=e.resourceType,r=(0,ie.m)({resourceFidesKey:t,resourceType:n}),i=r.definitionIdToCustomField,s=r.idToAllowListWithOptions,a=r.idToCustomFieldDefinition,c=r.isEnabled,u=r.isLoading,d=r.sortedCustomFieldDefinitionIds;return c?(0,o.jsx)(h.kC,{flexDir:"column",mt:n===l.P6.SYSTEM?"28px":"","data-testid":"custom-fields-list",children:(0,o.jsxs)(h.kC,{flexDir:"column",gap:"24px",children:[(0,o.jsx)(h.iz,{color:"gray.200"}),(0,o.jsx)(h.kC,{flexDir:"column",gap:"12px",children:(0,o.jsx)(h.xv,{color:"gray.900",fontSize:"md",fontWeight:"semibold",lineHeight:"24px",children:"Custom fields"})}),(0,o.jsx)(re,{resourceType:n}),u?(0,o.jsx)(h.M5,{children:(0,o.jsx)(X.$,{})}):(0,o.jsx)(h.kC,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:d.map((function(e){var t=a.get(e);if(!t)return null;var n=s.get(t.allow_list_id);if(!n)return null;var r=i.get(e);return(0,o.jsx)($,{allowList:n,customField:r,customFieldDefinition:t},"".concat(e,"-").concat(null===r||void 0===r?void 0:r.id))}))})]})}):null};n(78733)},70783:function(e,t,n){n.d(t,{HK:function(){return o},VY:function(){return r.V}});var r=n(63719),i=n(65698),o=function(){var e=(0,r.V)().errorAlert;return{handleError:function(t){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?n=t.data.detail:(0,i.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}};n(67294)},63719:function(e,t,n){n.d(t,{V:function(){return d}});var r=n(59499),i=n(13450),o=n(26707),s=n(23256),l=n(93225),a=n(85893);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(t,n,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:t})]}),(0,a.jsx)(l.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)},successAlert:function(t,n,r){var i=u(u({},r),{},{position:(null===r||void 0===r?void 0:r.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:t})]}),(0,a.jsx)(l.P,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});null!==r&&void 0!==r&&r.id&&e.isActive(r.id)?e.update(r.id,i):e(i)}}}},77046:function(e,t,n){var r=n(59499),i=n(4730),o=n(85657),s=n(85893),l=["name","onClose"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.name,n=e.onClose,r=(0,i.Z)(e,l),a=c({backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(t),width:"fit-content",size:"sm"},r);return n?(0,s.jsxs)(o.Vp,c(c({display:"flex",justifyContent:"space-between"},a),{},{children:[(0,s.jsx)(o.Sn,{children:t}),(0,s.jsx)(o.SD,{onClick:n,color:"white"})]})):(0,s.jsx)(o.Vp,c(c({},a),{},{children:t}))}}}]);