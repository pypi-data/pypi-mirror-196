(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{49743:function(e,r,t){"use strict";var n=t(59499),s=t(4730),i=t(30268),c=t(48591),o=t(85893),a=["search","onChange"];function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.search,t=e.onChange,n=(0,s.Z)(e,a);return(0,o.jsxs)(i.BZ,{size:"sm",minWidth:"308px",children:[(0,o.jsx)(i.Z8,{pointerEvents:"none",children:(0,o.jsx)(c.PT,{color:"gray.300",w:"17px",h:"17px"})}),(0,o.jsx)(i.II,u({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:r,name:"search",onChange:function(e){return t(e.target.value)}},n))]})}},10846:function(e,r,t){"use strict";t.d(r,{V:function(){return h},t:function(){return d}});var n=t(59499),s=t(23256),i=t(85893);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var a=function(e){var r=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,i.jsx)(a,{message:e});return o(o({},u),{description:r})},h=function(e){var r=(0,i.jsx)(l,{message:e});return o(o({},u),{description:r,status:"error"})}},69349:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return W}});var n=t(23256),s=(t(67294),t(14416)),i=t(59499),c=t(78522),o=t(43894),a=t(43072),l=t(97375),u=t(37991),d=t(48591),h=t(86589),p=t(11163),j=t(18459),f=t(4730),m=t(50029),b=t(16835),x=t(87794),O=t.n(x),g=t(13450),y=t(26537),v=t(82175),w=t(74231),P=t(96016),S=t(65698),C=t(10846),D=t(85893),z=["user"],_={username:"",usernameConfirmation:""},N=function(e){var r=e.user,t=(0,f.Z)(e,z),s=t.isOpen,i=t.onClose,c=function(e){var r=e.id,t=e.username,n=e.onClose,s=(0,g.pm)(),i=(0,a.I1)(),c=(0,b.Z)(i,1)[0],o=function(){var e=(0,m.Z)(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(r);case 2:t=e.sent,(0,S.D4)(t)?s((0,C.V)((0,S.e$)(t.error))):(s((0,C.t)("Successfully deleted user")),n());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleDeleteUser:o,validationSchema:w.Ry().shape({username:w.Z_().required().oneOf([t],"Username must match this user's").label("Username"),usernameConfirmation:w.Z_().required().oneOf([w.iH("username")],"Usernames must match").label("Username confirmation")})}}({id:r.id,username:r.username,onClose:i}),l=c.handleDeleteUser,u=c.validationSchema;return(0,D.jsxs)(y.u_,{isCentered:!0,isOpen:s,onClose:i,children:[(0,D.jsx)(y.ZA,{}),(0,D.jsx)(y.hz,{"data-testid":"delete-user-modal",children:(0,D.jsx)(v.J9,{initialValues:_,validationSchema:u,onSubmit:l,children:function(e){var r=e.isSubmitting,t=e.dirty,s=e.isValid;return(0,D.jsxs)(v.l0,{children:[(0,D.jsx)(y.xB,{children:"Delete User"}),(0,D.jsx)(y.ol,{}),(0,D.jsx)(y.fe,{children:(0,D.jsxs)(n.Kq,{direction:"column",spacing:4,children:[(0,D.jsx)(P.j0,{name:"username",label:"Enter username"}),(0,D.jsx)(P.j0,{name:"usernameConfirmation",label:"Confirm username"})]})}),(0,D.jsx)(y.mz,{children:(0,D.jsxs)(o.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,D.jsx)(o.zx,{onClick:i,variant:"outline",width:"50%",children:"Cancel"}),(0,D.jsx)(o.zx,{colorScheme:"primary",disabled:!t||!s,isLoading:r,type:"submit",width:"50%","data-testid":"submit-btn",children:"Delete User"})]})})]})}})})]})};function E(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?E(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var T=function(e){var r=e.user,t=(0,p.useRouter)(),s=(0,l.qY)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(c.Tr,{_hover:{bg:"gray.50"},height:"36px","data-testid":"row-".concat(r.id),children:[(0,D.jsx)(c.Td,{pl:0,py:1,children:r.organization_fides_key}),(0,D.jsx)(c.Td,{pl:0,py:1,children:r.username}),(0,D.jsx)(c.Td,{pl:0,py:1,children:r.first_name}),(0,D.jsx)(c.Td,{pl:0,py:1,children:r.last_name}),(0,D.jsx)(c.Td,{pl:0,py:1,children:r.created_at?new Date(r.created_at).toUTCString():null}),(0,D.jsx)(c.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,D.jsx)(o.hE,{children:(0,D.jsxs)(u.v2,{children:[(0,D.jsx)(u.j2,{as:o.zx,size:"xs",bg:"white","data-testid":"menu-btn",children:(0,D.jsx)(d.nX,{color:"gray.700",w:18,h:18})}),(0,D.jsx)(h.h_,{children:(0,D.jsxs)(u.qy,{shadow:"xl","data-testid":"menu-".concat(r.id),children:[(0,D.jsx)(u.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:function(){t.push("".concat(j.e3,"/profile/").concat(r.id))},"data-testid":"edit-btn",children:(0,D.jsx)(n.xv,{fontSize:"sm",children:"Edit"})}),(0,D.jsx)(u.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:s.onOpen,"data-testid":"delete-btn",children:(0,D.jsx)(n.xv,{fontSize:"sm",children:"Delete"})})]})})]})})})]},r.id),(0,D.jsx)(N,k({user:r},s))]})};function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var A=function(){var e=function(){var e=(0,s.useDispatch)(),r=(0,s.useSelector)(a.lq),t=(0,a.Aw)(r),n=t.data,i=t.isLoading,c=n||{users:[],total:0},o=c.items,l=c.total;return U(U({},r),{},{isLoading:i,users:o,total:l,handleNextPage:function(){e((0,a.YA)(r.page+1))},handlePreviousPage:function(){e((0,a.YA)(r.page-1))}})}(),r=e.users,t=e.total,i=e.page,l=e.size,u=e.handleNextPage,d=e.handlePreviousPage,h=(i-1)*l+1,p=Math.min(t,i*l);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(c.iA,{size:"sm","data-testid":"user-management-table",children:[(0,D.jsx)(c.hr,{children:(0,D.jsxs)(c.Tr,{children:[(0,D.jsx)(c.Th,{pl:0,children:"Organization"}),(0,D.jsx)(c.Th,{pl:0,children:"Username"}),(0,D.jsx)(c.Th,{pl:0,children:"First Name"}),(0,D.jsx)(c.Th,{pl:0,children:"Last Name"}),(0,D.jsx)(c.Th,{pl:0,children:"Created At"}),(0,D.jsx)(c.Th,{pl:0,children:"\xa0"})]})}),(0,D.jsx)(c.p3,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,D.jsx)(T,{user:e},e.id)}))})]}),(0,D.jsxs)(n.kC,{justifyContent:"space-between",mt:6,children:[(0,D.jsx)(n.xv,{fontSize:"xs",color:"gray.600",children:t>0?(0,D.jsxs)(D.Fragment,{children:["Showing ",Number.isNaN(h)?0:h," to"," ",Number.isNaN(p)?0:p," of"," ",Number.isNaN(t)?0:t," results"]}):"0 results"}),(0,D.jsxs)("div",{children:[(0,D.jsx)(o.zx,{disabled:i<=1,onClick:d,mr:2,size:"sm",children:"Previous"}),(0,D.jsx)(o.zx,{disabled:i*l>=t,onClick:u,size:"sm",children:"Next"})]})]})]})};A.defaultProps={users:[]};var q=A,F=t(41664),X=t.n(F),L=t(49743);function V(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var Y=function(){var e=(0,s.useSelector)(a.lq),r=(0,s.useDispatch)();return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?V(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({handleSearchChange:function(e){r((0,a.SY)(e))}},e)},I=function(){var e=Y(),r=e.handleSearchChange,t=e.username;return(0,D.jsxs)(n.Kq,{direction:"row",spacing:4,mb:6,children:[(0,D.jsx)(L.Z,{search:t,onChange:r,placeholder:"Search by Username"}),(0,D.jsx)(X(),{href:"".concat(j.e3,"/new"),passHref:!0,children:(0,D.jsx)(o.zx,{colorScheme:"primary",flexShrink:0,size:"sm",children:"Add New User"})})]})},M=t(37161),R=t(17140),W=function(){var e={organization:(0,s.useSelector)(M.mT).organization_fides_key}.organization;return(0,D.jsxs)(R.Z,{title:"User Management",children:[(0,D.jsxs)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:[" ",(0,D.jsx)(n.X6,{as:"span",color:"#53A3FF",fontSize:"2xl",children:e})," ","=> User Management"]}),(0,D.jsx)(I,{}),(0,D.jsx)(q,{})]})}},58769:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return t(69349)}])}},function(e){e.O(0,[5372,7601,248,2350,6648,4231,8522,7140,7080,9774,2888,179],(function(){return r=58769,e(e.s=r);var r}));var r=e.O();_N_E=r}]);