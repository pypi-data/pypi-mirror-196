(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4841],{33699:function(n,t,e){"use strict";e.d(t,{y:function(){return O},Z:function(){return X}});var r=e(89565),i=e.n(r),o=e(56085),a=e(82684),c=e(35490),u=e(47999),l=e(67971),s=e(82635),d=e(86673),f=e(54283),p=e(19711),h=e(9518),g=e(23831),v=e(49125),y=e(37391),m=(0,h.css)([""," ",""],(function(n){return!n.width&&"\n    width: 100%;\n  "}),(function(n){return n.width&&"\n    width: ".concat(n.width,"px;\n  ")})),b=h.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-11d4rgl-0"})([""," "," height:100%;overflow:auto;position:absolute;",""],m,y.w5,(function(n){return"\n    background-color: ".concat((n.theme.background||g.Z.background).codeTextarea,";\n  ")})),x=h.default.div.withConfig({displayName:"indexstyle__InnerStyle",componentId:"sc-11d4rgl-1"})([""," padding:","px;"],m,v.cd*v.iI),S=h.default.div.withConfig({displayName:"indexstyle__LineStyle",componentId:"sc-11d4rgl-2"})(["height:","px;"],20),w=(0,h.css)(["@keyframes cursor-blink{0%{opacity:0;}}::before{","}::after{","}"],(function(n){return n.focusBeginning&&"\n      position: absolute;\n      background-color: ".concat((n.theme.accent||g.Z.accent).warning,';\n      content: "";\n      display: inline-block;\n      height: ').concat(20,"px;\n      width: ").concat(v.iI,"px;\n      opacity: 0.3;\n    ")}),(function(n){return n.focused&&"\n      background-color: ".concat((n.theme.accent||g.Z.accent).warning,';\n      content: "";\n      display: inline-block;\n      height: ').concat(20,"px;\n      width: ").concat(v.iI,"px;\n      opacity: 0.3;\n    ")})),T=h.default.div.withConfig({displayName:"indexstyle__InputStyle",componentId:"sc-11d4rgl-3"})(["align-items:center;display:flex;gap:2px;",""],w),k=h.default.span.withConfig({displayName:"indexstyle__CharacterStyle",componentId:"sc-11d4rgl-4"})([""," ::after{","}"],w,(function(n){return n.focused&&"\n      position: absolute;\n    "})),_=e(16115),E=e(94353),P=e(28799),I=e(51504),j=e(66653),Z=e(41150),A=e(28598);function C(n,t){var e="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=function(n,t){if(!n)return;if("string"===typeof n)return N(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return N(n,t)}(n))||t&&n&&"number"===typeof n.length){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return a=n.done,n},e:function(n){c=!0,o=n},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function N(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var O="terminal";var X=function(n){var t=n.interruptKernel,e=n.onFocus,r=n.uuid,h=void 0===r?O:r,g=n.width,v=(0,a.useRef)(null),y=(0,a.useRef)(null),m=(0,a.useState)(!1),w=m[0],N=m[1],X=(0,a.useState)(""),M=X[0],R=X[1],D=(0,a.useState)(0),U=D[0],F=D[1],G=(0,a.useState)(""),L=G[0],Y=G[1],K=(0,a.useState)(0),B=K[0],Q=K[1],z=(0,a.useState)([]),H=z[0],q=z[1],J=(0,a.useState)(!1),V=J[0],W=J[1],$=(0,a.useState)([]),nn=$[0],tn=$[1],en=(0,o.ZP)((0,P.Ib)(),{shouldReconnect:function(){return!0}}),rn=en.lastMessage,on=(en.readyState,en.sendMessage);(0,a.useEffect)((function(){if(rn){var n=null!==rn&&void 0!==rn&&rn.data?JSON.parse(rn.data):null;(null===n||void 0===n?void 0:n.uuid)===h&&(s.uF.BUSY===(null===n||void 0===n?void 0:n.execution_state)?N(!0):s.uF.IDLE===(null===n||void 0===n?void 0:n.execution_state)&&N(!1),tn((function(t){return n?t.concat(n):t})))}}),[rn,N,tn,h]),(0,a.useEffect)((function(){if(v.current&&y.current){var n=y.current.getBoundingClientRect().height;v.current.scrollTo(0,n)}}),[nn,v,y]);var an=(0,Z.y)(),cn=an.registerOnKeyDown,un=an.setDisableGlobalKeyboardShortcuts,ln=an.unregisterOnKeyDown;(0,a.useEffect)((function(){return function(){ln(h)}}),[ln,h]);var sn=(0,a.useCallback)((function(){Q((function(n){return n>0?n-1:n}))}),[]),dn=(0,a.useCallback)((function(){Q((function(n){return n<=M.length?n+1:n}))}),[M]),fn=(0,a.useCallback)((function(n){var t=(null===n||void 0===n?void 0:n.split(/\n/))||[];if(t.length>1){var e=t.slice(0,-1);e[0]=M+e[0];var r=e.map((function(n,t){return{command:0===t,data:n,type:s.Gi.TEXT}}));F(H.length+e.length),q((function(n){return n.concat(e)})),tn((function(n){return n.concat(r)})),Y((function(n){return n+e.join("\n")}));var i=(t.slice(-1)[0]||"").trim();R(i),Q(i.length)}else R((function(t){return t+n})),Q(M.length+n.length)}),[M,H]);return cn(h,(function(n,e,r){var i=n.code,o=n.key;if(V)if((0,j.j)(n),(0,I.y)([_.PQ,_.VS],e))N(!1),tn((function(n){var t;return n.concat({command:!0,data:(null===M||void 0===M||null===(t=M.trim())||void 0===t?void 0:t.length)>=1?M:"\n",type:s.Gi.TEXT})})),R(""),t();else if(!w)if(_.Qj!==i||e[_.zX])if((0,I.y)([_.QK],e))sn();else if((0,I.y)([_.DY],e))dn();else if((0,I.y)([_.Bu],e)){if(H.length>=1){var a,u=Math.max(0,U-1);R(H[u]),F(u),Q((null===(a=H[u])||void 0===a?void 0:a.length)||0)}}else if((0,I.y)([_.kD],e)){if(H.length>=1){var l=Math.min(H.length,U+1),d=H[l]||"";R(d),F(l),Q(d.length)}}else if((0,I.y)([_.Uq],e)){var f=L+M;(null===f||void 0===f?void 0:f.length)>=1&&(N(!0),on(JSON.stringify({api_key:E.l,code:"!".concat(f),token:(new c.Z).decodedToken.token,uuid:h})),F(H.length+1),q((function(n){return n.concat(M)})),Q(0)),tn((function(n){var t;return n.concat({command:!0,data:(null===M||void 0===M||null===(t=M.trim())||void 0===t?void 0:t.length)>=1?M:"\n",type:s.Gi.TEXT})})),Y(""),R("")}else if((0,I.y)([_.zX,_.VS],e))navigator.clipboard.writeText(window.getSelection().toString());else if((0,I.y)([_.zX,_.Pd],e)||(0,I.y)([_.PQ,_.Pd],e)){var p,g,v;"undefined"===typeof(null===(p=navigator)||void 0===p?void 0:p.clipboard)?alert('Clipboard pasting is not allowed in insecure contexts. If your Mage deployment is not secure but you still want to use clipboard paste, you can override this setting (which should only be done temporarily) on Chrome browsers by going to "chrome://flags/#unsafely-treat-insecure-origin-as-secure", adding your origin to "Insecure origins treated as secure", and enabling that setting.'):null!==(g=navigator)&&void 0!==g&&null!==(v=g.clipboard)&&void 0!==v&&v.readText?navigator.clipboard.readText().then(fn).catch((function(n){return alert("".concat(n,'\n    For Chrome, users need to allow clipboard permissions for this site under "Privacy and security" -> "Site settings".\n    For Safari, users need to allow the clipboard paste by clicking "Paste" in the context menu that appears.'))})):navigator.clipboard.read().then((function(n){var t,e=C(n);try{for(e.s();!(t=e.n()).done;){var r,i=t.value,o=C(i.types);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("text/plain"===a)return i.getType(a)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){e.e(c)}finally{e.f()}})).then((function(n){return n.text()})).then(fn).catch((function(n){return alert("".concat(n,'\n    For Firefox, users need to allow clipboard paste by setting the "dom.events.asyncClipboard.read" preference in "about:config" to "true" and clicking "Paste" in the context menu that appears.'))}))}else e[_.zX]||e[_.PQ]||1!==o.length||(R((function(n){return n.slice(0,B)+o+n.slice(B)})),dn());else{var y=Math.max(0,B-1);R((function(n){return n.slice(0,y)+n.slice(B)})),Q((function(n){return Math.max(0,n-1)}))}}),[w,M,H,U,V,t,N,R,q,F,tn,h]),(0,A.jsx)(b,{ref:v,width:g,children:(0,A.jsx)(u.Z,{isOpen:!0,onClick:function(){null===e||void 0===e||e(),W(!0),un(!0)},onClickOutside:function(){W(!1),un(!1)},style:{minHeight:"100%"},children:(0,A.jsxs)(x,{ref:y,width:g,children:[null===nn||void 0===nn?void 0:nn.reduce((function(n,t,e){var r=t||{},o=r.command,a=r.data,c=r.type,u=[];u=(u=Array.isArray(a)?a:[a]).filter((function(n){return n}));var d=[];return u.forEach((function(n,t){var r;if(s.jU.includes(c)&&(r=(0,A.jsxs)(p.ZP,{monospace:!0,noWrapping:!0,pre:!0,children:[n&&(0,A.jsx)(i(),{children:n}),!n&&(0,A.jsx)(A.Fragment,{children:"\xa0"})]})),r){var a="command-".concat(e,"-").concat(t,"-").concat(n);o?d.push((0,A.jsx)(S,{children:(0,A.jsxs)(l.Z,{alignItems:"center",children:[(0,A.jsx)(p.ZP,{inline:!0,monospace:!0,warning:!0,children:"\u2192\xa0"}),r]})},a)):d.push((0,A.jsx)(S,{children:r},a))}})),n.concat(d)}),[]),w&&(0,A.jsx)(d.Z,{mt:1,children:(0,A.jsx)(f.Z,{})}),!w&&(0,A.jsx)(T,{focused:V&&(0===M.length||B>M.length),children:(0,A.jsxs)(p.ZP,{monospace:!0,children:[(0,A.jsx)(p.ZP,{inline:!0,monospace:!0,warning:!0,children:"\u2192\xa0"}),null===M||void 0===M?void 0:M.split("").map((function(n,t){return(0,A.jsxs)(k,{focusBeginning:V&&0===B&&0===t,focused:V&&B===t+1,children:[" "===n&&(0,A.jsx)(A.Fragment,{children:"\xa0"})," "!==n&&n]},"command-".concat(t,"-").concat(n))}))]})})]})})})}},82635:function(n,t,e){"use strict";var r,i;e.d(t,{Gi:function(){return i},jU:function(){return a},uF:function(){return r}}),function(n){n.BUSY="busy",n.IDLE="idle",n.QUEUED="queued"}(r||(r={})),function(n){n.IMAGE_PNG="image/png",n.PROGRESS="progress",n.TABLE="table",n.TEXT="text",n.TEXT_HTML="text/html",n.TEXT_PLAIN="text/plain"}(i||(i={}));var o,a=[i.TEXT,i.TEXT_PLAIN];!function(n){n.DISPLAY_DATA="display_data",n.STATUS="status",n.STREAM="stream",n.STREAM_PIPELINE="stream_pipeline"}(o||(o={}))},98781:function(n,t,e){"use strict";e.d(t,{a:function(){return a},q:function(){return i}});var r,i,o=e(82394);!function(n){n.INTEGRATION="integration",n.PYTHON="python",n.PYSPARK="pyspark",n.STREAMING="streaming"}(i||(i={}));var a=(r={},(0,o.Z)(r,i.PYTHON,"python3"),(0,o.Z)(r,i.PYSPARK,"pysparkkernel"),r)},72433:function(n,t,e){"use strict";e.r(t);var r=e(77837),i=e(75582),o=e(38860),a=e.n(o),c=e(82684),u=e(83455),l=e(70434),s=e(41788),d=e(33699),f=e(82531),p=e(98781),h=e(96510),g=e(28598);function v(){var n=(0,u.Db)(f.ZP.kernels.useUpdate(p.a[p.q.PYTHON]),{onSuccess:function(n){return(0,h.wD)(n,{onErrorCallback:function(n,t){console.log(n),alert(t)}})}}),t=(0,i.Z)(n,1)[0],e=(0,c.useCallback)((function(){return t({kernel:{action_type:"interrupt"}})}),[t]);return(0,g.jsx)(l.Z,{title:"Terminal",uuid:"terminal/index",children:(0,g.jsx)(d.Z,{interruptKernel:e})})}v.getInitialProps=(0,r.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{});case 1:case"end":return n.stop()}}),n)}))),t.default=(0,s.Z)(v)},51504:function(n,t,e){"use strict";e.d(t,{y:function(){return o}});var r=e(75582),i=e(16115);function o(n,t){var e=n.map((function(n){return String(n)})),o=n.includes(i.PQ),a=n.includes(i.zX),c=n.includes(i.XR),u=i.xU.map((function(n){return String(n)})),l=i.vk.map((function(n){return String(n)})),s=i.Tr.map((function(n){return String(n)})),d=Object.entries(t).find((function(n){var t=(0,r.Z)(n,2),i=t[0];return t[1]&&!e.includes(String(i))&&(!a||!l.includes(String(i)))&&(!o||!u.includes(String(i)))&&(!c||!s.includes(String(i)))}));return n.every((function(n){return t[n]}))&&!d}},27271:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal",function(){return e(72433)}])}},function(n){n.O(0,[3850,9565,6085,9767,3573,434,9774,2888,179],(function(){return t=27271,n(n.s=t);var t}));var t=n.O();_N_E=t}]);