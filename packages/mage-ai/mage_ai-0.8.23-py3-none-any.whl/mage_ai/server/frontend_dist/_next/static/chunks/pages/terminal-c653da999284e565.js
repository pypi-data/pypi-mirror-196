(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4841],{1210:function(n,e,t){"use strict";t.d(e,{Z:function(){return P}});var r=t(82394),i=t(21831),o=t(82684),a=t(47999),c=t(28358),u=t(93461),l=t(57384),s=t(19767),d=t(72454),f=t(28598);function h(n,e){var t=n.children;return(0,f.jsx)(d.HS,{ref:e,children:t})}var p=o.forwardRef(h),v=t(32063),g=t(15270),y=t(82531),m=t(66166),b=t(3055),x=t(49125),w=t(91427),S=t(24141);function j(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?j(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var P=function(n){var e,t=n.after,r=n.afterHidden,h=n.afterWidth,j=n.afterWidthOverride,P=n.before,O=n.beforeWidth,T=n.breadcrumbs,_=n.children,E=n.errors,I=n.headerMenuItems,Z=n.navigationItems,C=n.setErrors,A=n.subheaderChildren,N=n.title,M=n.uuid,D=(0,S.i)().width,R="dashboard_after_width_".concat(M),F="dashboard_before_width_".concat(M),X=(0,o.useRef)(null),U=(0,o.useState)(j?h:(0,w.U2)(R,h)),B=U[0],G=U[1],H=(0,o.useState)(!1),L=H[0],Y=H[1],K=(0,o.useState)(P?Math.max((0,w.U2)(F,O),13*x.iI):null),W=K[0],z=K[1],Q=(0,o.useState)(!1),q=Q[0],J=Q[1],V=(0,o.useState)(null)[1],$=y.ZP.projects.list({},{revalidateOnFocus:!1}).data,nn=null===$||void 0===$?void 0:$.projects,en=[];T?en.push.apply(en,(0,i.Z)(T)):(null===nn||void 0===nn?void 0:nn.length)>=1&&en.push.apply(en,[{label:function(){var n;return null===(n=nn[0])||void 0===n?void 0:n.name},linkProps:{href:"/"}},{bold:!0,label:function(){return N}}]),(0,o.useEffect)((function(){null===X||void 0===X||!X.current||L||q||null===V||void 0===V||V(X.current.getBoundingClientRect().width)}),[L,B,q,W,X,V,D]),(0,o.useEffect)((function(){L||(0,w.t8)(R,B)}),[r,L,B,R]),(0,o.useEffect)((function(){q||(0,w.t8)(F,W)}),[q,W,F]);var tn=(0,m.Z)(h);return(0,o.useEffect)((function(){j&&tn!==h&&G(h)}),[j,h,tn]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{title:N}),(0,f.jsx)(s.Z,{breadcrumbs:en,menuItems:I,project:null===nn||void 0===nn?void 0:nn[0],version:null===nn||void 0===nn||null===(e=nn[0])||void 0===e?void 0:e.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===Z||void 0===Z?void 0:Z.length)&&(0,f.jsx)(d.lm,{children:(0,f.jsx)(g.Z,{navigationItems:Z})}),(0,f.jsx)(u.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:t,afterHeightOffset:b.Mz,afterHidden:r,afterMousedownActive:L,afterWidth:B,before:P,beforeHeightOffset:b.Mz,beforeMousedownActive:q,beforeWidth:d.k1+(P?W:0),hideAfterCompletely:!0,leftOffset:P?d.k1:null,mainContainerRef:X,setAfterMousedownActive:Y,setAfterWidth:G,setBeforeMousedownActive:J,setBeforeWidth:z,children:[A&&(0,f.jsx)(p,{children:A}),_]})})]}),E&&(0,f.jsx)(a.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===C||void 0===C?void 0:C(null)},children:(0,f.jsx)(c.Z,k(k({},E),{},{onClose:function(){return null===C||void 0===C?void 0:C(null)}}))})]})}},33699:function(n,e,t){"use strict";t.d(e,{y:function(){return N},Z:function(){return M}});var r=t(89565),i=t.n(r),o=t(56085),a=t(82684),c=t(35490),u=t(47999),l=t(67971),s=t(82635),d=t(86673),f=t(54283),h=t(19711),p=t(9518),v=t(23831),g=t(49125),y=t(37391),m=(0,p.css)([""," ",""],(function(n){return!n.width&&"\n    width: 100%;\n  "}),(function(n){return n.width&&"\n    width: ".concat(n.width,"px;\n  ")})),b=p.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-11d4rgl-0"})([""," "," height:100%;overflow:auto;position:absolute;",""],m,y.w5,(function(n){return"\n    background-color: ".concat((n.theme.background||v.Z.background).codeTextarea,";\n  ")})),x=p.default.div.withConfig({displayName:"indexstyle__InnerStyle",componentId:"sc-11d4rgl-1"})([""," padding:","px;"],m,g.cd*g.iI),w=p.default.div.withConfig({displayName:"indexstyle__LineStyle",componentId:"sc-11d4rgl-2"})(["height:","px;"],20),S=(0,p.css)(["@keyframes cursor-blink{0%{opacity:0;}}::before{","}::after{","}"],(function(n){return n.focusBeginning&&"\n      position: absolute;\n      background-color: ".concat((n.theme.accent||v.Z.accent).warning,';\n      content: "";\n      display: inline-block;\n      height: ').concat(20,"px;\n      width: ").concat(g.iI,"px;\n      opacity: 0.3;\n    ")}),(function(n){return n.focused&&"\n      background-color: ".concat((n.theme.accent||v.Z.accent).warning,';\n      content: "";\n      display: inline-block;\n      height: ').concat(20,"px;\n      width: ").concat(g.iI,"px;\n      opacity: 0.3;\n    ")})),j=p.default.div.withConfig({displayName:"indexstyle__InputStyle",componentId:"sc-11d4rgl-3"})(["align-items:center;display:flex;gap:2px;",""],S),k=p.default.span.withConfig({displayName:"indexstyle__CharacterStyle",componentId:"sc-11d4rgl-4"})([""," ::after{","}"],S,(function(n){return n.focused&&"\n      position: absolute;\n    "})),P=t(16115),O=t(94353),T=t(28799),_=t(51504),E=t(66653),I=t(41150),Z=t(28598);function C(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return A(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){c=!0,o=n},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw o}}}}function A(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var N="terminal";var M=function(n){var e=n.interruptKernel,t=n.onFocus,r=n.uuid,p=void 0===r?N:r,v=n.width,g=(0,a.useRef)(null),y=(0,a.useRef)(null),m=(0,a.useState)(!1),S=m[0],A=m[1],M=(0,a.useState)(""),D=M[0],R=M[1],F=(0,a.useState)(0),X=F[0],U=F[1],B=(0,a.useState)(""),G=B[0],H=B[1],L=(0,a.useState)(0),Y=L[0],K=L[1],W=(0,a.useState)([]),z=W[0],Q=W[1],q=(0,a.useState)(!1),J=q[0],V=q[1],$=(0,a.useState)([]),nn=$[0],en=$[1],tn=(0,o.ZP)((0,T.Ib)(),{shouldReconnect:function(){return!0}}),rn=tn.lastMessage,on=(tn.readyState,tn.sendMessage);(0,a.useEffect)((function(){if(rn){var n=null!==rn&&void 0!==rn&&rn.data?JSON.parse(rn.data):null;(null===n||void 0===n?void 0:n.uuid)===p&&(s.uF.BUSY===(null===n||void 0===n?void 0:n.execution_state)?A(!0):s.uF.IDLE===(null===n||void 0===n?void 0:n.execution_state)&&A(!1),en((function(e){return n?e.concat(n):e})))}}),[rn,A,en,p]),(0,a.useEffect)((function(){if(g.current&&y.current){var n=y.current.getBoundingClientRect().height;g.current.scrollTo(0,n)}}),[nn,g,y]);var an=(0,I.y)(),cn=an.registerOnKeyDown,un=an.setDisableGlobalKeyboardShortcuts,ln=an.unregisterOnKeyDown;(0,a.useEffect)((function(){return function(){ln(p)}}),[ln,p]);var sn=(0,a.useCallback)((function(){K((function(n){return n>0?n-1:n}))}),[]),dn=(0,a.useCallback)((function(){K((function(n){return n<=D.length?n+1:n}))}),[D]),fn=(0,a.useCallback)((function(n){var e=(null===n||void 0===n?void 0:n.split(/\n/))||[];if(e.length>1){var t=e.slice(0,-1);t[0]=D+t[0];var r=t.map((function(n,e){return{command:0===e,data:n,type:s.Gi.TEXT}}));U(z.length+t.length),Q((function(n){return n.concat(t)})),en((function(n){return n.concat(r)})),H((function(n){return n+t.join("\n")}));var i=(e.slice(-1)[0]||"").trim();R(i),K(i.length)}else R((function(e){return e+n})),K(D.length+n.length)}),[D,z]);return cn(p,(function(n,t,r){var i=n.code,o=n.key;if(J)if((0,E.j)(n),(0,_.y)([P.PQ,P.VS],t))A(!1),en((function(n){var e;return n.concat({command:!0,data:(null===D||void 0===D||null===(e=D.trim())||void 0===e?void 0:e.length)>=1?D:"\n",type:s.Gi.TEXT})})),R(""),e();else if(!S)if(P.Qj!==i||t[P.zX])if((0,_.y)([P.QK],t))sn();else if((0,_.y)([P.DY],t))dn();else if((0,_.y)([P.Bu],t)){if(z.length>=1){var a,u=Math.max(0,X-1);R(z[u]),U(u),K((null===(a=z[u])||void 0===a?void 0:a.length)||0)}}else if((0,_.y)([P.kD],t)){if(z.length>=1){var l=Math.min(z.length,X+1),d=z[l]||"";R(d),U(l),K(d.length)}}else if((0,_.y)([P.Uq],t)){var f=G+D;(null===f||void 0===f?void 0:f.length)>=1&&(A(!0),on(JSON.stringify({api_key:O.l,code:"!".concat(f),token:(new c.Z).decodedToken.token,uuid:p})),U(z.length+1),Q((function(n){return n.concat(D)})),K(0)),en((function(n){var e;return n.concat({command:!0,data:(null===D||void 0===D||null===(e=D.trim())||void 0===e?void 0:e.length)>=1?D:"\n",type:s.Gi.TEXT})})),H(""),R("")}else if((0,_.y)([P.zX,P.VS],t))navigator.clipboard.writeText(window.getSelection().toString());else if((0,_.y)([P.zX,P.Pd],t)||(0,_.y)([P.PQ,P.Pd],t)){var h,v,g,y,m;"undefined"===typeof(null===(h=navigator)||void 0===h?void 0:h.clipboard)?alert('Clipboard pasting is not allowed in insecure contexts. If your Mage deployment is not secure but you still want to use clipboard paste, you can override this setting (which should only be done temporarily) on Chrome browsers by going to "chrome://flags/#unsafely-treat-insecure-origin-as-secure", adding your origin to "Insecure origins treated as secure", and enabling that setting.'):null!==(v=navigator)&&void 0!==v&&null!==(g=v.clipboard)&&void 0!==g&&g.readText?navigator.clipboard.readText().then(fn).catch((function(n){return alert("".concat(n,'\n    For Chrome, users need to allow clipboard permissions for this site under "Privacy and security" -> "Site settings".\n    For Safari, users need to allow the clipboard paste by clicking "Paste" in the context menu that appears.'))})):null!==(y=navigator)&&void 0!==y&&null!==(m=y.clipboard)&&void 0!==m&&m.read?navigator.clipboard.read().then((function(n){var e,t=C(n);try{for(t.s();!(e=t.n()).done;){var r,i=e.value,o=C(i.types);try{for(o.s();!(r=o.n()).done;){var a=r.value;if("text/plain"===a)return i.getType(a)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){t.e(c)}finally{t.f()}})).then((function(n){return n.text()})).then(fn).catch((function(n){return alert("".concat(n,'\n    For Firefox, users need to allow clipboard paste by setting the "dom.events.asyncClipboard.read" preference in "about:config" to "true" and clicking "Paste" in the context menu that appears.'))})):alert('If pasting is not working properly, you may need to adjust some settings in your browser.\n\n    For Firefox, users need to allow clipboard paste by setting both the "dom.events.asyncClipboard.clipboardItem" and "dom.events.asyncClipboard.read" preferences in "about:config" to "true" and clicking "Paste" in the context menu that appears.\n    For Chrome, users need to allow clipboard permissions for this site under "Privacy and security" -> "Site settings".\n    For Safari, users need to allow the clipboard paste by clicking "Paste" in the context menu that appears.\n')}else t[P.zX]||t[P.PQ]||1!==o.length||(R((function(n){return n.slice(0,Y)+o+n.slice(Y)})),dn());else{var b=Math.max(0,Y-1);R((function(n){return n.slice(0,b)+n.slice(Y)})),K((function(n){return Math.max(0,n-1)}))}}),[S,D,z,X,J,e,A,R,Q,U,en,p]),(0,Z.jsx)(b,{ref:g,width:v,children:(0,Z.jsx)(u.Z,{isOpen:!0,onClick:function(){null===t||void 0===t||t(),V(!0),un(!0)},onClickOutside:function(){V(!1),un(!1)},style:{minHeight:"100%"},children:(0,Z.jsxs)(x,{ref:y,width:v,children:[null===nn||void 0===nn?void 0:nn.reduce((function(n,e,t){var r=e||{},o=r.command,a=r.data,c=r.type,u=[];u=(u=Array.isArray(a)?a:[a]).filter((function(n){return n}));var d=[];return u.forEach((function(n,e){var r;if(s.jU.includes(c)&&(r=(0,Z.jsxs)(h.ZP,{monospace:!0,noWrapping:!0,pre:!0,children:[n&&(0,Z.jsx)(i(),{children:n}),!n&&(0,Z.jsx)(Z.Fragment,{children:"\xa0"})]})),r){var a="command-".concat(t,"-").concat(e,"-").concat(n);o?d.push((0,Z.jsx)(w,{children:(0,Z.jsxs)(l.Z,{alignItems:"center",children:[(0,Z.jsx)(h.ZP,{inline:!0,monospace:!0,warning:!0,children:"\u2192\xa0"}),r]})},a)):d.push((0,Z.jsx)(w,{children:r},a))}})),n.concat(d)}),[]),S&&(0,Z.jsx)(d.Z,{mt:1,children:(0,Z.jsx)(f.Z,{})}),!S&&(0,Z.jsx)(j,{focused:J&&(0===D.length||Y>D.length),children:(0,Z.jsxs)(h.ZP,{monospace:!0,children:[(0,Z.jsx)(h.ZP,{inline:!0,monospace:!0,warning:!0,children:"\u2192\xa0"}),null===D||void 0===D?void 0:D.split("").map((function(n,e){return(0,Z.jsxs)(k,{focusBeginning:J&&0===Y&&0===e,focused:J&&Y===e+1,children:[" "===n&&(0,Z.jsx)(Z.Fragment,{children:"\xa0"})," "!==n&&n]},"command-".concat(e,"-").concat(n))}))]})})]})})})}},82635:function(n,e,t){"use strict";var r,i;t.d(e,{Gi:function(){return i},jU:function(){return a},uF:function(){return r}}),function(n){n.BUSY="busy",n.IDLE="idle",n.QUEUED="queued"}(r||(r={})),function(n){n.IMAGE_PNG="image/png",n.PROGRESS="progress",n.TABLE="table",n.TEXT="text",n.TEXT_HTML="text/html",n.TEXT_PLAIN="text/plain"}(i||(i={}));var o,a=[i.TEXT,i.TEXT_PLAIN];!function(n){n.DISPLAY_DATA="display_data",n.STATUS="status",n.STREAM="stream",n.STREAM_PIPELINE="stream_pipeline"}(o||(o={}))},98781:function(n,e,t){"use strict";t.d(e,{a:function(){return a},q:function(){return i}});var r,i,o=t(82394);!function(n){n.INTEGRATION="integration",n.PYTHON="python",n.PYSPARK="pyspark",n.STREAMING="streaming"}(i||(i={}));var a=(r={},(0,o.Z)(r,i.PYTHON,"python3"),(0,o.Z)(r,i.PYSPARK,"pysparkkernel"),r)},72433:function(n,e,t){"use strict";t.r(e);var r=t(77837),i=t(75582),o=t(38860),a=t.n(o),c=t(82684),u=t(83455),l=t(1210),s=t(41788),d=t(33699),f=t(82531),h=t(98781),p=t(96510),v=t(28598);function g(){var n=(0,u.Db)(f.ZP.kernels.useUpdate(h.a[h.q.PYTHON]),{onSuccess:function(n){return(0,p.wD)(n,{onErrorCallback:function(n,e){console.log(n),alert(e)}})}}),e=(0,i.Z)(n,1)[0],t=(0,c.useCallback)((function(){return e({kernel:{action_type:"interrupt"}})}),[e]);return(0,v.jsx)(l.Z,{title:"Terminal",uuid:"terminal/index",children:(0,v.jsx)(d.Z,{interruptKernel:t})})}g.getInitialProps=(0,r.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{});case 1:case"end":return n.stop()}}),n)}))),e.default=(0,s.Z)(g)},51504:function(n,e,t){"use strict";t.d(e,{y:function(){return o}});var r=t(75582),i=t(16115);function o(n,e){var t=n.map((function(n){return String(n)})),o=n.includes(i.PQ),a=n.includes(i.zX),c=n.includes(i.XR),u=i.xU.map((function(n){return String(n)})),l=i.vk.map((function(n){return String(n)})),s=i.Tr.map((function(n){return String(n)})),d=Object.entries(e).find((function(n){var e=(0,r.Z)(n,2),i=e[0];return e[1]&&!t.includes(String(i))&&(!a||!l.includes(String(i)))&&(!o||!u.includes(String(i)))&&(!c||!s.includes(String(i)))}));return n.every((function(n){return e[n]}))&&!d}},27271:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal",function(){return t(72433)}])}},function(n){n.O(0,[3850,9565,6085,9767,9386,9774,2888,179],(function(){return e=27271,n(n.s=e);var e}));var e=n.O();_N_E=e}]);