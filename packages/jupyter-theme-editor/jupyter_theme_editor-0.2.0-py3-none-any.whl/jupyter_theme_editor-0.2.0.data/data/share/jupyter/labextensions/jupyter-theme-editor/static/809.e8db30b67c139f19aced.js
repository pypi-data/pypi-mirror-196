"use strict";(self.webpackChunkjupyter_theme_editor=self.webpackChunkjupyter_theme_editor||[]).push([[809],{7809:(t,e,o)=>{o.r(e),o.d(e,{default:()=>D});var r=o(5510);const n=new(o(6591).LabIcon)({name:"@jupyterlab/jupyter-theme-editor:theme-editor",svgstr:'<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- Created with Vectornator (http://vectornator.io/) --\x3e\n<svg width="32" height="32" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:vectornator="http://vectornator.io">\n<g class="jp-icon3" transform="matrix(1.12 0 0 1.12 -.79163 -1.9985)" fill="#616161">\n\n\n\n\n\n<g transform="translate(-.8135 -.70854)"><g transform="matrix(1.01 0 0 1.01 -.15908 -.16883)"><g transform="matrix(1.029 0 0 1.029 .069016 -2.7107)"><g transform="matrix(.029276 -.0020473 .0020473 .029276 -.31852 3.8499)" vectornator:layerName="Layer 1">\n<path d="m542.97 104.28c-143.31 0.702-234.82 80.755-257.91 182-29.552 129.59 9.217 224.28 117.88 251.03 108.66 26.748 157.5 36.834 181.47 69.157 75.868 102.32 39.712 167.86 61.282 211.12 52.191 104.7 226.78-47.032 284.56-270.47 57.782-223.44-36.168-361.67-255.06-423.5-47.884-13.526-92.094-19.54-132.22-19.344zm15.906 66.781c1.677 0.075 3.352 0.265 5.031 0.594 26.871 5.268 43.248 41.767 36.563 81.532-6.685 39.764-33.91 67.737-60.781 62.468-26.872-5.268-43.216-41.766-36.532-81.531 6.267-37.28 30.565-64.185 55.719-63.063zm159.44 41.75c5.104 0.119 10.07 1.248 14.719 3.5 24.795 12.016 31.319 51.261 14.563 87.657s-50.456 56.171-75.25 44.156c-24.795-12.015-31.318-51.26-14.563-87.656 13.614-29.572 38.415-48.169 60.531-47.657zm-331.62 20.938c23.491 0.977 47.909 25.358 57.718 59.688 11.211 39.233-0.916 76.593-27.094 83.437-26.177 6.844-56.477-19.423-67.687-58.656-11.211-39.234 0.916-76.563 27.094-83.407 3.272-0.855 6.613-1.201 9.969-1.062zm456.59 97.688c8.977 0.389 17.172 3.297 23.719 8.937 20.949 18.048 16.968 57.326-8.875 87.75-25.842 30.424-63.77 40.454-84.719 22.406-20.949-18.047-16.967-57.325 8.875-87.75 17.767-20.917 41.252-32.201 61-31.343z" stroke="#616161" stroke-linecap="butt" stroke-linejoin="round" stroke-width="17.775"/>\n</g><g transform="matrix(.62364 -.62364 .62366 .62366 -4.4514 16.59)"><g transform="matrix(.025113 .02183 -.02183 .025113 11.728 -5.0008)" vectornator:layerName="Layer 4">\n<path d="m324.12 592.86c-3.614 3.413-7.92 7.029-12.875 10.907-0.058 0.048-0.098 0.108-0.156 0.156-0.179 0.14-0.35 0.265-0.531 0.406-1.406 1.094-2.534 2.064-4.063 3.219 0.095-0.071-7.365 5.562-9.406 7.125-3.735 2.86-6.665 5.206-9.25 7.469-0.523 0.457-4.92 4.399-6.375 5.656-1.228 1.061-2.343 1.923-3.5 2.844 19.902 25.075 41.269 51.267 64.5 78.562 113.78 133.68 217.74 233.93 232.19 223.91 14.452-10.027-66.09-126.53-179.88-260.22-24.349-28.608-47.99-55.243-70.657-80.032z" stroke="#616161" stroke-linecap="butt" stroke-linejoin="round" stroke-width="17.775"/>\n</g><g id="Layer-4-copy" transform="matrix(.025113 .02183 -.02183 .025113 11.728 -5.0008)" vectornator:layerName="Layer 4 copy">\n<path d="m235 500.95c-8.171 10.062-18.667 19.129-32.343 28.969 16.499 24.03 37.303 52.227 61.375 83.094 14.423-7.914 30.688-21.238 45.218-36.313-27.349-29.399-52.676-55.28-74.25-75.75z" stroke="#616161" stroke-linecap="butt" stroke-linejoin="round" stroke-width="17.775"/>\n</g><g transform="matrix(.025113 .02183 -.02183 .025113 11.728 -5.0008)" vectornator:layerName="Layer 3">\n<path d="m145.1 366.55c40.96 6.246 59.443 23.082 79.348 76.653 13.046 35.111-18.332 61.686-38.681 69.832-20.35 8.145-69.142-13.169-95.537-53.739-45.607-70.1-14.564-147.68 13.388-163.34 27.951-15.658-1.862 63.98 41.482 70.59z" stroke="#616161" stroke-linecap="butt" stroke-linejoin="round" stroke-width="17.775"/>\n</g></g></g></g></g></g>\n</svg>\n'});var i=o(8185);const s=JSON.parse('{"type":"object","properties":{"layout-color":{"title":"Layout color","type":"string"},"accent-color":{"title":"Accent color","type":"string"},"border-color":{"title":"Border color","type":"string"},"brand-color":{"title":"Brand color","type":"string","default":""},"error-color":{"title":"Error color","type":"string"},"info-color":{"title":"Info color","type":"string"},"success-color":{"title":"Success color","type":"string"},"warn-color":{"title":"Warn color","type":"string"},"ui-font-size":{"title":"UI font size","type":"integer","minimum":6,"maximum":30},"content-font-size":{"title":"Content font size","type":"integer","minimum":6,"maximum":30},"code-font-size":{"title":"Code font size","type":"integer","minimum":6,"maximum":30},"border-width":{"title":"Border width","type":"integer","minimum":1,"maximum":10},"border-radius":{"title":"Border radius","type":"integer","minimum":1,"maximum":10},"ui-font-family":{"title":"User Interface Font family","type":"string","enum":["Arial","Dancing Script","Dosis","Helvetica","JetBrains Mono","Lobster","Oxygen","Pacifico","Prompt","Righteous","Single Day","system-ui","Satisfy","Times New Roman","Ultra","Urbanist"]},"content-font-family":{"title":"Content Font family","type":"string","enum":["Arial","Dancing Script","Dosis","Helvetica","JetBrains Mono","Lobster","Oxygen","Pacifico","Prompt","Righteous","Single Day","system-ui","Satisfy","Times New Roman","Ultra","Urbanist"]},"code-font-family":{"title":"Code Font family","type":"string","enum":["monospace","Space Mono","DejaVuSans Mono"]}}}');function c(t){const e=t.replace(/\s/g,"");if("white"===e)return"#ffffff";if("black"===e)return"#000000";if(t.includes("rgba")){const t=e.split("rgba(")[1];return"#"+[Number(t.split(",")[0]),Number(t.split(",")[1]),Number(t.split(",")[2])].map((t=>{const e=t.toString(16);return 1===e.length?"0"+e:e})).join("")}return t}function a(t,e,o,r){const n=[];for(let i=0;i<r;i++){const r=e.palette[i].toStringHexRGB(),s=t+String(i);n.push(o[s]=r)}return n}function l(t,e,o,r){const n=[];for(let i=0;i<r;i++){const r=e[i],s=t+String(i);n.push(o[s]=r)}return n}function u(t,e){const o=t.getPropertyValue(e);return Number(o.split("px")[0])}function m(t,e,o){const r=u(t,e+"1"),n=t.getPropertyValue(e+String(o));return n.includes("em")?Number(n.split("em")[0])*r:r}function p(t,e){return c(t.getPropertyValue(e))}function d(t,e,o){return f((0,i.parseColorHexRGB)(t.replace(/\s/g,"").toUpperCase()),e)}function f(t,e){return new i.ColorPalette({baseColor:t,steps:e,interpolationMode:i.ColorInterpolationSpace.RGB})}function h(t){return(0,i.rgbToHSL)(t).l}function g(t){return(0,i.rgbToHSL)(t).s}function y(t){return(0,i.rgbToHSL)(t).h}class b extends r.VDomModel{constructor(){super();const t=window.getComputedStyle(document.body);this._uiFontScale=u(t,"--jp-ui-font-scale-factor"),this._contentFontScale=u(t,"--jp-content-font-scale-factor"),this._schema=s,this._formData=function(){const t=window.getComputedStyle(document.body);return{"ui-font-family":"system-ui","content-font-family":"system-ui","code-font-family":"monospace","ui-font-size":m(t,"--jp-ui-font-size",1),"content-font-size":m(t,"--jp-content-font-size",1),"code-font-size":u(t,"--jp-code-font-size"),"border-width":u(t,"--jp-border-width"),"border-radius":u(t,"--jp-border-radius"),"layout-color":p(t,"--jp-layout-color1"),"accent-color":p(t,"--jp-accent-color1"),"border-color":p(t,"--jp-border-color1"),"brand-color":p(t,"--jp-brand-color1"),"error-color":p(t,"--jp-error-color1"),"info-color":p(t,"--jp-info-color1"),"success-color":p(t,"--jp-success-color1"),"warn-color":p(t,"--jp-warn-color1")}}(),this._cssProperties={},this._formDataSetter={"ui-font-family":t=>this._cssProperties["--jp-ui-font-family"]=t,"content-font-family":t=>this._cssProperties["--jp-content-font-family"]=t,"code-font-family":t=>this._cssProperties["--jp-code-font-family"]=t,"ui-font-size":t=>{const e=[];for(let o=0;o<4;o++){const r=(Math.pow(this._uiFontScale,o-1)*t).toFixed(3);e[o]=String(r)+"px"}return l("--jp-ui-font-size",e,this._cssProperties,4)},"content-font-size":t=>{const e=[];for(let o=0;o<6;o++){const r=(Math.pow(this._contentFontScale,o-1)*t).toFixed(3);e[o]=String(r)+"px"}return l("--jp-content-font-size",e,this._cssProperties,6)},"code-font-size":t=>this._cssProperties["--jp-code-font-size"]=String(t)+"px","border-width":t=>this._cssProperties["--jp-border-width"]=String(t)+"px","border-radius":t=>this._cssProperties["--jp-border-radius"]=String(t)+"px","accent-color":t=>a("--jp-accent-color",d(t,4),this._cssProperties,4),"border-color":t=>a("--jp-border-color",d(t,4),this._cssProperties,4),"brand-color":t=>a("--jp-brand-color",d(t,5),this._cssProperties,5),"error-color":t=>a("--jp-error-color",d(t,4),this._cssProperties,4),"info-color":t=>a("--jp-info-color",d(t,4),this._cssProperties,4),"layout-color":t=>{const e=c(t),o=(0,i.parseColorHexRGB)(e.replace(/\s/g,"").toUpperCase()),r=function(t){let e=h(t);const o=y(t),r=g(t);e>.3&&e<.4&&(e-=.15),e>=.4&&e<.5&&(e-=.25),e>=.5&&e<.6?e+=.15:e>=.6&&e<.7&&(e+=.25);const n=new i.ColorHSL(o,r,e);return(0,i.hslToRGB)(n)}(o),n=f(r,5),s=1-h(r),l=new i.ColorHSL(y(o),g(o),s),u=f((0,i.hslToRGB)(l,1),5);return[a("--jp-layout-color",n,this.cssProperties,5),a("--jp-inverse-layout-color",u,this.cssProperties,4),a("--jp-ui-font-color",u,this.cssProperties,4),a("--jp-ui-inverse-font-color",n,this.cssProperties,4)]},"success-color":t=>a("--jp-success-color",d(t,4),this._cssProperties,4),"warn-color":t=>a("--jp-warn-color",d(t,4),this._cssProperties,4)}}get schema(){return this._schema}get cssProperties(){return this._cssProperties}get formData(){return this._formData}set formData(t){for(const e in this._formData){const o=t[e];this._formDataSetter[e](o)}this._formData=t;for(const t in this._cssProperties)document.body.style.setProperty(t,this._cssProperties[t]);this.stateChanged.emit()}}var w=o(6271),j=o.n(w),S=o(7256),x=o.n(S),_=o(6212),P=o(4886),v=o(1258);function C(t){return j().createElement(x(),{schema:t.schema,formData:t.formData,uiSchema:t.uiSchema,onSubmit:t.onSubmit,onChange:e=>{t.setformData(e.formData)}})}function k(t){const[e,o]=(0,w.useState)(!1);return j().createElement(j().Fragment,null,j().createElement("button",{className:"jp-theme-editor-button-color",type:"button",style:{backgroundColor:t.value},onClick:()=>{o(!e)}}),e&&j().createElement(_.ChromePicker,{className:"jp-theme-editor-color-picker",color:t.value,onChange:e=>t.onChange(e.hex)}))}class z extends r.VDomRenderer{constructor(t){super(t),this.addClass("jp-theme-editor-panel"),this.uiSchema={classNames:"form-class","ui:submitButtonOptions":{norender:!1},"ui-font-size":{"ui:widget":"range"},"content-font-size":{"ui:widget":"range"},"code-font-size":{"ui:widget":"range"},"border-width":{"ui:widget":"range"},"border-radius":{"ui:widget":"range"},"layout-color":{"ui:widget":k},"accent-color":{"ui:widget":k},"border-color":{"ui:widget":k},"brand-color":{"ui:widget":k},"error-color":{"ui:widget":k},"info-color":{"ui:widget":k},"success-color":{"ui:widget":k},"warn-color":{"ui:widget":k}}}render(){return j().createElement(C,{schema:this.model.schema,formData:this.model.formData,uiSchema:this.uiSchema,onSubmit:()=>{return t=this.model.cssProperties,void async function(t="",e={}){const o=v.ServerConnection.makeSettings(),r=P.URLExt.join(o.baseUrl,"jupyter-theme-editor",t);let n;try{n=await v.ServerConnection.makeRequest(r,e,o)}catch(t){throw new v.ServerConnection.NetworkError(t)}let i=await n.text();if(i.length>0)try{i=JSON.parse(i)}catch(t){console.log("Not a JSON response body.",n)}if(!n.ok)throw new v.ServerConnection.ResponseError(n,i.message||i);return i}("send_cssProperties",{body:JSON.stringify(t),method:"POST"}).then((t=>{const e=new Blob([t],{type:"text/css"}),o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download="variables.css",document.body.appendChild(r),r.click(),document.body.removeChild(r)})).catch((t=>{console.error(`The jupyter_theme_editor server extension appears to be missing.\n${t}`)}));var t},setformData:t=>{this.model.formData=t}})}}const D={id:"jupyter-theme-editor:plugin",autoStart:!0,requires:[r.IThemeManager],activate:async(t,e)=>{const o=(e,r)=>{e.themeChanged.disconnect(o);const i=new b,s=new z(i);s.addClass("jp-theme-editor-view-panel"),s.id="theme-editor",s.title.icon=n,t.shell.add(s,"left")};e.themeChanged.connect(o)}}}}]);