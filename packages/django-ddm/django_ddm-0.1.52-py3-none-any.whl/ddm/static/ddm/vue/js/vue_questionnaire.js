(function(){"use strict";var e={2103:function(e,n,t){var i=t(821);const s=["data-page-index"],r={key:0,class:"question-container"},a=["id"],d={key:1,class:"question-container"},l=["id"],o={key:2,class:"question-container"},u=["id"],c={key:3,class:"question-container"},h=["id"],w={key:4,class:"question-container"},m=["id"],g={key:5,class:"question-container"},q=["id"],p={class:"row flow-navigation"},f={class:"col"};function v(e,n,t,v,b,x){const y=(0,i.up)("SingleChoiceQuestion"),C=(0,i.up)("MultiChoiceQuestion"),_=(0,i.up)("OpenQuestion"),k=(0,i.up)("MatrixQuestion"),H=(0,i.up)("SemanticDifferential"),D=(0,i.up)("TransitionQuestion");return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.parsedQuestConfig,((n,t)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:t,"data-page-index":n.index},["single_choice"===n.type?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(y,{qid:n.question,text:n.text,items:n.items,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["qid","text","items","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,a)])):(0,i.kq)("",!0),"multi_choice"===n.type?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(C,{qid:n.question,text:n.text,items:n.items,required:n.required,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["qid","text","items","required","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,l)])):(0,i.kq)("",!0),"open"===n.type?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(_,{qid:n.question,text:n.text,options:n.options,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["qid","text","options","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,u)])):(0,i.kq)("",!0),"matrix"===n.type?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(k,{qid:n.question,text:n.text,items:n.items,scale:n.scale,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["qid","text","items","scale","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,h)])):(0,i.kq)("",!0),"semantic_diff"===n.type?((0,i.wg)(),(0,i.iD)("div",w,[(0,i.Wm)(H,{qid:n.question,text:n.text,items:n.items,scale:n.scale,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["qid","text","items","scale","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,m)])):(0,i.kq)("",!0),"transition"===n.type?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(D,{text:n.text,onAnswerChanged:x.updateAnswers,class:"question-body"},null,8,["text","onAnswerChanged"]),(0,i._)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.zw)(e.$t("required-but-missing-hint")),9,q)])):(0,i.kq)("",!0)],8,s)),[[i.F8,b.currentIndex===n.index]]))),128)),(0,i._)("div",p,[(0,i._)("div",f,[(0,i._)("button",{class:"flow-btn",type:"button",onClick:n[0]||(n[0]=(...e)=>x.next&&x.next(...e))},(0,i.zw)(e.$t("next-btn-label"))+"  ›",1)])])],64)}const b=["innerHTML"],x=["id"],y={class:"form-check-label rb-cb-label"},C=["dataid","name","value"],_=["innerHTML"];function k(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,b),(0,i._)("div",{id:"answer-"+t.qid,class:"question-response-body"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.items,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"question-choice-item form-check"},[(0,i._)("label",y,[(0,i._)("input",{class:"form-check-input",type:"radio",dataid:t.qid,name:"q-"+t.qid,value:e.value,onChange:n[0]||(n[0]=e=>a.answerChanged(e))},null,40,C),(0,i._)("span",{innerHTML:e.label},null,8,_)])])))),128))],8,x)])}var H={name:"SingleChoiceQuestion",props:["qid","text","items"],emits:["answerChanged"],data:function(){return{answer:""}},created(){this.answer=-99,this.$emit("answerChanged",{id:this.qid,answers:this.answer})},methods:{answerChanged(e){this.answer=e.target.value,this.$emit("answerChanged",{id:this.qid,answers:this.answer})}}},D=t(3744);const M=(0,D.Z)(H,[["render",k]]);var T=M;const L=["innerHTML"],Q={class:"question-response-body"},S={class:"form-check-label rb-cb-label"},A=["name","value"],O=["innerHTML"];function $(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,L),(0,i._)("div",Q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.items,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"question-choice-item form-check"},[(0,i._)("label",S,[(0,i._)("input",{class:"form-check-input",type:"checkbox",name:e.id,value:e.value,onChange:n[0]||(n[0]=e=>a.answerChanged(e))},null,40,A),(0,i._)("span",{innerHTML:e.label},null,8,O)])])))),128))])])}var I={name:"MultiChoiceQuestion",props:["qid","text","items"],emits:["answerChanged"],data:function(){return{answer:{}}},created(){this.items.forEach((e=>{this.answer[e.id]=!1})),this.$emit("answerChanged",{id:this.qid,answers:this.answer})},methods:{answerChanged(e){this.answer[e.target.name]=e.target.checked,this.$emit("answerChanged",{id:this.qid,answers:this.answer})}}};const z=(0,D.Z)(I,[["render",$]]);var E=z;const Y=["innerHTML"],j=["id"],K=["name"],W=["name"];function Z(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,Y),(0,i._)("div",{id:"answer-"+t.qid,class:"question-response-body"},["small"==t.options.display?((0,i.wg)(),(0,i.iD)("input",{key:0,type:"text",name:t.qid,onChange:n[0]||(n[0]=e=>a.answerChanged(e))},null,40,K)):(0,i.kq)("",!0),"large"==t.options.display?((0,i.wg)(),(0,i.iD)("textarea",{key:1,class:"open-question-textarea",type:"text",name:t.qid,onChange:n[1]||(n[1]=e=>a.answerChanged(e))},null,40,W)):(0,i.kq)("",!0)],8,j)])}var P={name:"OpenQuestion",props:["qid","text","options"],emits:["answerChanged"],data:function(){return{answer:"-99"}},created(){this.$emit("answerChanged",{id:this.qid,answers:this.answer})},methods:{answerChanged(e){this.answer=e.target.value,this.$emit("answerChanged",{id:this.qid,answers:this.answer})}}};const R=(0,D.Z)(P,[["render",Z]]);var F=R;const B=["innerHTML"],N={class:"mq-table"},J={class:"mq-header"},U=(0,i._)("th",null,null,-1),G=["innerHTML"],V=["id"],X=["innerHTML"],ee=["name","value"];function ne(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,B),(0,i._)("table",N,[(0,i._)("thead",J,[(0,i._)("tr",null,[U,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.scale,((e,n)=>((0,i.wg)(),(0,i.iD)("th",{key:n,innerHTML:e.label},null,8,G)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.items,((e,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,id:"answer-item-"+e.id},[(0,i._)("td",{class:"mq-table-td-item",innerHTML:e.label},null,8,X),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.scale,((t,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"mq-table-td-input"},[(0,i._)("label",null,[(0,i._)("input",{type:"radio",name:e.id,value:t.value,onChange:n[0]||(n[0]=e=>a.answerChanged(e))},null,40,ee)])])))),128))],8,V)))),128))])])])}var te={name:"SingleChoiceQuestion",props:["qid","text","items","scale"],emits:["answerChanged"],data:function(){return{answer:{}}},created(){this.items.forEach((e=>{this.answer[e.id]=-99})),this.$emit("answerChanged",{id:this.qid,answers:this.answer})},methods:{answerChanged(e){this.answer[e.target.name]=e.target.value,this.$emit("answerChanged",{id:this.qid,answers:this.answer})}}};const ie=(0,D.Z)(te,[["render",ne]]);var se=ie;const re=["innerHTML"],ae={class:"question-response-body"},de={class:"dq-table"},le=(0,i._)("th",null,null,-1),oe=["innerHTML"],ue=(0,i._)("th",null,null,-1),ce=["id"],he=["innerHTML"],we=["name","value"],me=["innerHTML"];function ge(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,re),(0,i._)("div",ae,[(0,i._)("table",de,[(0,i._)("thead",null,[(0,i._)("tr",null,[le,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.scale,((e,n)=>((0,i.wg)(),(0,i.iD)("th",{key:n,innerHTML:e.label},null,8,oe)))),128)),ue])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.items,((e,s)=>((0,i.wg)(),(0,i.iD)("tr",{key:s,id:"answer-item-"+e.id},[(0,i._)("td",{class:"mq-table-td-item dq-table-td-item-left",innerHTML:e.label},null,8,he),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.scale,((t,s)=>((0,i.wg)(),(0,i.iD)("td",{key:s,class:"dq-table-td-input"},[(0,i._)("label",null,[(0,i._)("input",{type:"radio",name:e.id,value:t.value,onChange:n[0]||(n[0]=e=>a.answerChanged(e))},null,40,we)])])))),128)),(0,i._)("td",{class:"mq-table-td-item dq-table-td-item-right",innerHTML:e.label_alt},null,8,me)],8,ce)))),128))])])])])}var qe={name:"SingleChoiceQuestion",props:["qid","text","items","scale"],emits:["answerChanged"],data:function(){return{answer:{}}},created(){this.items.forEach((e=>{this.answer[e.id]=-99})),this.$emit("answerChanged",{id:this.qid,answers:this.answer})},methods:{answerChanged(e){this.answer[e.target.name]=e.target.value,this.$emit("answerChanged",{id:this.qid,answers:this.answer})}}};const pe=(0,D.Z)(qe,[["render",ge]]);var fe=pe;const ve=["innerHTML"];function be(e,n,t,s,r,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{innerHTML:t.text},null,8,ve)])}var xe={name:"TransitionQuestion",props:["text"]};const ye=(0,D.Z)(xe,[["render",be]]);var Ce=ye,_e={name:"QApp",components:{SingleChoiceQuestion:T,MultiChoiceQuestion:E,OpenQuestion:F,MatrixQuestion:se,SemanticDifferential:fe,TransitionQuestion:Ce},props:{questionnaireConfig:String,actionUrl:String,language:String},data(){return this.$i18n.locale=this.language,{parsedQuestConfig:JSON.parse(this.questionnaireConfig),answers:{},currentIndex:1,minIndex:1,maxIndex:1,locale:this.language,displayedRequiredHint:!1}},created(){this.setMaxIndex(),this.currentIndex=this.minIndex},watch:{locale(e){this.$i18n.locale=e}},methods:{updateAnswers(e){this.answers[e.id]=e.answers},setMaxIndex(){let e=[];for(let n in this.parsedQuestConfig)e.push(this.parsedQuestConfig[n].index);this.minIndex=Math.min(...e),this.maxIndex=Math.max(...e)},next(){(this.displayedRequiredHint||this.checkRequired())&&(this.currentIndex===this.maxIndex?this.submitData():(this.currentIndex+=1,null===document.querySelector("[data-page-index='"+this.currentIndex+"']")&&this.next()))},getActiveQuestions(){let e=[];for(let n in this.parsedQuestConfig)this.currentIndex===this.parsedQuestConfig[n].index&&e.push(n);return e},checkRequired(){let e=[],n=new Set;return this.getActiveQuestions().forEach((t=>{if(document.querySelectorAll("div[id*=answer-], tr[id*=answer-]").forEach((e=>e.classList.remove("required-but-missing"))),document.querySelectorAll("div[class*=required-hint]").forEach((e=>e.classList.remove("show"))),this.parsedQuestConfig[t].required){let i=this.answers[t];if(i instanceof Object)for(let s in i)-99!==i[s]&&"-99"!==i[s]||(e.push("item-"+s),n.add(t));else-99!==i&&"-99"!==i||(e.push(t),n.add(t))}})),0===e.length||(e.forEach((e=>{let n="answer-"+e;document.getElementById(n).classList.add("required-but-missing")})),n.forEach((e=>{document.getElementById("required-hint-"+e).classList.add("show")})),this.displayedRequiredHint=!0,!1)},submitData(){let e=new FormData;e.append("post_data",JSON.stringify(this.answers));let n=document.querySelector("input[name='csrfmiddlewaretoken']");e.append("csrfmiddlewaretoken",n.value),fetch(this.actionUrl,{method:"POST",body:e}).then((e=>{e.redirected&&(window.location.href=e.url)})).catch((e=>{console.info(e)}))}}};function ke(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{"next-btn-label":e=>{const{normalize:n}=e;return n(["Next"])},"required-but-missing-hint":e=>{const{normalize:n}=e;return n(["Please answer this question."])}},de:{"next-btn-label":e=>{const{normalize:n}=e;return n(["Weiter"])},"required-but-missing-hint":e=>{const{normalize:n}=e;return n(["Bitte beantworten Sie diese Frage."])}}}})}"function"===typeof ke&&ke(_e);const He=(0,D.Z)(_e,[["render",v]]);var De=He,Me=t(9150);const Te=new Me.o({fallbackLocale:"en"}),Le="#qapp",Qe=document.querySelector(Le),Se=(0,i.ri)(De,{...Qe.dataset});Se.use(Te),Se.mount(Le)}},n={};function t(i){var s=n[i];if(void 0!==s)return s.exports;var r=n[i]={exports:{}};return e[i].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,i,s,r){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],s=e[u][1],r=e[u][2];for(var d=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(t.O).every((function(e){return t.O[e](i[l])}))?i.splice(l--,1):(d=!1,r<a&&(a=r));if(d){e.splice(u--,1);var o=s();void 0!==o&&(n=o)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,s,r]}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={744:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var s,r,a=i[0],d=i[1],l=i[2],o=0;if(a.some((function(n){return 0!==e[n]}))){for(s in d)t.o(d,s)&&(t.m[s]=d[s]);if(l)var u=l(t)}for(n&&n(i);o<a.length;o++)r=a[o],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},i=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(2103)}));i=t.O(i)})();
//# sourceMappingURL=vue_questionnaire.js.map